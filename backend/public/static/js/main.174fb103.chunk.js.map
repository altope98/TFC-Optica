{"version":3,"sources":["assets/images/online.svg","assets/images/envio.svg","db.js","Global.js","components/Header.js","components/Home.js","components/Footer.js","components/Login.js","components/Register.js","components/Tienda.js","components/Citas.js","components/Servicios.js","components/Error.js","components/PerfilUsuario.js","components/panelAdmin/UsuariosAdmin.js","components/panelAdmin/PedidosAdmin.js","components/panelAdmin/CitasAdmin.js","components/panelAdmin/Calendario.js","components/PerfilAdmin.js","components/Carrito.js","paypal.js","components/Compra.js","components/UsuarioPedidos.js","Router.js","App.js","serviceWorker.js","index.js","assets/images/logo.png","assets/images/a.png","assets/images/b.png","assets/images/c.png","assets/images/d.png","assets/images/niña-glasses.jpg","assets/images/dog-glasses.jpg","assets/images/familia-glasses.jpg","assets/images/carrito.svg","assets/images/gafas.svg","assets/images/graduacion.svg"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","storage","firestore","Global","url","Header","state","identity","user","userId","redirect","logout","signOut","then","setState","axios","post","catch","e","alert","message","this","props","logged","currentUser","email","get","response","data","status","Fragment","to","id","className","activeClassName","src","logo","alt","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","role","aria-haspopup","nombre","apellidos","aria-labelledby","admin","style","cursor","onClick","Component","Home","WOW","live","init","showArrows","showThumbs","infiniteLoop","autoPlay","interval","transitionTime","showStatus","showIndicators","a","d","b","c","data-wow-duration","data-wow-delay","familia","height","border","niña","dog","frameborder","allowfullscreen","aria-hidden","tabindex","title","Footer","Login","emailRef","React","createRef","passwordRef","password","inicioGoogle","provider","GoogleAuthProvider","signInWithPopup","result","current","name","displayName","split","telefono","dni","imagen","inicioFacebook","FacebookAuthProvider","changeState","value","recibirFormulario","event","preventDefault","validator","allValid","signInWithEmailAndPassword","err","swal","showMessages","forceUpdate","SimpleReactValidator","messages","required","alpha_num_space","numeric","onSubmit","htmlFor","ref","onChange","minLength","Register","nombreRef","apellidosRef","password2Ref","dniRef","telefonoRef","password2","archivo","loading","confirmpassword","ejecutarFormulario","recogerFoto","target","files","put","child","getDownloadURL","locale","validators","names_surnames","rule","val","params","helpers","testRegex","indexOf","email2","alpha_space","maxLength","onBlur","onKeyUp","onFocus","Tienda","productaux","loadedCarrito","productos","carrito","categoria","edad","genero","show","onCategoriaChange","getProductos","onEdadChange","onGeneroChange","getUser","getCarrito","pulsadoEvento","item","forEach","element","productId","push","cerradoEvento","agregarItem","item_id","match","listProducts","length","map","i","key","product","precio","defaultValue","checked","pathname","Modal","onHide","size","centered","closeButton","Title","Body","descripcion","Button","variant","Citas","cita","disabled","Servicios","class","gafas","graduacion","online","envio","Error","PerfilUsuario","listHistorial","textoHistorialRef","fechaHistorialRef","loading_file","eliminado","historial","addHistorial","historialaux","add","texto","fecha","moment","format","eliminarUsuario","delete","undefined","margin","UsuariosAdmin","users","listUsers","PedidosAdmin","pedidoaux","pedidos","pedidoId","estado","pedido","pedidosaux","splice","listPedidos","detalles","updatePedido","direccion","municipio","provincia","cp","id_usuario","cantidad","precio_total","CitasAdmin","citas","hora","citasaux","listCitas","updateCita","citaId","min","max","localizer","momentLocalizer","Calendario","eventsList","citaaux","actualizadorCitas","fecha2_split","hora2_split","start","Date","parseInt","end","events","startAccessor","endAccessor","defaultView","onSelectEvent","envioRecordatorio","PerfilAdmin","adminid","exact","from","path","component","render","Carrito","reducirItem","eliminarItem","procesarCompra","location","backgroundColor","borderRadius","color","PayPalButton","paypal","driver","ReactDOM","paypalConf","currency","env","client","sandbox","production","label","shape","Compra","errorCarrito","pvp","direccionRef","municipioRef","cpRef","provinciaRef","loadedUser","buttons","completed","onToken","token","total","save_pedido","payment","actions","transactions","amount","description","custom","note_to_payer","create","onAuthorize","execute","error","onError","parseFloat","ComponentClass","stripeKey","commit","UsuarioPedidos","errorPedidos","getPedidos","Router","isLogged","signout","App","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.174fb103.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/online.e261228a.svg\";","module.exports = __webpack_public_path__ + \"static/media/envio.19a52057.svg\";","import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig={\r\n    apiKey: \"AIzaSyCpodxaWgqwls4795dWt3ZbqGEm9Ltt6fY\",\r\n    authDomain: \"proyecto-consulta-firebase.firebaseapp.com\",\r\n    databaseURL: \"https://proyecto-consulta-firebase.firebaseio.com\",\r\n    projectId: \"proyecto-consulta-firebase\",\r\n    storageBucket: \"proyecto-consulta-firebase.appspot.com\",\r\n    messagingSenderId: \"1072801915077\",\r\n    appId: \"1:1072801915077:web:3ea752b2a8a7839bb150ac\"\r\n  };\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\nexport const db = firebase.firestore();\r\nexport const storage = firebase.storage();","var Global={\r\n         /* url: 'http://localhost:3000/' */\r\n         url: 'https://topevision.herokuapp.com/'  \r\n};\r\n\r\nexport default Global","import React, { Component } from 'react';\r\nimport logo from '../assets/images/logo.png';\r\nimport { NavLink , Link, Redirect} from 'react-router-dom';\r\nimport { auth } from '../db';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\n\r\nclass Header extends Component {\r\n\r\n    url = Global.url;\r\n\r\n    state = {\r\n        identity: false,\r\n        user: {},\r\n        userId: null,\r\n        redirect:false,\r\n\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.logged===true && auth.currentUser!=null && this.state.identity === false) {\r\n            let email = auth.currentUser.email\r\n            axios.get(this.url + 'user/' + email).then((response) => {\r\n                if (response.data.status === 'success') {\r\n                    this.setState({\r\n                        identity: true,\r\n                        user: response.data.user,\r\n                        userId: response.data.userId,\r\n                        redirect:false\r\n                    });\r\n\r\n                } else {\r\n                    this.setState({\r\n                        identity: null\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        if(this.state.identity===false){\r\n            axios.post(this.url + 'carrito/cerrar');\r\n        }\r\n\r\n    }\r\n\r\n    logout=()=>{\r\n        auth.signOut().then(()=>{\r\n            this.setState({\r\n                identity: false,\r\n                user: {},\r\n                userId: null,\r\n                redirect:true\r\n            })\r\n\r\n            axios.post(this.url + 'carrito/cerrar');\r\n\r\n        }).catch((e)=>{\r\n            alert(e.message)\r\n        });\r\n        \r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n\r\n            <React.Fragment>\r\n                \r\n            {this.state.redirect===true &&\r\n                            \r\n                <Redirect to=\"/signout\"/>\r\n            }\r\n            \r\n\r\n            <header id=\"header\" className=\"container-fluid\">\r\n                <nav className=\"navbar navbar-expand-lg navbar-light\" id=\"barra\" >\r\n                    <div className=\"navbar-brand\">\r\n                        <NavLink to=\"/\" activeClassName=\"active\"><img src={logo} className=\"app-logo\" id=\"logo\" alt=\"Logotipo\" /></NavLink>\r\n                    </div>\r\n                    <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <span className=\"navbar-toggler-icon\"></span>\r\n                    </button>\r\n                    <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n\r\n                        <ul className=\"navbar-nav mr-auto\">\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to=\"/\" activeClassName=\"active\">Inicio</NavLink>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to=\"/servicios\" activeClassName=\"active\">Servicios</NavLink>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to={\"/tienda/\"+this.state.userId }activeClassName=\"active\">Tienda</NavLink>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to=\"/citas\" activeClassName=\"active\">Citas</NavLink>\r\n                            </li>\r\n                        </ul>\r\n                        <div className=\"dropdown-divider \"></div>\r\n                        <ul className=\"navbar-nav navbar-right\">\r\n\r\n                            {this.state.identity === false || this.state.identity === null\r\n                                ? <React.Fragment>\r\n                                    <li className=\"nav-item\">\r\n                                        <NavLink to=\"/register\" activeClassName=\"active\">Registro</NavLink>\r\n                                    </li>\r\n                                    <li className=\"nav-item\">\r\n                                        <NavLink to=\"/login\" activeClassName=\"active\">Iniciar sesion</NavLink>\r\n                                    </li>\r\n                                </React.Fragment>\r\n                                : <React.Fragment>\r\n                                    <li className=\"nav-item dropdown\" >\r\n                                        <p className=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                            {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                                        </p>\r\n\r\n                                        <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                                            {this.state.user.admin === false \r\n\r\n                                                ?<React.Fragment>\r\n                                                <Link className=\"dropdown-item\" to={\"/miperfil/\" + this.state.userId} >Mi perfil</Link>\r\n                                                <Link className=\"dropdown-item\" to={\"/mispedidos/\" + this.state.userId}>Mis pedidos</Link>\r\n                                                </React.Fragment>\r\n                                                : <React.Fragment>\r\n                                                <Link className=\"dropdown-item\" to={\"/adminperfil/\" + this.state.userId} >Administracion</Link>\r\n                                                \r\n                                                </React.Fragment>\r\n                                            }\r\n                                            <div className=\"dropdown-divider\"></div>\r\n                                            <Link className=\"dropdown-item pointer\" style={{cursor: \"pointer\"}} onClick={this.logout}>Cerrar sesion</Link>\r\n                                        </div> \r\n                                    </li>\r\n                                    </React.Fragment>\r\n                                }\r\n                                \r\n                            </ul>\r\n                        \r\n\r\n            </div >\r\n                    </nav >\r\n                \r\n            </header >\r\n            </React.Fragment>\r\n         );\r\n    }\r\n}\r\n\r\nexport default Header;","import React, { Component } from 'react';\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport a from '../assets/images/a.png'\r\nimport b from '../assets/images/b.png'\r\nimport c from '../assets/images/c.png'\r\nimport d from '../assets/images/d.png'\r\n\r\nimport niña from '../assets/images/niña-glasses.jpg'\r\nimport dog from '../assets/images/dog-glasses.jpg'\r\nimport familia from '../assets/images/familia-glasses.jpg';\r\n\r\nimport WOW from 'wowjs'\r\n\r\nclass Home extends Component {\r\n    state = {}\r\n\r\n    componentDidMount() {\r\n        new WOW.WOW({\r\n            live: false\r\n        }).init();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"home\">\r\n                <div id=\"slider\" className=\" container-fluid p-0\">\r\n                    <Carousel\r\n                        showArrows={false}\r\n                        showThumbs={false}\r\n                        infiniteLoop={true}\r\n                        autoPlay={true}\r\n                        interval={6000}\r\n                        transitionTime={1000}\r\n                        showStatus={false}\r\n                        showIndicators={false}\r\n                    >\r\n                        <div>\r\n                            <img src={a} alt=\"carrousel1\" />\r\n                        </div>\r\n                        <div>\r\n                            <img src={d} alt=\"carrousel4\" />\r\n                        </div>\r\n                        <div>\r\n                            <img src={b} alt=\"carrousel2\" />\r\n                        </div>\r\n                        <div>\r\n                            <img src={c} alt=\"carrousel3\" />\r\n                        </div>\r\n\r\n\r\n                    </Carousel>\r\n                </div>\r\n\r\n\r\n                <div className=\"center\">\r\n                    <h1 className=\"titulo wow fadeIn\">Bienvenido a Tope Vision</h1>\r\n                    <div id=\"content\">\r\n\r\n\r\n                        <hr></hr>\r\n\r\n\r\n                        <div className=\"text-left mt-5 mb-5  \">\r\n                            <div className=\"m-5 wow fadeInUp\">\r\n                                <p className=\"h5\">En Tope Vision, cuidamos su mirada gracias a sofisticados medios para la calibración de su vista y un equipo profesional humano.</p>\r\n                                <p className=\"h5\">Descubre en Tope Visión los últimos diseños vanguardistas en gafas de sol, graduadas y lentillas, con la garantía de utilizar siempre productos de máxima calidad, y las mas conocidas marcas.</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"container mt-5 mb-5 wow slideInLeft\" data-wow-duration=\"2s\" data-wow-delay=\"0.3s\">\r\n                            <h3 className=\"text-left ml-4\">Nuestros servicios</h3>\r\n                            <hr />\r\n                            <div className=\"row  \">\r\n                                <div className=\"col-md-6 col-12 align-self-center  \">\r\n                                    <p className=\"h5 m-4 ml-4   text-center\">Accede a nuestro apartado de servicios para mas informacion</p>\r\n                                    <Link to=\"/servicios\" className=\"btn btn-success\">Ir a servicios</Link>\r\n                                </div>\r\n                                <div className=\"col-md-5 col-12 mt-3 mb-3\">\r\n                                    <Carousel\r\n                                        showArrows={false}\r\n                                        showThumbs={false}\r\n                                        infiniteLoop={true}\r\n                                        autoPlay={true}\r\n                                        interval={6000}\r\n                                        transitionTime={1000}\r\n                                        showStatus={false}\r\n                                        showIndicators={false}\r\n\r\n                                    >\r\n                                        <div>\r\n                                            <img src={familia} style={{ height: \"15rem\", border: \"2px solid black\" }} alt=\"carrousel1\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <img src={niña} style={{ height: \"15rem\", border: \"2px solid black\" }} alt=\"carrousel4\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <img src={dog} style={{ height: \"15rem\", border: \"2px solid black\" }} alt=\"carrousel2\" />\r\n                                        </div>\r\n\r\n\r\n                                    </Carousel>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n\r\n                        </div>\r\n                        <div className=\"container mt-5 mb-5 wow slideInRight\" data-wow-duration=\"2s\" data-wow-delay=\"0.3s\">\r\n                            <h3 className=\"text-left ml-4\">¿Donde nos encontramos?</h3>\r\n                            <hr />\r\n                            <div className=\"row  \">\r\n                                <div className=\"col-md-5 col-12\">\r\n                                    <iframe className=\"p-4\" src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3179.4031370381613!2d-3.6059523848443464!3d37.166889379874604!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd71fc983230a44d%3A0x46030361129f6a89!2sCamino%20de%20Ronda%2C%2038-40%2C%2018004%20Granada!5e0!3m2!1ses!2ses!4v1590427207546!5m2!1ses!2ses\" id=\"map\" frameborder=\"0\" style={{ border: '0' }} allowfullscreen=\"\" aria-hidden=\"false\" tabindex=\"0\" title=\"map\"></iframe>\r\n                                </div>\r\n                                <div className=\"col-md-5 col-12  align-self-center text-left font-weight-bold\">\r\n                                    <p className=\"ml-4\">Direccion: Camino de Ronda, 40, 18004 Granada</p>\r\n                                    <p className=\"ml-4\">Telefono: 692636501</p>\r\n                                    <p className=\"ml-4\">Email: opticatopevision@gmail.com</p>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nconst Footer=()=>{\r\n        return ( \r\n        <footer id=\"footer\">\r\n        <div className=\"center\">\r\n            <p>\r\n                &copy; Alvaro Torrente Perez\r\n\r\n                {/* GITHUB AND LINKEDIN */}\r\n            </p>\r\n        </div>\r\n    </footer> );\r\n    \r\n}\r\n \r\nexport default Footer;\r\n","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { auth } from '../db'\r\nimport firebase from 'firebase';\r\nimport swal from 'sweetalert';\r\n\r\n\r\nimport WOW from 'wowjs'\r\n\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    emailRef = React.createRef();\r\n    passwordRef = React.createRef();\r\n\r\n    url = Global.url;\r\n\r\n    state = {\r\n        email: null,\r\n        password: null,\r\n        status: null,\r\n        user: {},\r\n    };\r\n\r\n    componentDidMount(){\r\n        new WOW.WOW({\r\n            live: false\r\n        }).init();\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n\r\n            },\r\n        });\r\n    }\r\n\r\n    inicioGoogle = () => {\r\n        var provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n        auth.signInWithPopup(provider).then((result) => {\r\n            var current = result.user;\r\n            let name = current.displayName.split(\" \");\r\n            let user = {\r\n                nombre: name[0],\r\n                apellidos: name[1],\r\n                email: current.email,\r\n                telefono: \"\",\r\n                dni: \"\",\r\n                imagen:\"https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66\"\r\n            }\r\n            axios.post(this.url + 'user2', user).then((response)=>{\r\n                if(response.data){\r\n                    this.setState({\r\n                        status: 'success'\r\n                    })\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    inicioFacebook = () => {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n\r\n        auth.signInWithPopup(provider).then((result) => {\r\n            var current = result.user;\r\n            let name = current.displayName.split(\" \");\r\n            let user = {\r\n                nombre: name[0],\r\n                apellidos: name[1],\r\n                email: current.email,\r\n                telefono: \"\",\r\n                dni: \"\",\r\n                imagen: \"https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66\"\r\n            }\r\n            axios.post(this.url + 'user2', user).then((response)=>{\r\n                if(response.data){\r\n                    this.setState({\r\n                        status: 'success'\r\n                    })\r\n                }\r\n            });\r\n            \r\n        })\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            email: this.emailRef.current.value,\r\n            password: this.passwordRef.current.value\r\n        });\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState();\r\n\r\n        if (this.validator.allValid()) {\r\n            auth.signInWithEmailAndPassword(this.state.email, this.state.password).then(() => {\r\n                this.setState({\r\n                    password: null,\r\n                    status: 'success'\r\n                })\r\n            }).catch((err) => {\r\n                swal(\r\n                    'Autenticacion incorrecta',\r\n                    'Comprueba email y contraseña',\r\n                    'error'\r\n                );\r\n            })\r\n        } else {\r\n            this.validator.showMessages();\r\n            this.forceUpdate();\r\n            this.setState({\r\n                status: 'failed'\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.status === 'success') {\r\n            return (\r\n                <Redirect to=\"/logged\" />\r\n            )\r\n        }\r\n\r\n        return (\r\n\r\n            <div id=\"login\" className=\" col-12\">\r\n\r\n                <h2 className=\"text-center p-3 text-md-left wow fadeInRight\">\r\n                    Iniciar sesion\r\n                </h2>\r\n                <hr />\r\n\r\n                <form className=\"col-md-5 wow fadeInUp\" data-wow-duration=\"1s\" data-wow-delay=\"0.3s\" onSubmit={this.recibirFormulario}  >\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"email\" className=\"ml-2\">Email</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"email\" ref={this.emailRef} onChange={this.changeState} required />\r\n                        {this.validator.message('email', this.state.email, 'required|email')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"password\" className=\"ml-2\">Contraseña</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"password\" name=\"password\" ref={this.passwordRef} onChange={this.changeState} required minLength=\"6\" />\r\n                        {this.validator.message('password', this.state.password, 'required')}\r\n\r\n                    </div>\r\n                    <div className=\"clearfix\"></div>\r\n                    <input type=\"submit\" value=\"Iniciar sesion\" className=\"btn btn-success\" />\r\n                </form>\r\n\r\n                <div className=\"botonessesion wow fadeInUp\" data-wow-duration=\"1s\" data-wow-delay=\"0.6s\">\r\n                    <button className=\"btngoogle row\" onClick={() => this.inicioGoogle()}><img src=\"https://www.gstatic.com/mobilesdk/160512_mobilesdk/auth_service_google.svg\" alt=\"google-boton\" /> <p>Inicia sesion con Google</p></button>\r\n                    <button className=\"btnfacebook row\" onClick={() => this.inicioFacebook()}><img src=\"https://www.gstatic.com/mobilesdk/160409_mobilesdk/images/auth_service_facebook.svg\" alt=\"facebook-boton\" /> <p>Inicia sesion con Facebook</p></button>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default Login;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport swal from 'sweetalert';\r\nimport { storage } from '../db';\r\n\r\nimport WOW from 'wowjs'\r\n\r\nclass Register extends Component {\r\n\r\n    nombreRef = React.createRef();\r\n    apellidosRef = React.createRef();\r\n    emailRef = React.createRef();\r\n    passwordRef = React.createRef();\r\n    password2Ref = React.createRef();\r\n    dniRef = React.createRef();\r\n    telefonoRef = React.createRef();\r\n\r\n    url = Global.url;\r\n\r\n    state = {\r\n        user: {},\r\n        status: null,\r\n        password2: null,\r\n        archivo: 'default',\r\n        loading: false\r\n\r\n    };\r\n\r\n    confirmpassword = null;\r\n\r\n\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            locale: 'es',\r\n            validators: {\r\n                names_surnames: {\r\n                    message: 'El campo debe contener letras y espacios',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+(\\s*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]*)*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+$/) && params.indexOf(val) === -1\r\n                    },\r\n\r\n                },\r\n                email2: {\r\n                    message: 'El email no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^(?:[^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*|\"[^\\n\"]+\")@(?:[^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\]\\.,;:\\s@\"]{2,63}$/i) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                telefono: {\r\n                    message: 'El telefono no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^[896]\\d{8}$/) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                dni: {\r\n                    message: 'El DNI no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^\\d{8}[a-zA-Z]$/) && params.indexOf(val) === -1\r\n                    },\r\n                }\r\n            },\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n                alpha_space: 'Solo se permiten letras y espacios'\r\n\r\n            },\r\n        });\r\n    }\r\n\r\n    componentDidMount(){\r\n        new WOW.WOW({\r\n            live: false\r\n        }).init();\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            user: {\r\n                nombre: this.nombreRef.current.value,\r\n                apellidos: this.apellidosRef.current.value,\r\n                email: this.emailRef.current.value,\r\n                password: this.passwordRef.current.value,\r\n                telefono: this.telefonoRef.current.value,\r\n                dni: this.dniRef.current.value,\r\n            },\r\n            password2: this.password2Ref.current.value\r\n        });\r\n        if (this.state.password2 === this.state.user.password) {\r\n\r\n            this.confirmpassword = true\r\n\r\n\r\n        } else {\r\n\r\n            this.confirmpassword = false\r\n        }\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState()\r\n\r\n        this.ejecutarFormulario();\r\n\r\n    }\r\n\r\n    recogerFoto = (event) => {\r\n        this.setState({\r\n            archivo: event.target.files[0]\r\n        })\r\n    }\r\n\r\n    ejecutarFormulario = () => {\r\n        if (this.confirmpassword === true) {\r\n            if (this.validator.allValid()) {\r\n                if (this.state.archivo !== 'default') {\r\n                    this.setState({\r\n                        loading:true\r\n                    })\r\n                    storage.ref(this.state.archivo.name).put(this.state.archivo).then(() => {\r\n                        storage.ref().child(this.state.archivo.name).getDownloadURL().then(\r\n                            url => {\r\n                                this.setState({\r\n                                    loading:false\r\n                                })\r\n                                let user = this.state.user;\r\n                                axios.post(this.url + 'user', { user, url }).then((response) => {\r\n                                    if (response.data.status === 'success') {\r\n                                        this.setState({\r\n                                            status: 'success'\r\n                                        });\r\n                                        swal(\r\n                                            'Usuario registrado',\r\n                                            'Te has registrado correctamente',\r\n                                            'success'\r\n                                        );\r\n                                    } else {\r\n                                        this.setState({\r\n                                            status: 'failed'\r\n                                        });\r\n                                    }\r\n                                });\r\n                            });\r\n                    });\r\n                } else {\r\n                    let user = this.state.user;\r\n                    let url = 'https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66';\r\n                    axios.post(this.url + 'user', { user, url }).then((response) => {\r\n                        if (response.data.status === 'success') {\r\n                            this.setState({\r\n                                status: 'success'\r\n                            });\r\n                            swal(\r\n                                'Usuario registrado',\r\n                                'Te has registrado correctamente',\r\n                                'success'\r\n                            );\r\n                        } else {\r\n                            this.setState({\r\n                                status: 'failed'\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n            } else {\r\n                this.validator.showMessages();\r\n                this.forceUpdate();\r\n                this.setState({\r\n                    status: 'failed'\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.status === 'success') {\r\n            return (\r\n                <Redirect to=\"/login\" />\r\n            )\r\n        }\r\n        return (\r\n\r\n            <div id=\"registro\" className=\" col-12\">\r\n                <h2 className=\"text-center p-3 text-md-left wow fadeInRight\">\r\n                    Registro\r\n                </h2>\r\n                <hr />\r\n\r\n                <form className=\"col-md-5 wow fadeInUp\" data-wow-duration=\"1s\" data-wow-delay=\"0.3s\" onSubmit={this.recibirFormulario} >\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"nombre\" className=\"ml-2\" >Nombre</label>\r\n                        <input id=\"nombre\" className=\"form-control mr-2 ml-2\" type=\"text\" name=\"nombre\" ref={this.nombreRef} onChange={this.changeState} required />\r\n                        {this.validator.message('nombre', this.state.user.nombre, 'required|names_surnames')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"apellidos\" className=\"ml-2\">Apellidos</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"apellidos\" ref={this.apellidosRef} onChange={this.changeState} required />\r\n                        {this.validator.message('apellidos', this.state.user.apellidos, 'required|names_surnames')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"telefono\" className=\"ml-2\">Telefono</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"telefono\" ref={this.telefonoRef} onChange={this.changeState} maxLength=\"9\" required />\r\n                        {this.validator.message('telefono', this.state.user.telefono, 'required|telefono')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"dni\" className=\"ml-2\">DNI</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"dni\" ref={this.dniRef} onChange={this.changeState} onBlur={this.changeState} required />\r\n                        {this.validator.message('dni', this.state.user.dni, 'required|dni')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"image\" className=\"ml-2\">Avatar</label>\r\n                        <input className=\"form-control-file mr-2 ml-2\" type=\"file\" name=\"imagen\" onChange={(e) => this.recogerFoto(e)} />\r\n                        {this.state.loading === true &&\r\n                            <small>Cargando imagen...</small>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"email\" className=\"ml-2\">Email</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"email\" ref={this.emailRef} onChange={this.changeState} onBlur={this.changeState} required />\r\n                        {this.validator.message('email', this.state.user.email, 'required|email2')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"password\" className=\"ml-2\">Contraseña</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"password\" name=\"password\" ref={this.passwordRef} onChange={this.changeState} onBlur={this.changeState} required minLength=\"6\" />\r\n                        {this.validator.message('password', this.state.user.password, 'required')}\r\n\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"password2\" className=\"ml-2\">Confirmar contraseña</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"password\" name=\"password2\" ref={this.password2Ref} onChange={this.changeState} onBlur={this.changeState} onKeyUp={this.changeState} required minLength=\"6\" />\r\n                        {this.confirmpassword === false &&\r\n                            <small>La contraseña no coincide</small>\r\n                        }\r\n\r\n                    </div>\r\n                    <div className=\"clearfix\"></div>\r\n                    <input type=\"submit\" onFocus={this.changeState} onClick={this.changeState} value=\"Registro\" className=\"btn btn-success\" />\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Register;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport {  Redirect,  Link } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport swal from 'sweetalert';\r\nimport carrito from '../assets/images/carrito.svg'\r\nimport { Modal, Button } from 'react-bootstrap'\r\n\r\n\r\nimport WOW from 'wowjs'\r\n\r\nclass Tienda extends Component {\r\n\r\n    url = Global.url\r\n    userId = null;\r\n    productaux = [];\r\n    loadedCarrito=false\r\n    state = {\r\n        identity: true,\r\n        user: {},\r\n        status: null,\r\n        productos: [],\r\n        carrito: [],\r\n        categoria: 'gafas',\r\n        edad: 'adulto',\r\n        genero: 'masculino',\r\n        show: false\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!auth.currentUser) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n            this.userId = this.props.match.params.id\r\n            if (this.userId === \"null\") {\r\n                this.setState({\r\n                    identity: false\r\n                });\r\n            }else{\r\n                axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                    if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                        this.getUser(this.userId);\r\n                    } else {\r\n                        this.setState({\r\n                            identity: false\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    onCategoriaChange = (event) => {\r\n        this.setState({\r\n            categoria: event.target.value,\r\n        }, this.getProductos);\r\n\r\n    }\r\n\r\n    onEdadChange = (event) => {\r\n        this.setState({\r\n            edad: event.target.value\r\n        }, this.getProductos);\r\n    }\r\n\r\n    onGeneroChange = (event) => {\r\n        this.setState({\r\n            genero: event.target.value\r\n        }, this.getProductos);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getProductos();\r\n        this.getCarrito();\r\n\r\n       \r\n            new WOW.WOW({\r\n                live: false\r\n            }).init();\r\n        \r\n\r\n    }\r\n\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    getCarrito = () => {\r\n        axios.get(this.url + 'carrito').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                if(response.data.carrito){\r\n                    this.setState({\r\n                        carrito: response.data.carrito\r\n                    })\r\n                    this.loadedCarrito=true;\r\n                }else{\r\n                    this.loadedCarrito=false;\r\n                }\r\n                \r\n            }\r\n        })\r\n    }\r\n\r\n    getProductos = () => {\r\n        let categoria = this.state.categoria;\r\n        let edad = this.state.edad;\r\n        let genero = this.state.genero;\r\n        axios.post(this.url + 'productos', { categoria: categoria, edad: edad, genero: genero }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    productos: response.data.productos,\r\n                    status: 'success'\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    productos: [],\r\n                    status: 'error'\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    pulsadoEvento = (item) => {\r\n        this.state.productos.forEach((element) => {\r\n            if (item === element.productId) {\r\n                this.productaux.push(element)\r\n                this.setState({\r\n                    show: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    cerradoEvento = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n        this.productaux = [];\r\n    }\r\n\r\n    agregarItem = (id) => {\r\n        axios.post(this.url + 'carrito/agregar', { item_id: id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    carrito: response.data.carrito\r\n                })\r\n                this.loadedCarrito=true\r\n                this.cerradoEvento();\r\n                swal(\r\n                    'Producto agregado correctamente',\r\n                    'El producto se ha añadido al carrito correctamente',\r\n                    'success'\r\n                );\r\n\r\n            } else {\r\n                this.cerradoEvento();\r\n                swal(\r\n                    'El producto no se ha agregado correctamente',\r\n                    'Ha ocurrido un error al agregar el producto al carrito, intentelo mas tarde',\r\n                    'error'\r\n                );\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        var listProducts;\r\n        if (this.state.productos.length >= 1) {\r\n            listProducts = this.state.productos.map((data, i) => {\r\n\r\n                return (\r\n\r\n                    <div key={i} className=\"card \" >\r\n                        <img className=\"card-img-top\" src={data.product.imagen} alt=\"Cardcap\" />\r\n                        <div className=\"card-body pt-0 pb-0\">\r\n                            <h4 className=\"card-title \">{data.product.nombre}</h4>\r\n                            <p className=\"card-text h5\">{data.product.precio} €</p><br />\r\n                        </div>\r\n                        <div className=\"card-footer pt-2 pb-2\">\r\n\r\n                            <button className=\"btn btn-primary\" onClick={() => this.pulsadoEvento(data.productId)}>Ver producto</button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            });\r\n        } else if (this.state.status === 'error') {\r\n            listProducts = <h1 className=\"mt-5 text-center error\">No hay productos para mostrar</h1>\r\n\r\n\r\n\r\n        } else {\r\n            listProducts =\r\n                <h1 className=\"mt-5 text-center cargando\">Cargando...</h1>\r\n\r\n\r\n\r\n        }\r\n\r\n        if (this.state.identity === false) {\r\n            return (\r\n                <Redirect to=\"/login\" />\r\n            )\r\n        } else {  \r\n            return (\r\n                <div id=\"tienda\" className=\"container-fluid mt-3\">\r\n                    \r\n\r\n                    <div className=\"row\">\r\n                        \r\n                        <div id=\"filtros\" className=\"col-md-4 col-12 mt-2 wow fadeIn \">\r\n                        \r\n                            <div className=\"form-group text-left m-2\">\r\n                                <label htmlFor=\"categoria\">Categorias: </label>\r\n                                <select className=\"form-control\" name=\"categoria\" onChange={this.onCategoriaChange}>\r\n                                    <option defaultValue value=\"gafas\">Gafas de sol</option>\r\n                                    <option value=\"lentillas\">Lentillas</option>\r\n                                    <option value=\"limpieza\">Limpieza y accesorios</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"genero text-left m-2\">\r\n                                <label htmlFor=\"genero\" >Genero: </label>\r\n                                <div className=\"form-check\">\r\n                                    <input type=\"radio\" checked={this.state.genero === 'masculino'} className=\"form-check-input\" name=\"masculino\" value=\"masculino\" onChange={this.onGeneroChange} />\r\n                                    <label className=\"form-check-label\" htmlFor=\"masculino\">Hombre</label>\r\n                                </div>\r\n                                <div className=\"form-check\">\r\n                                    <input type=\"radio\" className=\"form-check-input\" checked={this.state.genero === 'femenino'} name=\"femenino\" value=\"femenino\" onChange={this.onGeneroChange} />\r\n                                    <label className=\"form-check-label\" htmlFor=\"femenino\">Mujer</label>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"edad text-left m-2\">\r\n                                <label htmlFor=\"edad\" >Edad: </label>\r\n                                <div className=\"form-check\">\r\n                                    <input type=\"radio\" checked={this.state.edad === 'adulto'} className=\"form-check-input\" name=\"adulto\" value=\"adulto\" onChange={this.onEdadChange} />\r\n                                    <label className=\"form-check-label\" htmlFor=\"adulto\">Adulto</label>\r\n                                </div>\r\n                                <div className=\"form-check\">\r\n                                    <input type=\"radio\" checked={this.state.edad === 'infantil'} className=\"form-check-input\" name=\"infantil\" value=\"infantil\" onChange={this.onEdadChange} />\r\n                                    <label className=\"form-check-label\" htmlFor=\"infantil\">Infantil</label>\r\n\r\n                                </div>\r\n                            </div>\r\n                            {this.loadedCarrito===true &&\r\n                        <div id=\"carrito-button\" className=\"col-12 align-content-center align-items-center align-self-center justify-content-center m-2 p-3 wow fadeIn\">\r\n                            <Link to={{ pathname: \"/carrito\", state: { userId: this.userId, carrito: this.state.carrito } }} className=\"ircarrito btn btn-primary text-center\" >\r\n                                \r\n                                    <div className=\"numeroitems d-inline pr-2 pl-2 m-3 d-flex align-items-center justify-content-center align-self-center\"><span className=\"m-2\">{this.state.carrito.length} </span><img className=\"m-2\" src={\"../\" + carrito} alt=\"icono-carrito\" /></div>\r\n                                    <p className=\"mb-2\">Ver Carrito</p>\r\n                        </Link>\r\n\r\n                        </div>\r\n                        }\r\n                        </div>\r\n                        \r\n                        <div id=\"productos\" className=\"col-md-8 col-12 justify-content-md-start justify-content-center wow slideInRight\" data-wow-duration=\"1s\" data-wow-delay=\"0.3s\">\r\n                            {listProducts}\r\n                        </div>\r\n\r\n\r\n                        {this.productaux.length === 1 &&\r\n                            <Modal show={this.state.show} onHide={this.cerradoEvento} size=\"lg\"\r\n                                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                                centered className=\"wow fadeIn\">\r\n                                <Modal.Header closeButton>\r\n                                    <Modal.Title className=\"text-center\">\r\n                                        <img className=\"img-item\" src={this.productaux[0].product.imagen} alt=\"iamgen-item\" />\r\n                                        <h4>{this.productaux[0].product.nombre}</h4>\r\n                                        <p><small>Id referencia: {this.productaux[0].productId}</small></p>\r\n                                        <p className=\"card-text h5\">{this.productaux[0].product.precio} €</p><br />\r\n                                    </Modal.Title>\r\n                                </Modal.Header>\r\n                                <Modal.Body>\r\n                                    <div className=\"infocitacontacto pl-3\">\r\n                                        <p className=\"m-1 h5 \">Descripcion del producto:</p>\r\n                                        <p className=\"m-1 \">{this.productaux[0].product.descripcion}</p>\r\n\r\n                                    </div>\r\n                                    <div className=\"infoactualizarcita mt-3\">\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col d-flex justify-content-between  mt-2 mb-2\">\r\n                                                <button className=\"btn btn-primary m-auto\" onClick={() => this.agregarItem(this.productaux[0].productId)} >Agregar al carrito</button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </Modal.Body>\r\n                                <Modal.Footer>\r\n                                    <Button variant=\"secondary\" onClick={this.cerradoEvento}>\r\n                                        Cerrar\r\n            </Button>\r\n                                </Modal.Footer>\r\n                            </Modal>\r\n\r\n                        }\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n     }\r\n\r\n      }  \r\n}\r\n\r\nexport default Tienda;","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport swal from 'sweetalert';\r\n\r\nimport WOW from 'wowjs'\r\n\r\nclass Citas extends Component {\r\n    nombreRef = React.createRef();\r\n    apellidosRef = React.createRef();\r\n    emailRef = React.createRef();\r\n    telefonoRef = React.createRef();\r\n\r\n    url = Global.url;\r\n\r\n    state = {  \r\n        cita:{\r\n            nombre:null,\r\n            apellidos:null,\r\n            email:null,\r\n            telefono:null\r\n        },\r\n        status:null\r\n    }\r\n\r\n    componentDidMount(){\r\n        new WOW.WOW({\r\n            live: false\r\n        }).init();\r\n    }\r\n\r\n\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            locale: 'es',\r\n            validators: {\r\n                names_surnames: {\r\n                    message: 'El campo debe contener letras y espacios',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+(\\s*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]*)*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+$/) && params.indexOf(val) === -1\r\n                    },\r\n                    \r\n                },\r\n                email2:{\r\n                    message: 'El email no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^(?:[^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*|\"[^\\n\"]+\")@(?:[^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\]\\.,;:\\s@\"]{2,63}$/i) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                telefono:{\r\n                    message: 'El telefono no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^[896]\\d{8}$/) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                dni:{\r\n                    message: 'El DNI no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^\\d{8}[a-zA-Z]$/) && params.indexOf(val) === -1\r\n                    },\r\n                }\r\n            },\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n                alpha_space: 'Solo se permiten letras y espacios'\r\n\r\n            },\r\n        });\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            cita: {\r\n                nombre: this.nombreRef.current.value,\r\n                apellidos: this.apellidosRef.current.value,\r\n                email: this.emailRef.current.value,\r\n                telefono: this.telefonoRef.current.value,\r\n            }\r\n        });\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState();\r\n\r\n        if (this.validator.allValid()) {\r\n            let cita = this.state.cita;\r\n            axios.post(this.url + 'cita', cita).then((response) => {\r\n                if (response.data.status === 'success') {\r\n                    this.setState({\r\n                        status: 'success'\r\n                    });\r\n                    swal(\r\n                        'Cita enviada',\r\n                        'Contactaremos contigo por email',\r\n                        'success'\r\n                    );\r\n\r\n                    axios.post(this.url + 'email/cita');\r\n                } else {\r\n                    this.setState({\r\n                        status: 'failed'\r\n                    });\r\n                    swal(\r\n                        'Cita no enviada',\r\n                        'Se ha producido un error',\r\n                        'error'\r\n                    );\r\n                }\r\n            });\r\n        } else {\r\n            this.validator.showMessages();\r\n            this.forceUpdate();\r\n            this.setState({\r\n                status: 'failed'\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    render() { \r\n        return ( \r\n        <div id=\"citas\" className=\" col-12\">\r\n        <h2 className=\"text-center p-3 text-md-left wow fadeInRight\">\r\n            Pedir Cita\r\n        </h2>\r\n        <hr />\r\n\r\n        <form className=\"col-md-5 wow fadeInUp\" data-wow-duration=\"1s\" data-wow-delay=\"0.3s\" onSubmit={this.recibirFormulario} >\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"nombre\" className=\"ml-2\">Nombre</label>\r\n                <input id=\"nombre\" className=\"form-control mr-2 ml-2\" type=\"text\" name=\"nombre\" ref={this.nombreRef} onChange={this.changeState} required />\r\n                {this.validator.message('nombre', this.state.cita.nombre, 'required|names_surnames')}\r\n            </div>\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"apellidos\" className=\"ml-2\">Apellidos</label>\r\n                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"apellidos\" ref={this.apellidosRef} onChange={this.changeState} required />\r\n                {this.validator.message('apellidos', this.state.cita.apellidos, 'required|names_surnames')}\r\n            </div>\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"telefono\" className=\"ml-2\">Telefono</label>\r\n                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"telefono\" ref={this.telefonoRef} onChange={this.changeState} maxLength=\"9\" required />\r\n                {this.validator.message('telefono', this.state.cita.telefono, 'required|telefono')}\r\n            </div>\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"email\" className=\"ml-2\">Email</label>\r\n                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"email\" ref={this.emailRef} onChange={this.changeState} required />\r\n                {this.validator.message('email', this.state.cita.email, 'required|email2')}\r\n            </div>\r\n            <div className=\"clearfix\"></div>\r\n            {this.state.status=== 'success'\r\n                ?<input type=\"submit\" value=\"Pedir cita\" className=\"btn btn-success\" disabled />\r\n                :<input type=\"submit\" value=\"Pedir cita\" className=\"btn btn-success\" />\r\n            \r\n            }\r\n            \r\n        </form>\r\n    </div> );\r\n    }\r\n}\r\n \r\nexport default Citas;","import React, { Component } from 'react';\r\nimport gafas from '../assets/images/gafas.svg';\r\nimport graduacion from '../assets/images/graduacion.svg';\r\nimport online from '../assets/images/online.svg';\r\nimport envio from '../assets/images/envio.svg';\r\n\r\n\r\nimport WOW from 'wowjs'\r\n\r\nclass Servicios extends Component {\r\n\r\n    componentDidMount(){\r\n        new WOW.WOW({\r\n            live: false\r\n        }).init();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"servicios\">\r\n                <h2 className=\"text-center p-3 text-md-left m-3 wow fadeInRight\">\r\n                    Nuestros servicios\r\n                </h2>\r\n                <hr />\r\n                <div className=\"container wow rotateInUpRight\" data-wow-duration=\"1s\" data-wow-delay=\"0.3s\">\r\n                    <div className=\"row\">\r\n\r\n                        <div class=\"col-12 col-md-6 col-lg-3 mt-2 mb-2\">\r\n                            <article class=\"item-servicios\">\r\n                                <img src={gafas} className=\"icono\"  alt=\"item-servicio\" />\r\n                                <h3>Miles de productos</h3>\r\n                                <p>En Tope Vision podrás elegir entre las muchísimas referencias de nuestro amplio catálogo. Gafas, gafas de sol, gafas de sol deportivas, lentes de contacto, líquidos limpiadores y desinfectantes para lentes de contacto, etc...</p>\r\n                            </article>\r\n                        </div>\r\n                        <div class=\"col-12 col-md-6 col-lg-3 mt-2 mb-2\">\r\n                            <article class=\"item-servicios\">\r\n                                <img src={graduacion} className=\"icono\"  alt=\"item-servicio\" />\r\n                                <h3>Graduación de su vista</h3>\r\n                                <p>En Tope Visión, disponemos de la más vanguardista tecnología para una correcta graduación de su vista. El equipo humano de Tope Visión, con una gran formación, le realizará una graduación que le solucionará sus problemas de visión.</p>\r\n                            </article>\r\n                        </div>\r\n                        <div class=\"col-12 col-md-6 col-lg-3 mt-2 mb-2\">\r\n                            <article class=\"item-servicios\">\r\n                                <img src={online} className=\"icono\"  alt=\"item-servicio\" />\r\n                                <h3>Venta online</h3>\r\n                                <p>Podrás comprar cómodamente desde casa, cualquier producto que necesites, y recibirlo rápidamente en tu domicilio con unas condiciones mas que ventajosas.</p>\r\n                            </article>\r\n                        </div>\r\n                        <div class=\"col-12 col-md-6 col-lg-3 mt-2 mb-2\">\r\n                            <article class=\"item-servicios\">\r\n                                <img src={envio} className=\"icono\" alt=\"item-servicio\" />\r\n                                <h3>Pedidos a domicilio</h3>\r\n                                <p>Recibirás tu compra on-line en tu domicilio gratis. Así de cómodo y sencillo.</p>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n            </div>\r\n\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default Servicios;","import React from 'react';\r\n\r\nconst Error= ()=>{\r\n    return(\r\n        <section id=\"content\"  className=\"mt-5\">\r\n          <h2 className=\"subheader\">Pagina no encontrada</h2>\r\n          <p>La pagina no existe en la web</p>\r\n          </section>\r\n    );\r\n}\r\n\r\nexport default Error;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport swal from 'sweetalert';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport moment from 'moment'\r\nimport {storage} from '../db';\r\n\r\nclass PerfilUsuario extends Component {\r\n    url = Global.url\r\n    userId = null;\r\n    admin = null;\r\n    listHistorial = null;\r\n    nombreRef = React.createRef();\r\n    apellidosRef = React.createRef();\r\n    dniRef = React.createRef();\r\n    telefonoRef = React.createRef();\r\n    textoHistorialRef = React.createRef();\r\n    fechaHistorialRef = React.createRef();\r\n\r\n    state = {\r\n        identity: true,\r\n        user: {},\r\n        status: null,\r\n        loading: true,\r\n        archivo: 'default',\r\n        loading_file: false,\r\n        eliminado:false,\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n        if (this.props.match.params.admin) {\r\n            this.admin = true\r\n\r\n        }\r\n        this.validator = new SimpleReactValidator({\r\n            locale: 'es',\r\n            validators: {\r\n                names_surnames: {\r\n                    message: 'El campo debe contener letras y espacios',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+(\\s*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]*)*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+$/) && params.indexOf(val) === -1\r\n                    },\r\n\r\n                },\r\n                email2: {\r\n                    message: 'El email no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^(?:[^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*|\"[^\\n\"]+\")@(?:[^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\]\\.,;:\\s@\"]{2,63}$/i) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                telefono: {\r\n                    message: 'El telefono no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^[896]\\d{8}$/) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                dni: {\r\n                    message: 'El DNI no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^\\d{8}[a-zA-Z]$/) && params.indexOf(val) === -1\r\n                    },\r\n                }\r\n            },\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n                alpha_space: 'Solo se permiten letras y espacios'\r\n\r\n            },\r\n        });\r\n\r\n        if (!auth.currentUser) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n            if (this.admin === true) {\r\n                this.userId = this.props.match.params.id\r\n                let email = auth.currentUser.email;\r\n                axios.get(this.url + 'user/' + email).then((response) => {\r\n                    if (response.data.status === 'success' && response.data.user.email === auth.currentUser.email) {\r\n                        this.getUser(this.userId);\r\n\r\n                    } else {\r\n                        this.setState({\r\n                            identity: false\r\n                        });\r\n                    }\r\n                })\r\n\r\n\r\n            } else {\r\n                this.userId = this.props.match.params.id\r\n\r\n                axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                    if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                        this.getUser(this.userId);\r\n\r\n                    } else {\r\n                        this.setState({\r\n                            identity: false\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user,\r\n                    historial: response.data.user.historial,\r\n                    loading: false\r\n                })\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            user: {\r\n                nombre: this.nombreRef.current.value,\r\n                apellidos: this.apellidosRef.current.value,\r\n                telefono: this.telefonoRef.current.value,\r\n                dni: this.dniRef.current.value,\r\n                historial: this.state.historial,\r\n                imagen:this.state.user.imagen\r\n            }\r\n        });\r\n    }\r\n\r\n    addHistorial = () => {\r\n        let historialaux = this.state.historial;\r\n\r\n        let add = { texto: this.textoHistorialRef.current.value, fecha: moment(this.fechaHistorialRef.current.value).format(\"DD/MM/YYYY\") }\r\n        historialaux.push(add)\r\n\r\n        this.textoHistorialRef.current.value = \"\"\r\n        this.setState({\r\n            historial: historialaux\r\n        })\r\n\r\n\r\n    }\r\n\r\n    recogerFoto = (event) => {\r\n        this.setState({\r\n            archivo: event.target.files[0]\r\n        })\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState();\r\n\r\n        if (this.validator.allValid()) {\r\n\r\n            if (this.state.archivo !== 'default') {\r\n                this.setState({\r\n                    loading_file: true\r\n                })\r\n                storage.ref(this.state.archivo.name).put(this.state.archivo).then(() => {\r\n                    storage.ref().child(this.state.archivo.name).getDownloadURL().then(\r\n                        url => {\r\n                            this.setState({\r\n                                loading_file: false\r\n                            })\r\n                            let user = this.state.user;\r\n                            axios.put(this.url + 'user', { user, userId: this.userId, url }).then((response) => {\r\n                                if (response.data.status === 'success') {\r\n                                    this.setState({\r\n                                        user: {\r\n                                            nombre: this.nombreRef.current.value,\r\n                                            apellidos: this.apellidosRef.current.value,\r\n                                            telefono: this.telefonoRef.current.value,\r\n                                            dni: this.dniRef.current.value,\r\n                                            historial: this.state.historial,\r\n                                            imagen:url\r\n                                        },\r\n                                        status: 'success'\r\n                                    });\r\n                                    swal(\r\n                                        'Usuario actualizado',\r\n                                        'Tu perfil se ha actualizado correctamente',\r\n                                        'success'\r\n                                    );\r\n                                } else {\r\n                                    this.setState({\r\n                                        status: 'failed'\r\n                                    });\r\n                                    swal(\r\n                                        'Usuario no actualizado',\r\n                                        'Tu perfil no se ha actualizado correctamente',\r\n                                        'error'\r\n                                    );\r\n                                }\r\n                            });\r\n                        });\r\n                });\r\n            } else {\r\n                let user = this.state.user;\r\n                axios.put(this.url + 'user', { user, userId: this.userId, url:this.state.user.imagen }).then((response) => {\r\n                    if (response.data.status === 'success') {\r\n                        this.setState({\r\n                            user: {\r\n                                nombre: this.nombreRef.current.value,\r\n                                apellidos: this.apellidosRef.current.value,\r\n                                telefono: this.telefonoRef.current.value,\r\n                                dni: this.dniRef.current.value,\r\n                                historial: this.state.historial,\r\n                                imagen:this.state.user.imagen\r\n                            },\r\n                            status: 'success'\r\n                        });\r\n                        swal(\r\n                            'Usuario actualizado',\r\n                            'Tu perfil se ha actualizado correctamente',\r\n                            'success'\r\n                        );\r\n                    } else {\r\n                        this.setState({\r\n                            status: 'failed'\r\n                        });\r\n                        swal(\r\n                            'Usuario no actualizado',\r\n                            'Tu perfil no se ha actualizado correctamente',\r\n                            'error'\r\n                        );\r\n                    }\r\n                });\r\n            }\r\n\r\n        } else {\r\n            this.validator.showMessages();\r\n            this.forceUpdate();\r\n            this.setState({\r\n                status: 'failed'\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    eliminarUsuario=()=>{\r\n        let id=this.userId\r\n        axios.delete(this.url +'user/'+id).then((response) => {\r\n            if(response.data.status === 'success') {\r\n                swal(\r\n                    'Usuario eliminado',\r\n                    'El usuario ha sido eliminado correctamente',\r\n                    'success'\r\n                );\r\n\r\n            }else{\r\n                swal(\r\n                    'Usuario no eliminado',\r\n                    'Se ha producido un error al eliminar usuario',\r\n                    'error'\r\n                );\r\n            }\r\n        }); \r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        if (this.state.loading === false) {\r\n            return (\r\n\r\n                <div id=\"info\" className=\"col-lg-12 mt-3\">\r\n                    {this.state.identity === true\r\n                        ? <React.Fragment>\r\n                            {this.admin === true\r\n                                ? <React.Fragment>\r\n                                    <h2>\r\n                                        Perfil de: {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                                    </h2><small>{this.state.user.email}</small>\r\n                                </React.Fragment>\r\n                                : <h2>\r\n                                    Mi perfil   -   {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                                </h2>\r\n                            }\r\n                            <hr />\r\n                            <div className=\"row\">\r\n\r\n                                <img className=\"user-image\" src={this.state.user.imagen} alt=\"user\" />\r\n\r\n\r\n\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <form className=\"col-md-5 ml-4 pl-0\" onSubmit={this.recibirFormulario} >\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"nombre\" className=\"ml-2\">Nombre</label>\r\n                                        <input id=\"nombre\" className=\"form-control\" type=\"text\" value={this.state.user.nombre} name=\"nombre\" ref={this.nombreRef} onChange={this.changeState} required />\r\n                                        {this.validator.message('nombre', this.state.user.nombre, 'required|names_surnames')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"apellidos\" className=\"ml-2\">Apellidos</label>\r\n                                        <input className=\"form-control\" type=\"text\" name=\"apellidos\" value={this.state.user.apellidos} ref={this.apellidosRef} onChange={this.changeState} required />\r\n                                        {this.validator.message('apellidos', this.state.user.apellidos, 'required|names_surnames')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"telefono\" className=\"ml-2\">Telefono</label>\r\n                                        <input className=\"form-control\" type=\"text\" name=\"telefono\" value={this.state.user.telefono} ref={this.telefonoRef} onChange={this.changeState} maxLength=\"9\" required />\r\n                                        {this.validator.message('telefono', this.state.user.telefono, 'required|telefono')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"dni\" className=\"ml-2\">DNI</label>\r\n                                        <input className=\"form-control\" type=\"text\" name=\"dni\" value={this.state.user.dni} ref={this.dniRef} onChange={this.changeState} required />\r\n                                        {this.validator.message('dni', this.state.user.dni, 'required|dni')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"image\" className=\"ml-2\">Avatar</label>\r\n                                        <input className=\"form-control-file mr-2 ml-2\" type=\"file\" name=\"imagen\" onChange={(e) => this.recogerFoto(e)} />\r\n                                        {this.state.loading_file === true &&\r\n                                            <small>Cargando imagen...</small>\r\n                                        }\r\n                                    </div>\r\n\r\n                                    <div className=\"clearfix\"></div>\r\n                                    <input type=\"submit\" value=\"Actualizar datos\" className=\"btn btn-success\" />\r\n                                </form>\r\n\r\n\r\n                                {this.admin === true &&\r\n                                    <React.Fragment>\r\n                                        <div className=\"col-md-6 ml-5\">\r\n                                            <div className=\"row\">\r\n                                                <div className=\"col-12\">\r\n                                                    <label htmlFor=\"textoHistorial\">Agregar al historial</label>\r\n                                                    <input className=\"form-control mt-1 mb-1\" type=\"text\" name=\"textoHistorial\" ref={this.textoHistorialRef} required />\r\n                                                    <input className=\"form-control mt-1 mb-1\" type=\"date\" name=\"fechaHistorial\" ref={this.fechaHistorialRef} required />\r\n                                                    <input className=\"btn btn-success mt-1 mb-1\" type=\"button\" value=\"Añadir\" onClick={this.addHistorial} />\r\n                                                </div>\r\n\r\n\r\n                                                <div className=\"historial col-12 mt-4\">\r\n                                                    <ul className=\"list-group\">\r\n                                                        {this.state.historial !== undefined && this.state.historial.length !== null && this.state.historial.length >= 1\r\n\r\n                                                            ? this.listHistorial = this.state.historial.map((data, i) => {\r\n                                                                return (\r\n                                                                    <li className=\"list-group-item\" key={i} >\r\n                                                                        <p>{data.texto + ' - ' + data.fecha}</p>\r\n                                                                    </li>\r\n                                                                );\r\n                                                            })\r\n                                                            : <li className=\"list-group-item error\"><h3>No hay ningun historial</h3></li>\r\n\r\n                                                        }\r\n                                                    </ul>\r\n                                                </div>\r\n\r\n                                                <button className=\"btn btn-danger\" style={{margin: \"2rem auto\"}} onClick={this.eliminarUsuario} >Eliminar usuario</button>\r\n                                            </div>\r\n\r\n                                        </div>\r\n                                    </React.Fragment>\r\n                                }\r\n\r\n                            </div>\r\n                        </React.Fragment>\r\n                        : <React.Fragment>\r\n                            {this.admin === true\r\n                                ? <div id=\"info\">\r\n                                    <h1 className=\"mt-5\">Problema con carga de Usuario</h1>\r\n                                </div>\r\n                                : <Redirect to=\"/login\" />\r\n                            }\r\n                        </React.Fragment>\r\n                    }\r\n\r\n\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div id=\"info\">\r\n                    <h1 className=\"mt-5 cargando\">Cargando...</h1>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PerfilUsuario;","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport Global from \"../../Global\"\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nclass UsuariosAdmin extends Component {\r\n    url = Global.url\r\n    state = {\r\n        users:{},\r\n        message: null,\r\n        status: null\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n        axios.get(this.url + 'users').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    users: response.data.users,\r\n                    status: 'success'\r\n                });\r\n\r\n\r\n\r\n            } else {\r\n                this.setState({\r\n                    status: 'error',\r\n                    message: response.data.message\r\n                });\r\n                \r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.users.length >= 1) {\r\n            var listUsers = this.state.users.map((data, i) => {\r\n\r\n                return (\r\n\r\n                    <div key={i} id={data.userId} className=\"card\" >\r\n                        <img className=\"card-img-top\" src={data.user.imagen} alt=\"Cardcap\" />\r\n                        <div className=\"card-body\">\r\n                            <h5 className=\"card-title \">{data.user.nombre + ' ' + data.user.apellidos}</h5>\r\n                            <small className=\"card-text\">{data.user.email}</small><br />\r\n                        </div>\r\n                        <div className=\"card-footer\">\r\n                            <Link to={\"/adminperfil/requestuser/\" + data.userId} className=\"btn btn-primary\">Ver Perfil</Link>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })\r\n\r\n            return (\r\n                <div id=\"clientes\" className=\"row\">\r\n                    {listUsers}\r\n                </div>\r\n            );\r\n        } else if (this.state.users.length === undefined && this.state.status === 'error') {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5 error\">No hay clientes para mostrar</h1>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5 cargando\">Cargando...</h1>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default UsuariosAdmin;","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport Global from \"../../Global\"\r\nimport swal from 'sweetalert';\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\n\r\nclass PedidosAdmin extends Component {\r\n    url = Global.url;\r\n    pedidoaux = []\r\n\r\n    state = {\r\n        pedidos: [],\r\n        status: null,\r\n    }\r\n\r\n\r\n    componentWillMount() {\r\n        axios.get(this.url + 'pendingpedidos').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    pedidos: response.data.pedidos,\r\n                    status: 'success'\r\n                });\r\n\r\n\r\n            } else {\r\n                this.setState({\r\n                    status: 'error'\r\n                });\r\n\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    pulsadoEvento = (id) => {\r\n        this.state.pedidos.forEach((element, i) => {\r\n            if (id === element.pedidoId) {\r\n                this.pedidoaux.push(element)\r\n                this.setState({\r\n                    show: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    cerradoEvento = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n        this.pedidoaux = [];\r\n    }\r\n\r\n\r\n\r\n\r\n    updatePedido(id, i, estado) {\r\n        let state = estado\r\n        let pedido = this.state.pedidos[i].pedido;\r\n\r\n        axios.put(this.url + 'pedido', { state, id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                let pedidosaux = this.state.pedidos;\r\n                if (state === 'terminado' || state === 'rechazado') { //confirmado, enviado, terminado, rechazado\r\n                    pedidosaux.splice(i, 1);\r\n                    this.setState({\r\n                        pedidos: pedidosaux,\r\n                        status: 'success'\r\n                    });\r\n                }else{\r\n                    pedidosaux[i].pedido.estado = state\r\n                    this.setState({\r\n                        pedidos: pedidosaux,\r\n                        status: 'success'\r\n                    });\r\n                }\r\n\r\n               \r\n\r\n                swal(\r\n                    'Pedido actualizado correctamente',\r\n                    'Se enviara un email al usuario con nuevos datos de su pedido',\r\n                    'success'\r\n                );\r\n                this.forceUpdate();\r\n\r\n\r\n                if (state === 'rechazado' || state === 'confirmado' || state === 'enviado') {\r\n                    axios.post(this.url + 'email/adminpedido', { pedido, state });\r\n                }\r\n\r\n            } else {\r\n                swal(\r\n                    'Pedido no se ha actualizado correctamente',\r\n                    'Pedido no actualizado',\r\n                    'error'\r\n                );\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        if (this.state.pedidos.length >= 1) {\r\n            var listPedidos = this.state.pedidos.map((data, i) => {\r\n                return (\r\n                    <li className=\"list-group-item \" key={i} >\r\n                        <div className=\"row\">\r\n                            <div className=\"col-3 m-1 pedido-list-item\" onClick={() => this.pulsadoEvento(data.pedidoId)}>\r\n                                <h5>{data.pedido.detalles.nombre + ' ' + data.pedido.detalles.apellidos}</h5>\r\n                                <p>{data.pedido.detalles.email}</p>\r\n                            </div>\r\n                            <div className=\"col-md-3 col-9 pedido-list-item\" onClick={() => this.pulsadoEvento(data.pedidoId)}>\r\n                                <div className=\"row  \">\r\n                                    <div className=\"col-5 m-1\">\r\n                                        <p className=\"font-weight-bold\">Fecha: </p>\r\n                                        <p>{data.pedido.fecha}</p>\r\n                                    </div>\r\n                                    <div className=\"col-5 m-1\">\r\n                                        <p className=\"font-weight-bold\">Estado:</p>\r\n                                        <p>{data.pedido.estado}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"col-md-5 col-12 m-1\">\r\n                                <button className=\"btn btn-success m-1\" onClick={() => this.updatePedido(data.pedidoId, i, 'confirmado')}>Confirmar</button>\r\n                                <button className=\"btn btn-primary m-1\" onClick={() => this.updatePedido(data.pedidoId, i, 'enviado')}>Enviado</button>\r\n                                <button className=\"btn btn-secondary m-1\" onClick={() => this.updatePedido(data.pedidoId, i, 'terminado')}>Terminado</button>\r\n                                <button className=\"btn btn-danger m-1\" onClick={() => this.updatePedido(data.pedidoId, i, 'rechazado')}>Rechazar</button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </li>\r\n\r\n                )\r\n            })\r\n\r\n            return (\r\n                <div id=\"clientes \" className=\"text-center\">\r\n                    <ul className=\"list-group\">\r\n                        {listPedidos}\r\n                    </ul>\r\n                    {/* MODAL DE DETALLE DE PRODUCTO */}\r\n                    {this.pedidoaux.length === 1 &&\r\n                        <Modal show={this.state.show} onHide={this.cerradoEvento} size=\"lg\"\r\n                            aria-labelledby=\"contained-modal-title-vcenter\"\r\n                            centered>\r\n                            <Modal.Header closeButton>\r\n                                <Modal.Title className=\"text-center\">\r\n                                    <h4>ID: {this.pedidoaux[0].pedidoId}</h4>\r\n                                    <p><strong>Fecha: </strong>{this.pedidoaux[0].pedido.fecha}</p>\r\n                                    <p><strong>Direccion de envio: </strong>{this.pedidoaux[0].pedido.detalles.direccion + ', ' + this.pedidoaux[0].pedido.detalles.municipio + ', ' + this.pedidoaux[0].pedido.detalles.provincia + ' - ' + this.pedidoaux[0].pedido.detalles.cp}</p>\r\n                                </Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body>\r\n                                <div className=\"infocitacontacto pl-3\">\r\n                                    <h6 className=\"m-1 \">Telefono: {this.pedidoaux[0].pedido.detalles.telefono}</h6>\r\n                                    <h6 className=\"m-1 \">Email: {this.pedidoaux[0].pedido.detalles.email}</h6>\r\n                                    <h6 className=\"m-1\">ID usuario: {this.pedidoaux[0].pedido.id_usuario}</h6>\r\n                                </div>\r\n                                <div className=\"infocarrito pl-3\">\r\n                                    <ul>{\r\n                                        this.pedidoaux[0].pedido.productos.map((data, i) => {\r\n                                            return (\r\n                                                <li key={i} className=\"list-group-item m-2\">\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\" col-8 text-md-left text-center\" >\r\n                                                            <img src={data.imagen} className=\"imagencarrito\" alt=\"Cartimg\" />\r\n                                                            <p className=\"d-inline  m-3\">{data.nombre}</p>\r\n                                                        </div>\r\n                                                        <div className=\"col-4 align-self-center\">\r\n                                                            <div className=\"row justify-content-center\">\r\n                                                                <div className=\"col mt-2\">\r\n                                                                    <div className=\"row flex-nowrap align-items-center justify-content-center align-self-center\">\r\n                                                                        <div className=\"col text-center p-1\" >\r\n                                                                            <label className=\"text-center \">Cantidad: <strong>{data.cantidad}</strong></label>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </li>\r\n                                            );\r\n                                        })\r\n\r\n                                    }\r\n                                        <li className=\"list-group-item m-2 text-right\"><p className=\"h6 mr-3\">Total: {this.pedidoaux[0].pedido.precio_total} €</p></li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n\r\n                            </Modal.Body>\r\n                            <Modal.Footer>\r\n                                <Button variant=\"secondary\" onClick={this.cerradoEvento}>\r\n                                    Cerrar\r\n                        </Button>\r\n                            </Modal.Footer>\r\n                        </Modal>\r\n\r\n                    }\r\n\r\n                </div>\r\n            );\r\n        } else if (this.state.pedidos.length === undefined || this.state.status === 'error') {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5 error\">No hay pedidos para mostrar</h1>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5 cargando\">Cargando...</h1>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PedidosAdmin;","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport Global from \"../../Global\"\r\nimport swal from 'sweetalert';\r\nimport moment from 'moment'\r\n\r\n\r\nclass CitasAdmin extends Component {\r\n    url = Global.url\r\n\r\n    state = {\r\n        citas: [],\r\n        status: null,\r\n    }\r\n\r\n    componentWillMount() {\r\n        axios.get(this.url + 'pendingcitas').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    citas: response.data.citas,\r\n                    status: 'success'\r\n                });\r\n\r\n\r\n            } else {\r\n                this.setState({\r\n                    status: 'error'\r\n                });\r\n\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n   updateCita(event, id, i){\r\n        event.preventDefault(); \r\n\r\n        let fecha=moment(event.target[0].value).format(\"DD/MM/YYYY\")\r\n        let hora=event.target[1].value \r\n        let cita= this.state.citas[i].cita;\r\n        cita.hora=hora;\r\n        cita.fecha=fecha;\r\n        cita.estado='actualizado';\r\n\r\n        axios.put(this.url + 'cita', {cita, id}).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                let citasaux=this.state.citas; \r\n                citasaux.splice(i,1);\r\n                this.setState({\r\n                    citas: citasaux, \r\n                    status: 'success'\r\n                });\r\n                swal(\r\n                    'Cita guardada correctamente',\r\n                    'Cita se ha guardado en tu calendario correctamente', \r\n                    'success'\r\n                );\r\n                this.forceUpdate();\r\n\r\n                axios.post(this.url+'email/confirmacita', {cita});\r\n\r\n            }else{\r\n                swal(\r\n                    'Cita no se ha guardado correctamente',\r\n                    'Cita no se ha guardado en tu calendario',\r\n                    'error'\r\n                );\r\n            } \r\n        }); \r\n    }\r\n\r\n    render() {\r\n        if (this.state.citas.length >= 1) {\r\n            var listCitas = this.state.citas.map((data, i) => {\r\n                return (\r\n                    <li className=\"list-group-item\" key={i}>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-4\">\r\n                                <h5>{data.cita.user.nombre + ' ' + data.cita.user.apellidos}</h5>\r\n                                <p>{data.cita.user.email}</p>\r\n                            </div>\r\n                            <div className=\"col-md-8 col-12\">\r\n                        <form  onSubmit={(e)=>this.updateCita(e, data.citaId, i)}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col\">\r\n                            <input className=\"form-control m-1\" type=\"date\" name=\"fechaCita\"  required/>\r\n                            </div>\r\n                            <div className=\"col\">\r\n                            <input className=\"form-control m-1 \" type=\"time\" name=\"horaCita\"  min=\"09:00\" max=\"20:00\" required  />\r\n                            </div>\r\n                            <div className=\"col\">\r\n                            <input className=\"btn btn-success mr-4 ml-4\" type=\"submit\"  value=\"Aceptar\"/>\r\n                            </div>\r\n                            </div>\r\n                        </form>\r\n                        </div>\r\n                        </div>\r\n                    </li>\r\n\r\n                )\r\n            })\r\n\r\n            return (\r\n                <ul className=\"list-group\">\r\n                    {listCitas}\r\n                </ul>\r\n            );\r\n        } else if (this.state.citas.length === undefined || this.state.status === 'error') {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5 error\">No hay citas para mostrar</h1>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5 cargando\">Cargando...</h1>\r\n                </div>\r\n            );\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default CitasAdmin;","import React, { Component } from 'react';\r\nimport moment from 'moment';\r\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\nimport axios from \"axios\";\r\nimport Global from \"../../Global\"\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport swal from 'sweetalert';\r\n\r\n\r\nconst localizer = momentLocalizer(moment)\r\n\r\nclass Calendario extends Component {\r\n    eventsList = []\r\n    url = Global.url\r\n    citaaux = []\r\n    state = {\r\n        citas: [],\r\n        message: null,\r\n        status: null,\r\n        show: false,\r\n    }\r\n\r\n    componentWillMount() {\r\n        axios.get(this.url + 'updatedcitas').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    citas: response.data.citas,\r\n                    status: 'success'\r\n                });\r\n\r\n                this.actualizadorCitas();\r\n\r\n                this.forceUpdate();\r\n\r\n            } else {\r\n                this.setState({\r\n                    status: 'error',\r\n                    message: response.data.message\r\n                });\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    actualizadorCitas = () => {\r\n        this.eventsList = [];\r\n        this.state.citas.forEach((element, i) => {\r\n            let fecha2_split = element.cita.fecha.split(\"/\");\r\n            let hora2_split = element.cita.hora.split(\":\");\r\n            this.eventsList.push(\r\n                {\r\n                    title: element.cita.user.nombre + \" \" + element.cita.user.apellidos,\r\n                    start: new Date(parseInt(fecha2_split[2]), parseInt(fecha2_split[1]) - 1, parseInt(fecha2_split[0]), parseInt(hora2_split[0]), parseInt(hora2_split[1]), 0),\r\n                    end: new Date(parseInt(fecha2_split[2]), parseInt(fecha2_split[1]) - 1, parseInt(fecha2_split[0]), parseInt(hora2_split[0]) + 1, parseInt(hora2_split[1]), 0),\r\n                    id: element.citaId\r\n                }\r\n            );\r\n            this.forceUpdate();\r\n        });\r\n    }\r\n\r\n\r\n    pulsadoEvento = (event) => {\r\n        this.state.citas.forEach((element, i) => {\r\n            if (event.id === element.citaId) {\r\n                this.citaaux.push(element)\r\n                this.setState({\r\n                    show: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    cerradoEvento = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n        this.citaaux = [];\r\n    }\r\n\r\n    \r\n    updateCita(event, id) {\r\n        event.preventDefault();\r\n\r\n        let fecha = moment(event.target[0].value).format(\"DD/MM/YYYY\")\r\n        let hora = event.target[1].value\r\n        let cita = this.citaaux[0].cita;\r\n        cita.hora = hora;\r\n        cita.fecha = fecha;\r\n        cita.estado = 'actualizado';\r\n\r\n        axios.put(this.url + 'cita', { cita, id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.actualizadorCitas();\r\n                this.cerradoEvento();\r\n                swal(\r\n                    'Cita guardada correctamente',\r\n                    'Cita se ha guardado en tu calendario correctamente',\r\n                    'success'\r\n                );\r\n                this.forceUpdate();\r\n                axios.post(this.url + 'email/cambiocita', { cita });\r\n\r\n            } else {\r\n                swal(\r\n                    'Cita no se ha guardado correctamente',\r\n                    'Cita no se ha guardado en tu calendario',\r\n                    'error'\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    envioRecordatorio(citaaux) {\r\n        let cita = citaaux;\r\n        axios.post(this.url + 'email/recordatorio', { cita }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                swal(\r\n                    'Recordatorio de cita enviado',\r\n                    'Se ha enviado un correo de recordatorio al cliente',\r\n                    'success'\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"bigCalendar-container\">\r\n                    <Calendar\r\n                        localizer={localizer}\r\n                        events={this.eventsList}\r\n                        startAccessor=\"start\"\r\n                        endAccessor=\"end\"\r\n                        defaultView=\"week\"\r\n                        onSelectEvent={(e) => {\r\n                            this.pulsadoEvento(e)\r\n                        }}\r\n                        min={new Date(2008, 0, 1, 9, 0)}\r\n                        max={new Date(2008, 0, 1, 20, 0)}\r\n                        style={{ height: 500, margin: \"2rem\" }}\r\n                    />\r\n\r\n\r\n                </div>\r\n\r\n\r\n\r\n                        {/* MODAL DE DETALLE DE CITA */}\r\n                {this.citaaux.length === 1 &&\r\n                    <Modal show={this.state.show} onHide={this.cerradoEvento} size=\"lg\"\r\n                        aria-labelledby=\"contained-modal-title-vcenter\"\r\n                        centered>\r\n                        <Modal.Header closeButton>\r\n                            <Modal.Title className=\"text-center\">\r\n                                <h2>{this.citaaux[0].cita.fecha + \" - \" + this.citaaux[0].cita.hora}</h2>\r\n                                <h4>{this.citaaux[0].cita.user.nombre + \" \" + this.citaaux[0].cita.user.apellidos}</h4>\r\n                            </Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <div className=\"infocitacontacto pl-3\">\r\n                                <h6 className=\"m-1 \">Telefono: {this.citaaux[0].cita.user.telefono}</h6>\r\n                                <h6 className=\"m-1 \">Email: {this.citaaux[0].cita.user.email}</h6>\r\n                            </div>\r\n                            <div className=\"infoactualizarcita mt-3\">\r\n                                {/* INPUT DATE Y HORA Y BOTON PARA ACTUALIZAR  */}\r\n                                <form className=\"col-12\" onSubmit={(e) => this.updateCita(e, this.citaaux[0].citaId)}>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col\">\r\n                                            <input className=\"form-control m-1\" type=\"date\" name=\"fechaCita\" required />\r\n                                        </div>\r\n                                        <div className=\"col\">\r\n                                            <input className=\"form-control m-1 \" type=\"time\" name=\"horaCita\" min=\"09:00\" max=\"20:00\" required />\r\n                                        </div>\r\n                                        <div className=\"col\">\r\n                                            <input className=\"btn btn-success m-1\" type=\"submit\" value=\"Actualizar cita\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    </form>\r\n                                    {/* BOTON ENVIAR RECORDATORIO */}\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col d-flex justify-content-between  mt-2 mb-2\">\r\n                                            <button className=\"btn btn-primary m-auto\" onClick={() => this.envioRecordatorio(this.citaaux[0].cita)} >Enviar recordatorio</button>\r\n                                        </div>\r\n                                    </div>\r\n                                \r\n                            </div>\r\n                        </Modal.Body>\r\n                        <Modal.Footer>\r\n                            <Button variant=\"secondary\" onClick={this.cerradoEvento}>\r\n                                Cerrar\r\n                            </Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n\r\n                }\r\n\r\n\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Calendario;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport UsuariosAdmin from './panelAdmin/UsuariosAdmin';\r\nimport PedidosAdmin from './panelAdmin/PedidosAdmin';\r\nimport CitasAdmin from './panelAdmin/CitasAdmin';\r\nimport PerfilUsuario from './PerfilUsuario';\r\nimport Calendario from './panelAdmin/Calendario';\r\nimport { MDBNav, MDBNavItem, MDBNavLink } from \"mdbreact\";\r\n\r\nclass PerfilAdmin extends Component {\r\n    url = Global.url\r\n    userId = null;\r\n    state = {\r\n        identity: true,\r\n        user: {},\r\n        status: null,\r\n        loading:true\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (auth.currentUser === undefined) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n\r\n            this.userId = this.props.match.params.adminid\r\n\r\n            axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                    this.getUser(this.userId);\r\n\r\n                } else {\r\n                    this.setState({\r\n                        identity: false\r\n                    });\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user,\r\n                    loading:false\r\n                })\r\n\r\n                if (this.state.user.admin === false) {\r\n                    this.setState({\r\n                        identity: false\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        if(this.state.loading===false){\r\n        return (\r\n            <div id=\"admin\" className=\"col-lg-12 mt-3\">\r\n                {this.state.identity === true\r\n                    ? <React.Fragment>\r\n                        <h2>\r\n                            Bienvenido   -   {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                        </h2>\r\n                        <hr />\r\n                        <BrowserRouter>\r\n                            <div id=\"panel\">\r\n                                <Redirect exact from=\"/\" to={\"/adminperfil/\" + this.userId + \"/clientes\"} />\r\n\r\n\r\n                                <MDBNav className=\"nav-tabs mt-5\">\r\n                                    <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/clientes\"}>Clientes</MDBNavLink>\r\n                                    </MDBNavItem>\r\n                                    <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/citas\"}>Citas</MDBNavLink>\r\n                                    </MDBNavItem>\r\n                                    <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/calendario\"}>Calendario</MDBNavLink>\r\n                                    </MDBNavItem>\r\n                                    <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/pedidos\"}>Pedidos</MDBNavLink>\r\n                                    </MDBNavItem>\r\n                                </MDBNav>\r\n\r\n\r\n                                <Switch>\r\n\r\n                                    <Route path={\"/adminperfil/\" + this.userId + \"/clientes\"} >\r\n                                        <UsuariosAdmin />\r\n                                    </Route>\r\n                                    <Route path={\"/adminperfil/\" + this.userId + \"/citas\"} >\r\n                                        <CitasAdmin />\r\n                                    </Route>\r\n\r\n                                    <Route path={\"/adminperfil/\" + this.userId + \"/calendario\"} >\r\n                                        <Calendario />\r\n                                    </Route>\r\n                                    <Route path={\"/adminperfil/\" + this.userId + \"/pedidos\"} >\r\n                                        <PedidosAdmin />\r\n                                    </Route> \r\n                                    <Route exact path=\"/perfil/:id/:admin\" component={PerfilUsuario}/>\r\n                                    <Route path={\"/adminperfil/requestuser/:id\"}\r\n                                        render={\r\n                                            (props) => {\r\n                                                var userId = props.match.params.id;\r\n                                                var admin=true;\r\n                                                return (\r\n                                                    <Redirect to={'/perfil/' + userId + '/'+admin} />\r\n                                                )\r\n                                            }\r\n                                        }\r\n                                    />\r\n\r\n                                </Switch>\r\n\r\n                            </div>\r\n                        </BrowserRouter>\r\n\r\n\r\n                    </React.Fragment>\r\n                    : <React.Fragment>\r\n                        <Redirect to=\"/login\" />\r\n                    </React.Fragment>\r\n                }\r\n\r\n            </div>\r\n        );\r\n\r\n            }else{\r\n                return(\r\n                    <h1 className=\"mt-5 cargando\">Cargando....</h1>\r\n                );\r\n            }\r\n    }\r\n}\r\n\r\nexport default PerfilAdmin;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport swal from 'sweetalert';\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\nimport WOW from 'wowjs'\r\n\r\n\r\nclass Carrito extends Component {\r\n    url = Global.url\r\n    userId = null;\r\n    loading=true;\r\n\r\n    state = {\r\n        carrito: [],\r\n        identity: true,\r\n        user: {},\r\n\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n            new WOW.WOW({\r\n                live: false\r\n            }).init();\r\n        \r\n    \r\n        this.getCarrito();\r\n    }\r\n    componentWillMount() {\r\n        if (!auth.currentUser) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n            this.userId = this.props.location.state.userId\r\n            if (this.userId === \"null\") {\r\n                this.setState({\r\n                    identity: false\r\n                });\r\n            } else {\r\n                axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                    if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                        this.getUser(this.userId);\r\n                    } else {\r\n                        this.setState({\r\n                            identity: false\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    getCarrito=()=>{\r\n        axios.get(this.url + 'carrito').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    carrito: response.data.carrito,\r\n                })\r\n                this.loading=false;\r\n            } \r\n        });\r\n    }\r\n\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user\r\n                })\r\n                /* this.getCarrito(); */\r\n                \r\n            }\r\n        })\r\n    }\r\n\r\n    agregarItem = (id) => {\r\n        axios.post(this.url + 'carrito/agregar', { item_id: id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    carrito: response.data.carrito\r\n                })\r\n            } \r\n\r\n        });\r\n    }\r\n\r\n    reducirItem = (id) => {\r\n        axios.post(this.url + 'carrito/quitar', { item_id: id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    carrito: response.data.carrito\r\n                })\r\n            } \r\n\r\n        });\r\n    }\r\n\r\n    eliminarItem=(id)=>{\r\n        axios.post(this.url + 'carrito/eliminar', { item_id: id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    carrito: response.data.carrito\r\n                })\r\n                swal(\r\n                    'Producto eliminado correctamente',\r\n                    'El producto se ha eliminado del carrito correctamente',\r\n                    'success'\r\n                );\r\n\r\n            } else {\r\n                swal(\r\n                    'El producto no se ha eliminado correctamente',\r\n                    'Ha ocurrido un error al eliminar el producto del carrito, intentelo mas tarde',\r\n                    'error'\r\n                );\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    procesarCompra=()=>{\r\n\r\n    }\r\n\r\n    \r\n    render() {\r\n\r\n        var carrito;\r\n        if (this.state.carrito.length >= 1) {\r\n            carrito = this.state.carrito.map((data, i) => {\r\n                return (\r\n\r\n                    <li key={i} className=\"list-group-item m-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-2 col-12 text-lg-left text-center\" >\r\n                                <img src={data.imagen} className=\"imagencarrito\" alt=\"Cartimg\" />\r\n                            </div>\r\n                            <div className=\"col-lg-2 col-12 text-lg-left text-center\" >\r\n                                \r\n                                <p className=\" m-3\">{data.nombre}</p>\r\n                            </div>\r\n                            <div className=\"col-lg-8 col-12 align-self-center\">\r\n                                <div className=\"row justify-content-center\">\r\n                                    <div className=\"col mt-2\">\r\n                                        <div className=\"row flex-nowrap align-items-center justify-content-center align-self-center\">\r\n                                            <div className=\"col\">\r\n                                                <button className=\"btn btn-danger m-1\" onClick={() => this.reducirItem(data.id)}>-</button>\r\n                                            </div>\r\n                                            <div className=\"col text-center p-1\"  style={{backgroundColor:'#A4AAA5', border:'1px solid black', borderRadius:'4px',color:'white'}}>\r\n                                                    <label className=\"text-center \"> {data.cantidad}</label>\r\n                                            </div>\r\n                                            <div className=\"col\">\r\n                                                <button className=\"btn btn-success m-1\" onClick={() => this.agregarItem(data.id)}>+</button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-xs-12 col-lg-2 mt-2 pl-3 pr-3\">\r\n                                            <label className=\"text-center \">Total: <br/><strong>{data.precio_total} €</strong></label>\r\n                                    </div>\r\n                                    <div className=\"col mt-2\">\r\n                                        <button className=\"btn btn-danger mr-4 ml-4\" onClick={() => this.eliminarItem(data.id)}>Eliminar</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                );\r\n            });\r\n        } else if (this.state.carrito.length===0 && this.loading===false) {\r\n            carrito = <h1 className=\"mt-5 text-center error\">No hay productos en el carrito</h1>\r\n        } else {\r\n            carrito =\r\n                <h1 className=\"mt-5 text-center cargando\">Cargando...</h1>\r\n        }\r\n\r\n        if (this.state.identity === false) {\r\n            return (\r\n                <Redirect to=\"/login\" />\r\n            )\r\n        } else {\r\n            return (\r\n                <div id=\"carrito\" className=\"container mt-4\">\r\n                    <div className=\"row \">\r\n                        <div className=\"col-12 text-left m-4 wow fadeInRight\">\r\n                        <h2>Carrito</h2>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                    <div id=\"carrito-list\" className=\"col-lg-8 col-12 m-2 wow fadeInLeft\" data-wow-duration=\"1s\" data-wow-delay=\"0.3s\">\r\n                        <ul className=\"p-3\">\r\n                            {carrito}\r\n                        </ul>\r\n                    </div>\r\n                    <div id=\"boton-procesar\" className=\"col-12 col-lg-3 align-self-center wow fadeInRight\" data-wow-duration=\"1s\" data-wow-delay=\"0.5s\">\r\n                        <div className=\"row justify-content-center\">\r\n                        <Link to={{ pathname: \"/compra\", state: { userId: this.userId } }} className=\"btn btn-primary\" onClick={() => this.procesarCompra()}>Procesar compra</Link>\r\n                        </div>\r\n                    </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        } \r\n    } \r\n}\r\n\r\nexport default Carrito;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport paypal from 'paypal-checkout';\r\n\r\n var Conf ={\r\n    currency: 'EUR',\r\n    env: 'sandbox',\r\n    client: {\r\n        sandbox: 'AfOEViXueKQB_yf47hoYVmSNv-cCrkK12vFYKzGQOy5_6uaQwBosuCr_uYiYkVVWSzAU2EnLA2zpmmO-',\r\n        production:'-- id--',\r\n    },\r\n    locale:'es_ES',\r\n    style:{\r\n        label:'pay',\r\n        color:'blue',\r\n        size:'medium',\r\n        shape:'pill'\r\n    }\r\n};\r\n    \r\n\r\nvar Button= paypal.Button.driver('react', {React, ReactDOM});\r\n    \r\nexport const PayPalButton= Button;\r\nexport const paypalConf= Conf;","import React, { Component } from 'react';\r\nimport { PayPalButton, paypalConf } from '../paypal'\r\nimport { auth } from '../db';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport swal from 'sweetalert';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport StripeCheckout from 'react-stripe-checkout';\r\nimport moment from 'moment'\r\n\r\nimport WOW from 'wowjs'\r\n\r\nclass Compra extends Component {\r\n    url = Global.url\r\n    paypalConf = paypalConf;\r\n    PayPalButton = PayPalButton;\r\n    userId = null;\r\n    loading = true;\r\n    errorCarrito = false;\r\n    pvp = 0;\r\n\r\n    nombreRef = React.createRef();\r\n    apellidosRef = React.createRef();\r\n    telefonoRef = React.createRef();\r\n    emailRef = React.createRef();\r\n    direccionRef = React.createRef();\r\n    municipioRef = React.createRef();\r\n    cpRef = React.createRef();\r\n    provinciaRef = React.createRef();\r\n\r\n\r\n    state = {\r\n        carrito: [],\r\n        pedido: {},\r\n        identity: true,\r\n        user: {},\r\n        loadedUser: false,\r\n        buttons: false,\r\n        completed: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getCarrito();\r\n\r\n            new WOW.WOW({\r\n                live: false\r\n            }).init();\r\n        \r\n    \r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!auth.currentUser) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n            this.userId = this.props.location.state.userId\r\n            if (this.userId === \"null\") {\r\n                this.setState({\r\n                    identity: false\r\n                });\r\n            } else {\r\n                axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                    if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                        this.getUser(this.userId);\r\n                    } else {\r\n                        this.setState({\r\n                            identity: false\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n        this.validator = new SimpleReactValidator({\r\n            locale: 'es',\r\n            validators: {\r\n                names_surnames: {\r\n                    message: 'El campo debe contener letras y espacios',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+(\\s*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]*)*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+$/) && params.indexOf(val) === -1\r\n                    },\r\n\r\n                },\r\n                email2: {\r\n                    message: 'El email no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^(?:[^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*|\"[^\\n\"]+\")@(?:[^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\]\\.,;:\\s@\"]{2,63}$/i) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                telefono: {\r\n                    message: 'El telefono no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^[896]\\d{8}$/) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                dni: {\r\n                    message: 'El DNI no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^\\d{8}[a-zA-Z]$/) && params.indexOf(val) === -1\r\n                    },\r\n                }\r\n            },\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n                alpha_space: 'Solo se permiten letras y espacios'\r\n\r\n            },\r\n        });\r\n    }\r\n\r\n    getCarrito = () => {\r\n        axios.get(this.url + 'carrito').then((response) => {\r\n            if (response.data.status === 'success' && response.data.carrito) {\r\n\r\n                this.setState({\r\n                    carrito: response.data.carrito,\r\n                })\r\n                this.loading = false;\r\n            } else {\r\n                this.loading = false;\r\n                this.errorCarrito = true;\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user,\r\n                    loadedUser: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            pedido: {\r\n                nombre: this.nombreRef.current.value,\r\n                apellidos: this.apellidosRef.current.value,\r\n                telefono: this.telefonoRef.current.value,\r\n                email: this.emailRef.current.value,\r\n                provincia: this.provinciaRef.current.value,\r\n                municipio: this.municipioRef.current.value,\r\n                cp: this.cpRef.current.value,\r\n                direccion: this.direccionRef.current.value,\r\n            }\r\n        }, () => {\r\n            if (this.validator.allValid()) {\r\n                this.setState({\r\n                    buttons: true\r\n                })\r\n\r\n            } else {\r\n                this.setState({\r\n                    buttons: false\r\n                })\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    /* STRIPE */\r\n\r\n    onToken = (token) => {\r\n        let total = this.pvp;\r\n        let save_pedido = {\r\n            id_usuario: this.userId,\r\n            detalles: {\r\n                direccion: this.state.pedido.direccion,\r\n                provincia: this.state.pedido.provincia,\r\n                telefono: this.state.pedido.telefono,\r\n                email: this.state.pedido.email,\r\n                municipio: this.state.pedido.municipio,\r\n                cp: this.state.pedido.cp,\r\n                nombre: this.state.pedido.nombre,\r\n                apellidos: this.state.pedido.apellidos\r\n            },\r\n            fecha: moment().format(\"DD/MM/YYYY\"),\r\n            precio_total: this.pvp,\r\n            productos: this.state.carrito,\r\n            estado: 'pendiente'\r\n        }\r\n\r\n        axios.post(this.url + 'pedido/generar', { save_pedido }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                let pedidoId = response.data.pedidoId;\r\n                axios.post(this.url + 'pago', { token, total }).then((response) => {\r\n                    if (response.data.status === 'success') {\r\n                        swal(\r\n                            'Compra realizada correctamente',\r\n                            'En breves confirmaremos su pedido, ID de pedido: ' + pedidoId,\r\n                            'success'\r\n                        );\r\n\r\n                        axios.post(this.url + 'email/pedido');\r\n\r\n                        this.setState({\r\n                            completed: true\r\n                        })\r\n                    } else {\r\n                        swal(\r\n                            'Compra no realizada',\r\n                            'Ha ocurrido un error con el pago',\r\n                            'error'\r\n                        );\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                swal(\r\n                    'Compra no realizada',\r\n                    'Ha ocurrido un error con su pedido',\r\n                    'error'\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    /*  */\r\n\r\n\r\n\r\n    /* PAYPAL */\r\n    payment = (data, actions) => {\r\n        const payment = {\r\n            transactions: [\r\n                {\r\n                    amount: {\r\n                        total: this.pvp,\r\n                        currency: this.paypalConf.currency\r\n                    },\r\n                    description: 'Compra en Tope-Vision',\r\n                    custom: this.state.pedido.email || ''\r\n                }\r\n            ],\r\n            note_to_payer: 'Contactanos para cualquier duda en opticatopevision@gmail.com',\r\n        };\r\n\r\n        return actions.payment.create({ payment });\r\n    };\r\n\r\n    onAuthorize = (data, actions) => {\r\n\r\n        let save_pedido = {\r\n            id_usuario: this.userId,\r\n            detalles: {\r\n                direccion: this.state.pedido.direccion,\r\n                provincia: this.state.pedido.provincia,\r\n                telefono: this.state.pedido.telefono,\r\n                email: this.state.pedido.email,\r\n                municipio: this.state.pedido.municipio,\r\n                cp: this.state.pedido.cp,\r\n                nombre: this.state.pedido.nombre,\r\n                apellidos: this.state.pedido.apellidos\r\n            },\r\n            fecha: moment().format(\"DD/MM/YYYY\"),\r\n            precio_total: this.pvp,\r\n            productos: this.state.carrito,\r\n            estado: 'pendiente'\r\n        }\r\n\r\n        axios.post(this.url + 'pedido/generar', { save_pedido }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                let pedidoId = response.data.pedidoId;\r\n                return actions.payment.execute().then(response => {\r\n                    swal(\r\n                        'Compra realizada correctamente',\r\n                        'En breves confirmaremos su pedido, ID: ' + pedidoId,\r\n                        'success'\r\n                    );\r\n\r\n                    axios.post(this.url + 'email/pedido');\r\n\r\n                    this.setState({\r\n                        completed: true\r\n                    })\r\n                }).catch(error => {\r\n                    swal(\r\n                        'Compra no realizada',\r\n                        'Ha ocurrido un error en el pago',\r\n                        'error'\r\n                    );\r\n                })\r\n\r\n            } else {\r\n                swal(\r\n                    'Compra no realizada',\r\n                    'Ha ocurrido un error con su pedido',\r\n                    'error'\r\n                );\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    onError = (error) => {\r\n        swal(\r\n            'Pago no realizado',\r\n            'Intentelo mas tarde',\r\n            'error'\r\n        );\r\n    };\r\n\r\n    /*  */\r\n\r\n    render() {\r\n        if (this.state.identity === false) {\r\n            return (\r\n                <Redirect to=\"/login\" />\r\n            )\r\n        }\r\n        if (this.state.completed === true) {\r\n            return (\r\n                <div id=\"compra\" className=\"container-fluid mt-4\">\r\n                    <h1 className=\"cargando\">Gracias por confiar en Optica Tope Vision</h1>\r\n                    <p>En breve nos pondremos en contacto con usted</p>\r\n                    <Link to=\"/\" className=\"btn btn-success\">Volver a Inicio</Link>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        var carrito;\r\n        this.pvp = 0;\r\n        if (this.state.carrito.length >= 1) {\r\n            carrito = this.state.carrito.map((data, i) => {\r\n                this.pvp = this.pvp +  parseFloat(data.precio_total);\r\n                return (\r\n\r\n                    <li key={i} className=\"list-group-item m-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\" col-4 text-md-left text-center\" >\r\n                                <img src={data.imagen} className=\"imagencarrito\" alt=\"Cartimg\" />\r\n                                \r\n                            </div>\r\n                            <div className=\" col-4 text-md-left text-center align-self-center\" >\r\n                                \r\n                                <p className=\"m-3\">{data.nombre}</p>\r\n                            </div>\r\n                            <div className=\"col-4 align-self-center\">\r\n                                <div className=\"row justify-content-center\">\r\n                                    <div className=\"col mt-2\">\r\n                                        <div className=\"row flex-nowrap align-items-center justify-content-center align-self-center\">\r\n                                            <div className=\"col text-center p-1\" >\r\n                                                <label className=\"text-center m-2 \">Cantidad: <br/> <strong>{data.cantidad}</strong></label>\r\n                                            </div>\r\n                                            <div className=\"col text-center p-1\" >\r\n                                                <label className=\"text-center m-2\">Total: <br/> <strong>{data.precio_total} €</strong></label>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                );\r\n            });\r\n        } else if (this.errorCarrito === true && this.loading === false) {\r\n            carrito = <h1 className=\"mt-5 text-center error\">Error al procesar compra</h1>\r\n        } else {\r\n            carrito =\r\n                <h1 className=\"mt-5 text-center cargando\">Cargando...</h1>\r\n        }\r\n\r\n        if (this.state.loadedUser === true) {\r\n            return (\r\n                <div id=\"compra\" className=\"container-fluid mt-4\">\r\n                    <div className=\"row \">\r\n                        <div className=\"col-12 text-left wow fadeInRight\">\r\n                            <h2 className=\"m-3\">Procesando compra</h2>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div id=\"direciones\" className=\"col-lg-6 col-12 wow fadeInUp\" data-wow-duration=\"1s\" data-wow-delay=\"0.3s\">\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"nombre\" className=\"ml-2\">Nombre</label>\r\n                                <input id=\"nombre\" className=\"form-control mr-2 ml-2\" type=\"text\" value={this.state.user.nombre} name=\"nombre\" ref={this.nombreRef} /* onChange={this.changeState} */ onKeyUp={this.changeState} required />\r\n                                {this.validator.message('nombre', this.state.user.nombre, 'required|names_surnames')}\r\n                            </div>\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"apellidos\" className=\"ml-2\">Apellidos</label>\r\n                                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"apellidos\" value={this.state.user.apellidos} ref={this.apellidosRef} /* onChange={this.changeState} */ onKeyUp={this.changeState} required />\r\n                                {this.validator.message('apellidos', this.state.user.apellidos, 'required|names_surnames')}\r\n                            </div>\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"telefono\" className=\"ml-2\">Telefono</label>\r\n                                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"telefono\" value={this.state.user.telefono} ref={this.telefonoRef} onKeyUp={this.changeState} maxLength=\"9\" required />\r\n                                {this.validator.message('telefono', this.state.user.telefono, 'required|telefono')}\r\n                            </div>\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"email\" className=\"ml-2\">Email</label>\r\n                                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"email\" ref={this.emailRef} value={this.state.user.email} onKeyUp={this.changeState} required />\r\n                                {this.validator.message('email', this.state.user.email, 'required|email')}\r\n                            </div>\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"provincia\" className=\"ml-2\">Provincia</label>\r\n                                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"provincia\" ref={this.provinciaRef} onKeyUp={this.changeState} required />\r\n                                {this.validator.message('provincia', this.state.pedido.provincia, 'required|names_surnames')}\r\n                            </div>\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"municipio\" className=\"ml-2\">Municipio</label>\r\n                                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"municipio\" ref={this.municipioRef} onKeyUp={this.changeState} required />\r\n                                {this.validator.message('municipio', this.state.pedido.municipio, 'required|names_surnames')}\r\n                            </div>\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"cp\" className=\"ml-2\">CP</label>\r\n                                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"cp\" ref={this.cpRef} onKeyUp={this.changeState} required maxLength=\"5\" minLength=\"5\" />\r\n                                {this.validator.message('cp', this.state.pedido.cp, 'required|numeric')}\r\n                            </div>\r\n                            <div className=\"form-group text-left\">\r\n                                <label htmlFor=\"direccion\" className=\"ml-2\">Direccion</label>\r\n                                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"direccion\" ref={this.direccionRef} onKeyUp={this.changeState} required />\r\n                                {this.validator.message('direccion', this.state.pedido.direccion, 'required')}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-lg-6 col-12\">\r\n                            <div className=\"row\">\r\n                                <div id=\"buy-list\" className=\"col-12 wow fadeIn\" data-wow-duration=\"1s\" data-wow-delay=\"0.5s\">\r\n                                    <ul className=\"p-3\">\r\n                                        {carrito}\r\n                                        <li className=\"list-group-item m-2 text-right\"><p className=\"h5 mr-3\">Total a pagar: <strong>{this.pvp} €</strong></p></li>\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <div id=\"pagos\" className=\"col-12 wow fadeInUp\" data-wow-duration=\"1s\" data-wow-delay=\"0.5s\">\r\n                                    {this.state.buttons === true\r\n                                        ? <React.Fragment>\r\n                                            <StripeCheckout ComponentClass=\"boton-pago\" locale=\"es\" currency=\"EUR\" stripeKey=\"pk_test_xQbGMr8UIbCrgGFLNQ2l5LbI00SVNQjKoV\" token={this.onToken} amount={this.pvp * 100}  >\r\n                                                <button className=\"boton-pago btn btn-stripe\">Pagar con Tarjeta <img className=\"img-stripe\" alt=\"img-stripe\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Stripe_Logo%2C_revised_2016.svg/1280px-Stripe_Logo%2C_revised_2016.svg.png\" /> </button>\r\n                                            </StripeCheckout>\r\n                                            <this.PayPalButton\r\n                                                env={this.paypalConf.env}\r\n                                                client={this.paypalConf.client}\r\n                                                payment={(data, actions) => this.payment(data, actions)}\r\n                                                onAuthorize={(data, actions) => this.onAuthorize(data, actions)}\r\n                                                onError={(error) => this.onError(error)}\r\n                                                style={this.paypalConf.style}\r\n                                                commit\r\n                                                locale={this.paypalConf.locale}\r\n                                            />\r\n                                        </React.Fragment>\r\n                                        : <h3 className=\"error\">Rellena los datos para habilitar pago</h3>\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <h1 className=\"mt-5 cargando\">Cargando...</h1>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default Compra;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\n\r\nclass UsuarioPedidos extends Component {\r\n    userId = null;\r\n    url = Global.url\r\n    pedidoaux = []\r\n    state = {\r\n        identity: false,\r\n        user: {},\r\n        status: null,\r\n        loading: true,\r\n        pedidos: [],\r\n        errorPedidos: false,\r\n        show: false,\r\n    }\r\n    componentDidMount() {\r\n\r\n        if (!auth.currentUser) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n            this.userId = this.props.match.params.id\r\n            axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                    this.getUser(this.userId);\r\n                } else {\r\n                    this.setState({\r\n                        identity: false\r\n                    });\r\n\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user,\r\n                    identity: true\r\n                })\r\n                this.getPedidos();\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    getPedidos = () => {\r\n        axios.get(this.url + 'pedidos/' + this.userId).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    pedidos: response.data.pedidos,\r\n                    loading: false\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    loading: false,\r\n                    errorPedidos: true\r\n                })\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    pulsadoEvento = (id) => {\r\n        this.state.pedidos.forEach((element, i) => {\r\n            if (id === element.pedidoId) {\r\n                this.pedidoaux.push(element)\r\n                this.setState({\r\n                    show: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    cerradoEvento = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n        this.pedidoaux = [];\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        var pedidos;\r\n        if (this.state.pedidos.length >= 1) {\r\n            pedidos = this.state.pedidos.map((data, i) => {\r\n                return (\r\n                    <li key={i} className=\"list-group-item m-2\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-4 col-12 mt-2 mb-2 text-md-left text-center\" >\r\n                                <p className=\"font-weight-bold\">Fecha:</p>\r\n                                <p >{data.pedido.fecha}</p>\r\n                            </div>\r\n                            <div className=\"col-md-4 col-12 mt-2 mb-2 estados-pedidos\">\r\n                                <div className=\"row justify-content-center\">\r\n                                    <div className=\" col-4 \" >\r\n                                        <p className=\"font-weight-bold\">PVP:</p>\r\n                                        <p>{data.pedido.precio_total}€</p>\r\n                                    </div>\r\n                                    <div className=\" col-4\" >\r\n                                        <p className=\"font-weight-bold\">Estado:</p>\r\n                                        <p >{data.pedido.estado}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\" col-md-4 col-12 mt-2 mb-2  text-center\" >\r\n                                <button className=\"btn btn-success\" onClick={() => this.pulsadoEvento(data.pedidoId)}>Detalle</button>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                );\r\n            });\r\n        } else if (this.state.errorPedidos === true && this.state.loading === false) {\r\n            pedidos = <h1 className=\"mt-5 text-center error \">No hay pedidos</h1>\r\n        } else {\r\n            pedidos =\r\n                <h1 className=\"mt-5 text-center cargando  \">Cargando...</h1>\r\n        }\r\n\r\n\r\n        if (this.state.identity === true && this.state.loading === false) {\r\n\r\n            return (\r\n                <div className=\"col-12  wow fadeInRight\">\r\n                    <div className=\"row\">\r\n                        <div id=\"pedidos-list\" className=\"col-12 ml-3\">\r\n                            <h1 className=\"m-2 text-md-left text-center \">Mis pedidos</h1>\r\n                            <ul className=\"p-3\">\r\n                                {pedidos}\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    {/* MODAL DE DETALLE DE PRODUCTO */}\r\n                    {this.pedidoaux.length === 1 &&\r\n                        <Modal show={this.state.show} onHide={this.cerradoEvento} size=\"lg\"\r\n                            aria-labelledby=\"contained-modal-title-vcenter\"\r\n                            centered>\r\n                            <Modal.Header closeButton>\r\n                                <Modal.Title className=\"text-center\">\r\n                                    <h4>ID: {this.pedidoaux[0].pedidoId}</h4>\r\n                                    <p><strong>Fecha: </strong>{this.pedidoaux[0].pedido.fecha}</p>\r\n                                    <p><strong>Direccion de envio: </strong>{this.pedidoaux[0].pedido.detalles.direccion + ', ' + this.pedidoaux[0].pedido.detalles.municipio + ', ' + this.pedidoaux[0].pedido.detalles.provincia + ' - ' + this.pedidoaux[0].pedido.detalles.cp}</p>\r\n                                </Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body>\r\n                                <div className=\"infocarrito pl-3\">\r\n                                    <ul>{\r\n                                        this.pedidoaux[0].pedido.productos.map((data, i) => {\r\n                                            return (\r\n                                                <li key={i} className=\"list-group-item m-2\">\r\n                                                    <div className=\"row\">\r\n                                                        <div className=\" col-8 text-md-left text-center\" >\r\n                                                            <img src={data.imagen} className=\"imagencarrito\" alt=\"Cartimg\" />\r\n                                                            <p className=\"d-inline  m-3\">{data.nombre}</p>\r\n                                                        </div>\r\n                                                        <div className=\"col-4 align-self-center\">\r\n                                                            <div className=\"row justify-content-center\">\r\n                                                                <div className=\"col mt-2\">\r\n                                                                    <div className=\"row flex-nowrap align-items-center justify-content-center align-self-center\">\r\n                                                                        <div className=\"col text-center p-1\" >\r\n                                                                            <label className=\"text-center \">Cantidad: <strong>{data.cantidad}</strong></label>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </li>\r\n                                            );\r\n                                        })\r\n\r\n                                    }\r\n                                        <li className=\"list-group-item m-2 text-right\"><p className=\"h6 mr-3\">Total: {this.pedidoaux[0].pedido.precio_total} €</p></li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n\r\n                            </Modal.Body>\r\n                            <Modal.Footer>\r\n                                <Button variant=\"secondary\" onClick={this.cerradoEvento}>\r\n                                    Cerrar\r\n                            </Button>\r\n                            </Modal.Footer>\r\n                        </Modal>\r\n\r\n                    }\r\n                </div>\r\n\r\n\r\n            );\r\n        } else {\r\n            return (\r\n                <h1 className=\"cargando \">Cargando...</h1>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default UsuarioPedidos;","import React, { Component } from 'react';\r\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\r\n\r\n\r\nimport Header from './components/Header';\r\nimport Home from './components/Home';\r\nimport Footer from './components/Footer';\r\nimport Login from './components/Login';\r\nimport Register from './components/Register';\r\nimport Tienda from './components/Tienda';\r\nimport Citas from './components/Citas';\r\nimport Servicios from './components/Servicios';\r\nimport Error from './components/Error'\r\nimport PerfilUsuario from './components/PerfilUsuario';\r\nimport PerfilAdmin from './components/PerfilAdmin';\r\nimport Carrito from './components/Carrito';\r\nimport Compra from './components/Compra';\r\nimport UsuarioPedidos from './components/UsuarioPedidos';\r\n\r\n\r\n\r\nclass Router extends Component {\r\n    state = {\r\n        isLogged: false\r\n    };\r\n    logged = () => {\r\n        this.setState({\r\n            isLogged: true\r\n        })\r\n    }\r\n\r\n    signout = () => {\r\n        this.setState({\r\n            isLogged: false\r\n        })\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\n    render() {\r\n\r\n\r\n            return (\r\n                <BrowserRouter>\r\n                    {this.state.isLogged === true\r\n                        ? <Header logged={true}  />  \r\n                        : <Header />\r\n                    }\r\n                    <Switch>\r\n\r\n                        <Route exact path=\"/\" component={Home} />\r\n                        <Route exact path=\"/home\" component={Home} />\r\n                        <Route exact path=\"/login\" component={Login} />\r\n                        <Route exact path=\"/register\" component={Register} />\r\n                        <Route exact path=\"/servicios\" component={Servicios} />\r\n                        <Route exact path=\"/compra\" component={Compra} />\r\n                        <Route exact path=\"/tienda/:id?\" component={Tienda} />\r\n                        <Route exact path=\"/carrito\" component={Carrito} />\r\n                        <Route exact path=\"/miperfil/:id\" component={PerfilUsuario} />\r\n                        <Route exact path=\"/mispedidos/:id\" component={UsuarioPedidos} />\r\n                        <Route exact path=\"/adminperfil/:adminid\" component={PerfilAdmin} />\r\n                        <Route exact path=\"/citas\" component={Citas} />\r\n                        <Route exact path=\"/logged\" render={\r\n                            () => {\r\n                                this.logged();\r\n                                return (\r\n                                    <Redirect to=\"/\" />\r\n                                )\r\n\r\n                            }\r\n                        } />\r\n                        <Route exact path=\"/signout\" render={\r\n                            () => {\r\n                                this.signout();\r\n                                return (\r\n                                    <Redirect to=\"/\" />\r\n                                )\r\n\r\n                            }\r\n                        } />\r\n\r\n\r\n                        <Route component={Error} />\r\n                    </Switch>\r\n\r\n\r\n\r\n\r\n                    <Footer />\r\n                </BrowserRouter>\r\n\r\n            );\r\n    }\r\n\r\n}\r\n\r\nexport default Router;","import React from 'react';\r\nimport Router from './Router';\r\n\r\n\r\nfunction App() {\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\r\nimport './assets/css/index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.dbc517cd.png\";","module.exports = __webpack_public_path__ + \"static/media/a.83bde698.png\";","module.exports = __webpack_public_path__ + \"static/media/b.8ba9f6ff.png\";","module.exports = __webpack_public_path__ + \"static/media/c.98aafa73.png\";","module.exports = __webpack_public_path__ + \"static/media/d.464a4d00.png\";","module.exports = __webpack_public_path__ + \"static/media/niña-glasses.50c098c9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/dog-glasses.70089dad.jpg\";","module.exports = __webpack_public_path__ + \"static/media/familia-glasses.b058c9f8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/carrito.420ed8ab.svg\";","module.exports = __webpack_public_path__ + \"static/media/gafas.62524e37.svg\";","module.exports = __webpack_public_path__ + \"static/media/graduacion.3f9d4769.svg\";"],"sourceRoot":""}