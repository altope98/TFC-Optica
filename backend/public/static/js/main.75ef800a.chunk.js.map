{"version":3,"sources":["db.js","Global.js","components/Header.js","components/Home.js","components/Footer.js","components/Login.js","components/Register.js","components/Tienda.js","components/Citas.js","components/Servicios.js","components/Error.js","components/PerfilUsuario.js","components/panelAdmin/UsuariosAdmin.js","components/panelAdmin/CitasAdmin.js","components/panelAdmin/Calendario.js","components/PerfilAdmin.js","components/Carrito.js","Router.js","App.js","serviceWorker.js","index.js","assets/images/logo.png","assets/images/a.png","assets/images/b.png","assets/images/c.png","assets/images/d.png","assets/images/carrito.svg"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","storage","firestore","Global","url","Header","state","identity","user","userId","redirect","logout","signOut","then","setState","axios","post","catch","e","alert","message","this","props","logged","currentUser","email","get","response","data","status","Fragment","to","id","className","activeClassName","src","logo","alt","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","role","aria-haspopup","nombre","apellidos","aria-labelledby","admin","style","cursor","onClick","Component","Home","showArrows","showThumbs","infiniteLoop","autoPlay","interval","transitionTime","showStatus","showIndicators","a","d","b","c","Footer","Login","emailRef","React","createRef","passwordRef","password","inicioGoogle","provider","GoogleAuthProvider","signInWithPopup","result","current","name","displayName","split","telefono","dni","imagen","inicioFacebook","FacebookAuthProvider","changeState","value","recibirFormulario","event","preventDefault","validator","allValid","signInWithEmailAndPassword","err","showMessages","forceUpdate","SimpleReactValidator","messages","required","alpha_num_space","numeric","onSubmit","htmlFor","ref","onChange","minlength","class","Register","nombreRef","apellidosRef","password2Ref","dniRef","telefonoRef","password2","archivo","loading","confirmpassword","ejecutarFormulario","recogerFoto","target","files","put","child","getDownloadURL","swal","locale","validators","names_surnames","rule","val","params","helpers","testRegex","indexOf","email2","alpha_space","maxLength","onBlur","onKeyUp","onFocus","Tienda","productaux","productos","carrito","categoria","edad","genero","show","onCategoriaChange","getProductos","onEdadChange","onGeneroChange","getUser","getCarrito","console","log","pulsadoEvento","item","forEach","element","productId","push","cerradoEvento","agregarItem","item_id","match","listProducts","length","map","i","key","product","precio","selected","checked","pathname","undefined","Modal","onHide","size","centered","closeButton","Title","Body","descripcion","Button","variant","Citas","cita","disabled","Servicios","Error","PerfilUsuario","listHistorial","textoHistorialRef","fechaHistorialRef","loading_file","eliminado","historial","addHistorial","historialaux","add","texto","fecha","moment","format","eliminarUsuario","delete","margin","UsuariosAdmin","users","listUsers","CitasAdmin","citas","hora","estado","citasaux","splice","error","listCitas","updateCita","citaId","min","max","localizer","momentLocalizer","Calendario","eventsList","citaaux","showmodal","actualizadorCitas","fecha2_split","hora2_split","title","start","Date","parseInt","end","events","startAccessor","endAccessor","defaultView","onSelectEvent","height","envioRecordatorio","PerfilAdmin","adminid","exact","from","path","component","render","Carrito","location","Router","isLogged","signout","App","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","contentType","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"sXAeAA,IAASC,cAVY,CACjBC,OAAQ,0CACRC,WAAY,6CACZC,YAAa,oDACbC,UAAW,6BACXC,cAAe,yCACfC,kBAAmB,gBACnBC,MAAO,+CAIJ,IAAMC,EAAOT,IAASS,OAEhBC,GADKV,IAASW,YACJX,IAASU,W,gBCbjBE,EALJ,CAELC,IAAK,uCCiJIC,E,4MA1IXD,IAAMD,EAAOC,I,EAEbE,MAAQ,CACJC,UAAU,EACVC,KAAM,GACNC,OAAQ,KACRC,UAAS,G,EA0BbC,OAAO,WACHX,EAAKY,UAAUC,MAAK,WAChB,EAAKC,SAAS,CACVP,UAAU,EACVC,KAAM,GACNC,OAAQ,KACRC,UAAS,IAGbK,IAAMC,KAAK,EAAKZ,IAAM,qBAEvBa,OAAM,SAACC,GACNC,MAAMD,EAAEE,a,mEAlCM,IAAD,OAEjB,IAAwB,IAApBC,KAAKC,MAAMC,QAAmC,MAAlBvB,EAAKwB,cAA6C,IAAxBH,KAAKf,MAAMC,SAAoB,CACrF,IAAIkB,EAAQzB,EAAKwB,YAAYC,MAC7BV,IAAMW,IAAIL,KAAKjB,IAAM,QAAUqB,GAAOZ,MAAK,SAACc,GACX,YAAzBA,EAASC,KAAKC,OACd,EAAKf,SAAS,CACVP,UAAU,EACVC,KAAMmB,EAASC,KAAKpB,KACpBC,OAAQkB,EAASC,KAAKnB,OACtBC,UAAS,IAGb,EAAKI,SAAS,CACVP,SAAU,a,+BA6B1B,OAEI,kBAAC,IAAMuB,SAAP,MAEuB,IAAtBT,KAAKf,MAAMI,UAER,kBAAC,IAAD,CAAUqB,GAAG,aAIjB,4BAAQC,GAAG,SAASC,UAAU,mBAC1B,yBAAKA,UAAU,uCAAuCD,GAAG,SACrD,yBAAKC,UAAU,gBACX,kBAAC,IAAD,CAASF,GAAG,IAAIG,gBAAgB,UAAS,yBAAKC,IAAKC,IAAMH,UAAU,WAAWD,GAAG,OAAOK,IAAI,eAEhG,4BAAQJ,UAAU,iBAAiBK,KAAK,SAASC,cAAY,WAAWC,cAAY,0BAA0BC,gBAAc,yBAAyBC,gBAAc,QAAQC,aAAW,qBAClL,0BAAMV,UAAU,yBAEpB,yBAAKA,UAAU,2BAA2BD,GAAG,0BAEzC,wBAAIC,UAAU,sBACV,wBAAIA,UAAU,YACV,kBAAC,IAAD,CAASF,GAAG,IAAIG,gBAAgB,UAAhC,WAEJ,wBAAID,UAAU,YACV,kBAAC,IAAD,CAASF,GAAG,aAAaG,gBAAgB,UAAzC,cAEJ,wBAAID,UAAU,YACV,kBAAC,IAAD,CAASF,GAAI,WAAWV,KAAKf,MAAMG,OAAQyB,gBAAgB,UAA3D,WAEJ,wBAAID,UAAU,YACV,kBAAC,IAAD,CAASF,GAAG,SAASG,gBAAgB,UAArC,WAGR,yBAAKD,UAAU,sBACf,wBAAIA,UAAU,4BAEe,IAAxBZ,KAAKf,MAAMC,UAA8C,OAAxBc,KAAKf,MAAMC,SACvC,kBAAC,IAAMuB,SAAP,KACE,wBAAIG,UAAU,YACV,kBAAC,IAAD,CAASF,GAAG,YAAYG,gBAAgB,UAAxC,aAEJ,wBAAID,UAAU,YACV,kBAAC,IAAD,CAASF,GAAG,SAASG,gBAAgB,UAArC,oBAGN,kBAAC,IAAMJ,SAAP,KACE,wBAAIG,UAAU,qBACV,uBAAGA,UAAU,2BAA2BD,GAAG,iBAAiBY,KAAK,SAASL,cAAY,WAAWM,gBAAc,OAAOH,gBAAc,SAC/HrB,KAAKf,MAAME,KAAKsC,OAAS,IAAMzB,KAAKf,MAAME,KAAKuC,WAGpD,yBAAKd,UAAU,gBAAgBe,kBAAgB,mBAChB,IAA1B3B,KAAKf,MAAME,KAAKyC,MAEZ,kBAAC,IAAMnB,SAAP,KACD,kBAAC,IAAD,CAAMG,UAAU,gBAAgBF,GAAI,aAAeV,KAAKf,MAAMG,QAA9D,cAGE,kBAAC,IAAMqB,SAAP,KACF,kBAAC,IAAD,CAAMG,UAAU,gBAAgBF,GAAI,gBAAkBV,KAAKf,MAAMG,QAAjE,mBAIJ,yBAAKwB,UAAU,qBACf,kBAAC,IAAD,CAAMA,UAAU,wBAAwBiB,MAAO,CAACC,OAAQ,WAAYC,QAAS/B,KAAKV,QAAlF,6B,GAxHvB0C,a,qFCyDNC,E,4MAtDXhD,MAAQ,G,uDAEJ,OACI,yBAAK0B,GAAG,QACJ,yBAAKA,GAAG,SAASC,UAAU,wBACxB,kBAAC,IAAD,CACKsB,YAAY,EACZC,YAAY,EACZC,cAAc,EACdC,UAAU,EACVC,SAAU,IACVC,eAAgB,IAChBC,YAAY,EACZC,gBAAgB,GAEhB,6BACI,yBAAK3B,IAAK4B,IAAG1B,IAAI,gBAErB,6BACI,yBAAKF,IAAK6B,IAAG3B,IAAI,gBAErB,6BACI,yBAAKF,IAAK8B,IAAG5B,IAAI,gBAErB,6BACI,yBAAKF,IAAK+B,IAAG7B,IAAI,kBAQ7B,yBAAKJ,UAAU,UACf,wBAAIA,UAAU,UAAd,4BACI,yBAAKD,GAAG,WAGJ,6BACA,6BACI,kDACA,uCAEJ,6BACI,kDACA,8C,GA9CTqB,aCKJc,EAZF,WACL,OACA,4BAAQnC,GAAG,UACX,yBAAKC,UAAU,UACX,4D,kCCyJGmC,E,4MAnJXC,SAAWC,IAAMC,Y,EACjBC,YAAcF,IAAMC,Y,EAEpBnE,IAAMD,EAAOC,I,EAEbE,MAAQ,CACJmB,MAAO,KACPgD,SAAU,KACV5C,OAAQ,KACRrB,KAAM,I,EAcVkE,aAAe,WACX,IAAIC,EAAW,IAAIpF,IAASS,KAAK4E,mBAEjC5E,EAAK6E,gBAAgBF,GAAU9D,MAAK,SAACiE,GACjC,IAAIC,EAAUD,EAAOtE,KACjBwE,EAAOD,EAAQE,YAAYC,MAAM,KACjC1E,EAAO,CACPsC,OAAQkC,EAAK,GACbjC,UAAWiC,EAAK,GAChBvD,MAAOsD,EAAQtD,MACf0D,SAAU,GACVC,IAAK,GACLC,OAAO,oKAEXtE,IAAMC,KAAK,EAAKZ,IAAM,QAASI,GAAMK,MAAK,SAACc,GACpCA,EAASC,MACR,EAAKd,SAAS,CACVe,OAAQ,mB,EAO5ByD,eAAiB,WACb,IAAIX,EAAW,IAAIpF,IAASS,KAAKuF,qBAEjCvF,EAAK6E,gBAAgBF,GAAU9D,MAAK,SAACiE,GACjC,IAAIC,EAAUD,EAAOtE,KACjBwE,EAAOD,EAAQE,YAAYC,MAAM,KACjC1E,EAAO,CACPsC,OAAQkC,EAAK,GACbjC,UAAWiC,EAAK,GAChBvD,MAAOsD,EAAQtD,MACf0D,SAAU,GACVC,IAAK,GACLC,OAAQ,oKAEZtE,IAAMC,KAAK,EAAKZ,IAAM,QAASI,GAAMK,MAAK,SAACc,GACpCA,EAASC,MACR,EAAKd,SAAS,CACVe,OAAQ,mB,EAQ5B2D,YAAc,WACV,EAAK1E,SAAS,CACVW,MAAO,EAAK4C,SAASU,QAAQU,MAC7BhB,SAAU,EAAKD,YAAYO,QAAQU,S,EAI3CC,kBAAoB,SAACC,GACjBA,EAAMC,iBAEN,EAAKJ,cAED,EAAKK,UAAUC,WACf9F,EAAK+F,2BAA2B,EAAKzF,MAAMmB,MAAO,EAAKnB,MAAMmE,UAAU5D,MAAK,WACxE,EAAKC,SAAS,CACV2D,SAAU,KACV5C,OAAQ,eAEbZ,OAAM,SAAC+E,GACN7E,MAAM6E,EAAI5E,aAGd,EAAKyE,UAAUI,eACf,EAAKC,cACL,EAAKpF,SAAS,CACVe,OAAQ,a,mEArFhBR,KAAKwE,UAAY,IAAIM,IAAqB,CACtCC,SAAU,CACNC,SAAU,4BACVC,gBAAiB,4CACjBC,QAAS,2BACT9E,MAAO,4B,+BAuFT,IAAD,OACL,MAA0B,YAAtBJ,KAAKf,MAAMuB,OAEP,kBAAC,IAAD,CAAUE,GAAG,YAMjB,yBAAKC,GAAG,QAAQC,UAAU,WAEtB,wBAAIA,UAAU,gCAAd,kBAGA,6BAEA,0BAAMA,UAAU,WAAWuE,SAAUnF,KAAKqE,mBACtC,yBAAKzD,UAAU,wBACX,2BAAOwE,QAAQ,QAAQxE,UAAU,QAAjC,SACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,QAAQ0B,IAAKrF,KAAKgD,SAAUsC,SAAUtF,KAAKmE,YAAaa,UAAQ,IAC1HhF,KAAKwE,UAAUzE,QAAQ,QAASC,KAAKf,MAAMmB,MAAO,mBAEvD,yBAAKQ,UAAU,wBACX,2BAAOwE,QAAQ,WAAWxE,UAAU,QAApC,iBACA,2BAAOA,UAAU,yBAAyBK,KAAK,WAAW0C,KAAK,WAAW0B,IAAKrF,KAAKmD,YAAamC,SAAUtF,KAAKmE,YAAaa,UAAQ,EAACO,UAAU,MAC/IvF,KAAKwE,UAAUzE,QAAQ,WAAYC,KAAKf,MAAMmE,SAAU,aAG7D,yBAAKxC,UAAU,aACf,2BAAOK,KAAK,SAASmD,MAAM,iBAAiBoB,MAAM,qBAGtD,yBAAK5E,UAAU,iBACX,4BAAQA,UAAU,gBAAgBmB,QAAS,kBAAM,EAAKsB,iBAAgB,yBAAKvC,IAAI,6EAA6EE,IAAI,iBAAhK,IAAkL,wDAClL,4BAAQJ,UAAU,kBAAkBmB,QAAS,kBAAM,EAAKkC,mBAAkB,yBAAKnD,IAAI,sFAAsFE,IAAI,mBAA7K,IAAiM,gE,GA5IjMgB,a,iBCgPLyD,E,4MA/OXC,UAAYzC,IAAMC,Y,EAClByC,aAAe1C,IAAMC,Y,EACrBF,SAAWC,IAAMC,Y,EACjBC,YAAcF,IAAMC,Y,EACpB0C,aAAe3C,IAAMC,Y,EACrB2C,OAAS5C,IAAMC,Y,EACf4C,YAAc7C,IAAMC,Y,EAEpBnE,IAAMD,EAAOC,I,EAEbE,MAAQ,CACJE,KAAM,GACNqB,OAAQ,KACRuF,UAAW,KACXC,QAAS,UACTC,SAAS,G,EAIbC,gBAAkB,K,EA+ClB/B,YAAc,WACV,EAAK1E,SAAS,CACVN,KAAM,CACFsC,OAAQ,EAAKiE,UAAUhC,QAAQU,MAC/B1C,UAAW,EAAKiE,aAAajC,QAAQU,MACrChE,MAAO,EAAK4C,SAASU,QAAQU,MAC7BhB,SAAU,EAAKD,YAAYO,QAAQU,MACnCN,SAAU,EAAKgC,YAAYpC,QAAQU,MACnCL,IAAK,EAAK8B,OAAOnC,QAAQU,OAE7B2B,UAAW,EAAKH,aAAalC,QAAQU,QAErC,EAAKnF,MAAM8G,YAAc,EAAK9G,MAAME,KAAKiE,SAEzC,EAAK8C,iBAAkB,EAKvB,EAAKA,iBAAkB,G,EAI/B7B,kBAAoB,SAACC,GACjBA,EAAMC,iBAEN,EAAKJ,cAEL,EAAKgC,sB,EAITC,YAAc,SAAC9B,GACX,EAAK7E,SAAS,CACVuG,QAAS1B,EAAM+B,OAAOC,MAAM,M,EAIpCH,mBAAqB,WACjB,IAA6B,IAAzB,EAAKD,gBACL,GAAI,EAAK1B,UAAUC,WACf,GAA2B,YAAvB,EAAKxF,MAAM+G,QACX,EAAKvG,SAAS,CACVwG,SAAQ,IAEZrH,EAAQyG,IAAI,EAAKpG,MAAM+G,QAAQrC,MAAM4C,IAAI,EAAKtH,MAAM+G,SAASxG,MAAK,WAC9DZ,EAAQyG,MAAMmB,MAAM,EAAKvH,MAAM+G,QAAQrC,MAAM8C,iBAAiBjH,MAC1D,SAAAT,GACI,EAAKU,SAAS,CACVwG,SAAQ,IAEZ,IAAI9G,EAAO,EAAKF,MAAME,KACtBO,IAAMC,KAAK,EAAKZ,IAAM,OAAQ,CAAEI,OAAMJ,QAAOS,MAAK,SAACc,GAClB,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVe,OAAQ,YAEZkG,IACI,qBACA,kCACA,YAGJ,EAAKjH,SAAS,CACVe,OAAQ,wBAM7B,CACH,IAAIrB,EAAO,EAAKF,MAAME,KAEtBO,IAAMC,KAAK,EAAKZ,IAAM,OAAQ,CAAEI,OAAMJ,IAD5B,qKACmCS,MAAK,SAACc,GAClB,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVe,OAAQ,YAEZkG,IACI,qBACA,kCACA,YAGJ,EAAKjH,SAAS,CACVe,OAAQ,mBAQxB,EAAKgE,UAAUI,eACf,EAAKC,cACL,EAAKpF,SAAS,CACVe,OAAQ,Y,mEA3IpBR,KAAKwE,UAAY,IAAIM,IAAqB,CACtC6B,OAAQ,KACRC,WAAY,CACRC,eAAgB,CACZ9G,QAAS,2CACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAChB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,wGAAgH,IAAzBC,EAAOG,QAAQJ,KAItJK,OAAQ,CACJrH,QAAS,wBACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,sHAAgJ,IAAzBC,EAAOG,QAAQJ,KAGtLjD,SAAU,CACN/D,QAAS,2BACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,kBAA4C,IAAzBC,EAAOG,QAAQJ,KAGlFhD,IAAK,CACDhE,QAAS,sBACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,qBAA+C,IAAzBC,EAAOG,QAAQJ,MAIzFhC,SAAU,CACNC,SAAU,4BACVC,gBAAiB,4CACjBC,QAAS,2BACT9E,MAAO,uBACPiH,YAAa,0C,+BA8Gf,IAAD,OACL,MAA0B,YAAtBrH,KAAKf,MAAMuB,OAEP,kBAAC,IAAD,CAAUE,GAAG,WAKjB,yBAAKC,GAAG,WAAWC,UAAU,WACzB,wBAAIA,UAAU,gCAAd,YAGA,6BAEA,0BAAMA,UAAU,WAAWuE,SAAUnF,KAAKqE,mBACtC,yBAAKzD,UAAU,wBACX,2BAAOwE,QAAQ,SAASxE,UAAU,QAAlC,UACA,2BAAOD,GAAG,SAASC,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,SAAS0B,IAAKrF,KAAK0F,UAAWJ,SAAUtF,KAAKmE,YAAaa,UAAQ,IACxIhF,KAAKwE,UAAUzE,QAAQ,SAAUC,KAAKf,MAAME,KAAKsC,OAAQ,4BAE9D,yBAAKb,UAAU,wBACX,2BAAOwE,QAAQ,YAAYxE,UAAU,QAArC,aACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,YAAY0B,IAAKrF,KAAK2F,aAAcL,SAAUtF,KAAKmE,YAAaa,UAAQ,IAClIhF,KAAKwE,UAAUzE,QAAQ,YAAaC,KAAKf,MAAME,KAAKuC,UAAW,4BAEpE,yBAAKd,UAAU,wBACX,2BAAOwE,QAAQ,WAAWxE,UAAU,QAApC,YACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,WAAW0B,IAAKrF,KAAK8F,YAAaR,SAAUtF,KAAKmE,YAAamD,UAAU,IAAItC,UAAQ,IAC9IhF,KAAKwE,UAAUzE,QAAQ,WAAYC,KAAKf,MAAME,KAAK2E,SAAU,sBAElE,yBAAKlD,UAAU,wBACX,2BAAOwE,QAAQ,MAAMxE,UAAU,QAA/B,OACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,MAAM0B,IAAKrF,KAAK6F,OAAQP,SAAUtF,KAAKmE,YAAaoD,OAAQvH,KAAKmE,YAAaa,UAAQ,IAChJhF,KAAKwE,UAAUzE,QAAQ,MAAOC,KAAKf,MAAME,KAAK4E,IAAK,iBAExD,yBAAKnD,UAAU,wBACX,2BAAOwE,QAAQ,QAAQxE,UAAU,QAAjC,UACA,2BAAOA,UAAU,8BAA8BK,KAAK,OAAO0C,KAAK,SAAS2B,SAAU,SAACzF,GAAD,OAAO,EAAKuG,YAAYvG,OACnF,IAAvBG,KAAKf,MAAMgH,SACR,sDAGR,yBAAKrF,UAAU,wBACX,2BAAOwE,QAAQ,QAAQxE,UAAU,QAAjC,SACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,QAAQ0B,IAAKrF,KAAKgD,SAAUsC,SAAUtF,KAAKmE,YAAaoD,OAAQvH,KAAKmE,YAAaa,UAAQ,IACpJhF,KAAKwE,UAAUzE,QAAQ,QAASC,KAAKf,MAAME,KAAKiB,MAAO,oBAE5D,yBAAKQ,UAAU,wBACX,2BAAOwE,QAAQ,WAAWxE,UAAU,QAApC,iBACA,2BAAOA,UAAU,yBAAyBK,KAAK,WAAW0C,KAAK,WAAW0B,IAAKrF,KAAKmD,YAAamC,SAAUtF,KAAKmE,YAAaoD,OAAQvH,KAAKmE,YAAaa,UAAQ,EAACO,UAAU,MACzKvF,KAAKwE,UAAUzE,QAAQ,WAAYC,KAAKf,MAAME,KAAKiE,SAAU,aAGlE,yBAAKxC,UAAU,wBACX,2BAAOwE,QAAQ,YAAYxE,UAAU,QAArC,2BACA,2BAAOA,UAAU,yBAAyBK,KAAK,WAAW0C,KAAK,YAAY0B,IAAKrF,KAAK4F,aAAcN,SAAUtF,KAAKmE,YAAaoD,OAAQvH,KAAKmE,YAAaqD,QAASxH,KAAKmE,YAAaa,UAAQ,EAACO,UAAU,OAC7K,IAAzBvF,KAAKkG,iBACF,gEAIR,yBAAKtF,UAAU,aACf,2BAAOK,KAAK,SAASwG,QAASzH,KAAKmE,YAAapC,QAAS/B,KAAKmE,YAAaC,MAAM,WAAWoB,MAAM,0B,GA1O/FxD,a,mCCuSR0F,E,4MArSX3I,IAAMD,EAAOC,I,EACbK,OAAS,K,EACTuI,WAAa,G,EACb1I,MAAQ,CACJC,UAAU,EACVC,KAAM,GACNqB,OAAQ,KACRoH,UAAW,GACXC,QAAS,GACTC,UAAW,QACXC,KAAM,SACNC,OAAQ,YACRC,MAAM,G,EA2BVC,kBAAoB,SAAC5D,GACjB,EAAK7E,SAAS,CACVqI,UAAWxD,EAAM+B,OAAOjC,OACzB,EAAK+D,e,EAIZC,aAAe,SAAC9D,GACZ,EAAK7E,SAAS,CACVsI,KAAMzD,EAAM+B,OAAOjC,OACpB,EAAK+D,e,EAGZE,eAAiB,SAAC/D,GACd,EAAK7E,SAAS,CACVuI,OAAQ1D,EAAM+B,OAAOjC,OACtB,EAAK+D,e,EAUZG,QAAU,SAAC3H,GACPjB,IAAMW,IAAI,EAAKtB,IAAM,WAAa4B,GAAInB,MAAK,SAACc,GACX,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVN,KAAMmB,EAASC,KAAKpB,W,EAMpCoJ,WAAa,WACT7I,IAAMW,IAAI,EAAKtB,IAAM,WAAWS,MAAK,SAACc,GACL,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVoI,QAASvH,EAASC,KAAKsH,aAKnCW,QAAQC,IAAI,EAAKxJ,MAAM4I,U,EAG3BM,aAAe,WACX,IAAIL,EAAY,EAAK7I,MAAM6I,UACvBC,EAAO,EAAK9I,MAAM8I,KAClBC,EAAS,EAAK/I,MAAM+I,OACxBtI,IAAMC,KAAK,EAAKZ,IAAM,YAAa,CAAE+I,UAAWA,EAAWC,KAAMA,EAAMC,OAAQA,IAAUxI,MAAK,SAACc,GAC9D,YAAzBA,EAASC,KAAKC,OACd,EAAKf,SAAS,CACVmI,UAAWtH,EAASC,KAAKqH,UACzBpH,OAAQ,YAGZ,EAAKf,SAAS,CACVmI,UAAW,GACXpH,OAAQ,c,EAMxBkI,cAAgB,SAACC,GACb,EAAK1J,MAAM2I,UAAUgB,SAAQ,SAACC,GACtBF,IAASE,EAAQC,YACjB,EAAKnB,WAAWoB,KAAKF,GACrB,EAAKpJ,SAAS,CACVwI,MAAM,S,EAMtBe,cAAgB,WACZ,EAAKvJ,SAAS,CACVwI,MAAM,IAEV,EAAKN,WAAa,I,EAGtBsB,YAAc,SAACtI,GACXjB,IAAMC,KAAK,EAAKZ,IAAM,kBAAmB,CAAEmK,QAASvI,IAAMnB,MAAK,SAACc,GAC/B,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVoI,QAASvH,EAASC,KAAKsH,UAE3B,EAAKmB,gBACLtC,IACI,kCACA,wDACA,WAEJ8B,QAAQC,IAAI,EAAKxJ,MAAM4I,WAGvB,EAAKmB,gBACLtC,IACI,8CACA,8EACA,c,mEAhIM,IAAD,OACZ/H,EAAKwB,aAKNH,KAAKZ,OAASY,KAAKC,MAAMkJ,MAAMnC,OAAOrG,GAClB,SAAhBX,KAAKZ,QACLY,KAAKP,SAAS,CACVP,UAAU,IAGlBQ,IAAMW,IAAIL,KAAKjB,IAAM,YAAciB,KAAKZ,QAAQI,MAAK,SAACc,GACrB,YAAzBA,EAASC,KAAKC,QAAwBF,EAASC,KAAKH,QAAUzB,EAAKwB,YAAYC,MAC/E,EAAKkI,QAAQ,EAAKlJ,QAElB,EAAKK,SAAS,CACVP,UAAU,QAftBc,KAAKP,SAAS,CACVP,UAAU,M,0CAyClBc,KAAKmI,eACLnI,KAAKuI,e,+BA0FC,IAEFa,EAFC,OAkCL,OA9BIA,EADApJ,KAAKf,MAAM2I,UAAUyB,QAAU,EAChBrJ,KAAKf,MAAM2I,UAAU0B,KAAI,SAAC/I,EAAMgJ,GAE3C,OAEI,yBAAKC,IAAKD,EAAG5I,GAAIJ,EAAKuI,UAAWlI,UAAU,QACvC,yBAAKA,UAAU,eAAeE,IAAKP,EAAKkJ,QAAQzF,OAAQhD,IAAI,YAC5D,yBAAKJ,UAAU,uBACX,wBAAIA,UAAU,eAAeL,EAAKkJ,QAAQhI,QAC1C,uBAAGb,UAAU,gBAAgBL,EAAKkJ,QAAQC,OAA1C,WAAuD,8BAE3D,yBAAKlE,MAAM,yBAEP,4BAAQ5E,UAAU,kBAAkBmB,QAAS,kBAAM,EAAK2G,cAAcnI,EAAKuI,aAA3E,qBAKa,UAAtB9I,KAAKf,MAAMuB,OACH,wBAAII,UAAU,oBAAd,iCAMX,wBAAIA,UAAU,oBAAd,gBAMoB,IAAxBZ,KAAKf,MAAMC,SAEP,kBAAC,IAAD,CAAUwB,GAAG,WAIb,yBAAKC,GAAG,SAASC,UAAU,wBACvB,yBAAKA,UAAU,OACX,yBAAKD,GAAG,UAAUC,UAAU,cACxB,yBAAK4E,MAAM,4BACP,2BAAOJ,QAAQ,aAAf,gBACA,4BAAQI,MAAM,eAAe7B,KAAK,YAAY2B,SAAUtF,KAAKkI,mBACzD,4BAAQyB,UAAQ,EAACvF,MAAM,SAAvB,gBACA,4BAAQA,MAAM,aAAd,aACA,4BAAQA,MAAM,YAAd,2BAIR,yBAAKxD,UAAU,wBACX,2BAAOwE,QAAQ,UAAf,YACA,yBAAKI,MAAM,cACP,2BAAOvE,KAAK,QAAQ2I,QAA+B,cAAtB5J,KAAKf,MAAM+I,OAAwBxC,MAAM,mBAAmB7B,KAAK,YAAYS,MAAM,YAAYkB,SAAUtF,KAAKqI,iBAC3I,2BAAO7C,MAAM,mBAAmBJ,QAAQ,aAAxC,WAEJ,yBAAKxE,UAAU,cACX,2BAAOK,KAAK,QAAQuE,MAAM,mBAAmBoE,QAA+B,aAAtB5J,KAAKf,MAAM+I,OAAuBrE,KAAK,WAAWS,MAAM,WAAWkB,SAAUtF,KAAKqI,iBACxI,2BAAO7C,MAAM,mBAAmBJ,QAAQ,YAAxC,WAIR,yBAAKxE,UAAU,sBACX,2BAAOwE,QAAQ,QAAf,UACA,yBAAKI,MAAM,cACP,2BAAOvE,KAAK,QAAQ2I,QAA6B,WAApB5J,KAAKf,MAAM8I,KAAmBvC,MAAM,mBAAmB7B,KAAK,SAASS,MAAM,SAASkB,SAAUtF,KAAKoI,eAChI,2BAAO5C,MAAM,mBAAmBJ,QAAQ,UAAxC,WAEJ,yBAAKxE,UAAU,cACX,2BAAOK,KAAK,QAAQ2I,QAA6B,aAApB5J,KAAKf,MAAM8I,KAAqBvC,MAAM,mBAAmB7B,KAAK,WAAWS,MAAM,WAAWkB,SAAUtF,KAAKoI,eACtI,2BAAO5C,MAAM,mBAAmBJ,QAAQ,YAAxC,eAKZ,yBAAKzE,GAAG,YAAYC,UAAU,aACzBwI,GAIL,yBAAKzI,GAAG,UAAUC,UAAU,aACxB,kBAAC,IAAD,CAAMF,GAAI,CAAEmJ,SAAU,WAAY5K,MAAO,CAAEG,OAAQY,KAAKZ,OAAQyI,QAAS7H,KAAKf,MAAM4I,UAAajH,UAAU,kCAC/EkJ,IAAvB9J,KAAKf,MAAM4I,SACR,0BAAMjH,UAAU,eAAeZ,KAAKf,MAAM4I,QAAQwB,OAAlD,KAGJ,yBAAKvI,IAAK,MAAQ+G,IAAS7G,IAAI,kBALnC,gBAewB,IAA3BhB,KAAK2H,WAAW0B,QACb,kBAACU,EAAA,EAAD,CAAO9B,KAAMjI,KAAKf,MAAMgJ,KAAM+B,OAAQhK,KAAKgJ,cAAeiB,KAAK,KAC3DtI,kBAAgB,gCAChBuI,UAAQ,GACR,kBAACH,EAAA,EAAM/K,OAAP,CAAcmL,aAAW,GACrB,kBAACJ,EAAA,EAAMK,MAAP,CAAaxJ,UAAU,eACnB,yBAAKA,UAAU,WAAWE,IAAKd,KAAK2H,WAAW,GAAG8B,QAAQzF,OAAQhD,IAAI,gBACtE,4BAAKhB,KAAK2H,WAAW,GAAG8B,QAAQhI,QAChC,2BAAG,iDAAuBzB,KAAK2H,WAAW,GAAGmB,YAC7C,uBAAGlI,UAAU,gBAAgBZ,KAAK2H,WAAW,GAAG8B,QAAQC,OAAxD,WAAqE,+BAG7E,kBAACK,EAAA,EAAMM,KAAP,KACI,yBAAKzJ,UAAU,yBACX,uBAAGA,UAAU,WAAb,6BACA,uBAAGA,UAAU,QAAQZ,KAAK2H,WAAW,GAAG8B,QAAQa,cAGpD,yBAAK1J,UAAU,2BACX,yBAAKA,UAAU,OACX,yBAAKA,UAAU,iDACX,4BAAQA,UAAU,yBAAyBmB,QAAS,kBAAM,EAAKkH,YAAY,EAAKtB,WAAW,GAAGmB,aAA9F,0BAMhB,kBAACiB,EAAA,EAAMjH,OAAP,KACI,kBAACyH,EAAA,EAAD,CAAQC,QAAQ,YAAYzI,QAAS/B,KAAKgJ,eAA1C,kB,GAtRfhH,aC4JNyI,E,4MA7JX/E,UAAYzC,IAAMC,Y,EAClByC,aAAe1C,IAAMC,Y,EACrBF,SAAWC,IAAMC,Y,EACjB4C,YAAc7C,IAAMC,Y,EAEpBnE,IAAMD,EAAOC,I,EAEbE,MAAQ,CACJyL,KAAK,CACDjJ,OAAO,KACPC,UAAU,KACVtB,MAAM,KACN0D,SAAS,MAEbtD,OAAO,M,EAgDX2D,YAAc,WACV,EAAK1E,SAAS,CACViL,KAAM,CACFjJ,OAAQ,EAAKiE,UAAUhC,QAAQU,MAC/B1C,UAAW,EAAKiE,aAAajC,QAAQU,MACrChE,MAAO,EAAK4C,SAASU,QAAQU,MAC7BN,SAAU,EAAKgC,YAAYpC,QAAQU,U,EAK/CC,kBAAoB,SAACC,GAKjB,GAJAA,EAAMC,iBAEN,EAAKJ,cAED,EAAKK,UAAUC,WAAY,CAC3B,IAAIiG,EAAO,EAAKzL,MAAMyL,KACtBhL,IAAMC,KAAK,EAAKZ,IAAM,OAAQ2L,GAAMlL,MAAK,SAACc,GACT,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVe,OAAQ,YAEZkG,IACI,eACA,kCACA,WAGJhH,IAAMC,KAAK,EAAKZ,IAAM,gBAEtB,EAAKU,SAAS,CACVe,OAAQ,WAEZkG,IACI,kBACA,2BACA,kBAKZ,EAAKlC,UAAUI,eACf,EAAKC,cACL,EAAKpF,SAAS,CACVe,OAAQ,Y,mEAxFhBR,KAAKwE,UAAY,IAAIM,IAAqB,CACtC6B,OAAQ,KACRC,WAAY,CACRC,eAAgB,CACZ9G,QAAS,2CACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAChB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,wGAAgH,IAAzBC,EAAOG,QAAQJ,KAItJK,OAAO,CACHrH,QAAS,wBACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,sHAAgJ,IAAzBC,EAAOG,QAAQJ,KAGtLjD,SAAS,CACL/D,QAAS,2BACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,kBAA4C,IAAzBC,EAAOG,QAAQJ,KAGlFhD,IAAI,CACAhE,QAAS,sBACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,qBAA+C,IAAzBC,EAAOG,QAAQJ,MAIzFhC,SAAU,CACNC,SAAU,4BACVC,gBAAiB,4CACjBC,QAAS,2BACT9E,MAAO,uBACPiH,YAAa,0C,+BA6DrB,OACA,yBAAK1G,GAAG,QAAQC,UAAU,WAC1B,wBAAIA,UAAU,gCAAd,cAGA,6BAEA,0BAAMA,UAAU,WAAWuE,SAAUnF,KAAKqE,mBACtC,yBAAKzD,UAAU,wBACX,2BAAOwE,QAAQ,SAASxE,UAAU,QAAlC,UACA,2BAAOD,GAAG,SAASC,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,SAAS0B,IAAKrF,KAAK0F,UAAWJ,SAAUtF,KAAKmE,YAAaa,UAAQ,IACxIhF,KAAKwE,UAAUzE,QAAQ,SAAUC,KAAKf,MAAMyL,KAAKjJ,OAAQ,4BAE9D,yBAAKb,UAAU,wBACX,2BAAOwE,QAAQ,YAAYxE,UAAU,QAArC,aACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,YAAY0B,IAAKrF,KAAK2F,aAAcL,SAAUtF,KAAKmE,YAAaa,UAAQ,IAClIhF,KAAKwE,UAAUzE,QAAQ,YAAaC,KAAKf,MAAMyL,KAAKhJ,UAAW,4BAEpE,yBAAKd,UAAU,wBACX,2BAAOwE,QAAQ,WAAWxE,UAAU,QAApC,YACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,WAAW0B,IAAKrF,KAAK8F,YAAaR,SAAUtF,KAAKmE,YAAamD,UAAU,IAAItC,UAAQ,IAC9IhF,KAAKwE,UAAUzE,QAAQ,WAAYC,KAAKf,MAAMyL,KAAK5G,SAAU,sBAElE,yBAAKlD,UAAU,wBACX,2BAAOwE,QAAQ,QAAQxE,UAAU,QAAjC,SACA,2BAAOA,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,QAAQ0B,IAAKrF,KAAKgD,SAAUsC,SAAUtF,KAAKmE,YAAaa,UAAQ,IAC1HhF,KAAKwE,UAAUzE,QAAQ,QAASC,KAAKf,MAAMyL,KAAKtK,MAAO,oBAE5D,yBAAKQ,UAAU,aACO,YAArBZ,KAAKf,MAAMuB,OACP,2BAAOS,KAAK,SAASmD,MAAM,aAAaoB,MAAM,kBAAkBmF,UAAQ,IACxE,2BAAO1J,KAAK,SAASmD,MAAM,aAAaoB,MAAM,0B,GArJ3CxD,aCEL4I,E,4MANX3L,MAAQ,G,uDAEJ,OAAU,6C,GAHM+C,aCST6I,EATF,WACT,OACI,6BAASlK,GAAG,UAAWC,UAAU,QAC/B,wBAAIA,UAAU,aAAd,wBACA,8D,iBC0YKkK,E,4MArYX/L,IAAMD,EAAOC,I,EACbK,OAAS,K,EACTwC,MAAQ,K,EACRmJ,cAAgB,K,EAChBrF,UAAYzC,IAAMC,Y,EAClByC,aAAe1C,IAAMC,Y,EACrB2C,OAAS5C,IAAMC,Y,EACf4C,YAAc7C,IAAMC,Y,EACpB8H,kBAAoB/H,IAAMC,Y,EAC1B+H,kBAAoBhI,IAAMC,Y,EAE1BjE,MAAQ,CACJC,UAAU,EACVC,KAAM,GACNqB,OAAQ,KACRyF,SAAS,EACTD,QAAS,UACTkF,cAAc,EACdC,WAAU,G,EAyFd7C,QAAU,SAAC3H,GACPjB,IAAMW,IAAI,EAAKtB,IAAM,WAAa4B,GAAInB,MAAK,SAACc,GACX,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVN,KAAMmB,EAASC,KAAKpB,KACpBiM,UAAW9K,EAASC,KAAKpB,KAAKiM,UAC9BnF,SAAS,Q,EAOzB9B,YAAc,WACV,EAAK1E,SAAS,CACVN,KAAM,CACFsC,OAAQ,EAAKiE,UAAUhC,QAAQU,MAC/B1C,UAAW,EAAKiE,aAAajC,QAAQU,MACrCN,SAAU,EAAKgC,YAAYpC,QAAQU,MACnCL,IAAK,EAAK8B,OAAOnC,QAAQU,MACzBgH,UAAW,EAAKnM,MAAMmM,UACtBpH,OAAO,EAAK/E,MAAME,KAAK6E,W,EAKnCqH,aAAe,WACX,IAAIC,EAAe,EAAKrM,MAAMmM,UAE1BG,EAAM,CAAEC,MAAO,EAAKR,kBAAkBtH,QAAQU,MAAOqH,MAAOC,IAAO,EAAKT,kBAAkBvH,QAAQU,OAAOuH,OAAO,eACpHL,EAAavC,KAAKwC,GAElB,EAAKP,kBAAkBtH,QAAQU,MAAQ,GACvC,EAAK3E,SAAS,CACV2L,UAAWE,K,EAMnBlF,YAAc,SAAC9B,GACX,EAAK7E,SAAS,CACVuG,QAAS1B,EAAM+B,OAAOC,MAAM,M,EAIpCjC,kBAAoB,SAACC,GAKjB,GAJAA,EAAMC,iBAEN,EAAKJ,cAED,EAAKK,UAAUC,WAEf,GAA2B,YAAvB,EAAKxF,MAAM+G,QACX,EAAKvG,SAAS,CACVyL,cAAc,IAElBtM,EAAQyG,IAAI,EAAKpG,MAAM+G,QAAQrC,MAAM4C,IAAI,EAAKtH,MAAM+G,SAASxG,MAAK,WAC9DZ,EAAQyG,MAAMmB,MAAM,EAAKvH,MAAM+G,QAAQrC,MAAM8C,iBAAiBjH,MAC1D,SAAAT,GACI,EAAKU,SAAS,CACVyL,cAAc,IAElB,IAAI/L,EAAO,EAAKF,MAAME,KACtBO,IAAM6G,IAAI,EAAKxH,IAAM,OAAQ,CAAEI,OAAMC,OAAQ,EAAKA,OAAQL,QAAOS,MAAK,SAACc,GACtC,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVN,KAAM,CACFsC,OAAQ,EAAKiE,UAAUhC,QAAQU,MAC/B1C,UAAW,EAAKiE,aAAajC,QAAQU,MACrCN,SAAU,EAAKgC,YAAYpC,QAAQU,MACnCL,IAAK,EAAK8B,OAAOnC,QAAQU,MACzBgH,UAAW,EAAKnM,MAAMmM,UACtBpH,OAAOjF,GAEXyB,OAAQ,YAEZkG,IACI,sBACA,4CACA,aAGJ,EAAKjH,SAAS,CACVe,OAAQ,WAEZkG,IACI,yBACA,+CACA,uBAMrB,CACH,IAAIvH,EAAO,EAAKF,MAAME,KACtBO,IAAM6G,IAAI,EAAKxH,IAAM,OAAQ,CAAEI,OAAMC,OAAQ,EAAKA,OAAQL,IAAI,EAAKE,MAAME,KAAK6E,SAAUxE,MAAK,SAACc,GAC7D,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACVN,KAAM,CACFsC,OAAQ,EAAKiE,UAAUhC,QAAQU,MAC/B1C,UAAW,EAAKiE,aAAajC,QAAQU,MACrCN,SAAU,EAAKgC,YAAYpC,QAAQU,MACnCL,IAAK,EAAK8B,OAAOnC,QAAQU,MACzBgH,UAAW,EAAKnM,MAAMmM,UACtBpH,OAAO,EAAK/E,MAAME,KAAK6E,QAE3BxD,OAAQ,YAEZkG,IACI,sBACA,4CACA,aAGJ,EAAKjH,SAAS,CACVe,OAAQ,WAEZkG,IACI,yBACA,+CACA,kBAOhB,EAAKlC,UAAUI,eACf,EAAKC,cACL,EAAKpF,SAAS,CACVe,OAAQ,Y,EAMpBoL,gBAAgB,WACZ,IAAIjL,EAAG,EAAKvB,OACZM,IAAMmM,OAAO,EAAK9M,IAAK,QAAQ4B,GAAInB,MAAK,SAACc,GACT,YAAzBA,EAASC,KAAKC,OACbkG,IACI,oBACA,6CACA,WAIJA,IACI,uBACA,+CACA,a,mEA9OM,IAAD,OAgDjB,GA9CI1G,KAAKC,MAAMkJ,MAAMnC,OAAOpF,QACxB5B,KAAK4B,OAAQ,GAGjB5B,KAAKwE,UAAY,IAAIM,IAAqB,CACtC6B,OAAQ,KACRC,WAAY,CACRC,eAAgB,CACZ9G,QAAS,2CACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAChB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,wGAAgH,IAAzBC,EAAOG,QAAQJ,KAItJK,OAAQ,CACJrH,QAAS,wBACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,sHAAgJ,IAAzBC,EAAOG,QAAQJ,KAGtLjD,SAAU,CACN/D,QAAS,2BACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,kBAA4C,IAAzBC,EAAOG,QAAQJ,KAGlFhD,IAAK,CACDhE,QAAS,sBACT+G,KAAM,SAACC,EAAKC,EAAQxC,GAEhB,OAAOA,EAAUyC,QAAQC,UAAUH,EAAK,qBAA+C,IAAzBC,EAAOG,QAAQJ,MAIzFhC,SAAU,CACNC,SAAU,4BACVC,gBAAiB,4CACjBC,QAAS,2BACT9E,MAAO,uBACPiH,YAAa,wCAKhB1I,EAAKwB,YAKN,IAAmB,IAAfH,KAAK4B,MAAgB,CACrB5B,KAAKZ,OAASY,KAAKC,MAAMkJ,MAAMnC,OAAOrG,GACtC,IAAIP,EAAQzB,EAAKwB,YAAYC,MAC7BV,IAAMW,IAAIL,KAAKjB,IAAM,QAAUqB,GAAOZ,MAAK,SAACc,GACX,YAAzBA,EAASC,KAAKC,QAAwBF,EAASC,KAAKpB,KAAKiB,QAAUzB,EAAKwB,YAAYC,MACpF,EAAKkI,QAAQ,EAAKlJ,QAGlB,EAAKK,SAAS,CACVP,UAAU,YAOtBc,KAAKZ,OAASY,KAAKC,MAAMkJ,MAAMnC,OAAOrG,GAEtCjB,IAAMW,IAAIL,KAAKjB,IAAM,YAAciB,KAAKZ,QAAQI,MAAK,SAACc,GACrB,YAAzBA,EAASC,KAAKC,QAAwBF,EAASC,KAAKH,QAAUzB,EAAKwB,YAAYC,MAC/E,EAAKkI,QAAQ,EAAKlJ,QAGlB,EAAKK,SAAS,CACVP,UAAU,YA5B1Bc,KAAKP,SAAS,CACVP,UAAU,M,+BAoMZ,IAAD,OAEL,OAA2B,IAAvBc,KAAKf,MAAMgH,QAGP,yBAAKtF,GAAG,OAAOC,UAAU,mBACI,IAAxBZ,KAAKf,MAAMC,SACN,kBAAC,IAAMuB,SAAP,MACkB,IAAfT,KAAK4B,MACA,kBAAC,IAAMnB,SAAP,KACE,0CACgBT,KAAKf,MAAME,KAAKsC,OAAS,IAAMzB,KAAKf,MAAME,KAAKuC,WAC1D,+BAAQ1B,KAAKf,MAAME,KAAKiB,QAE/B,+CACmBJ,KAAKf,MAAME,KAAKsC,OAAS,IAAMzB,KAAKf,MAAME,KAAKuC,WAGxE,6BACA,yBAAKd,UAAU,OAEX,yBAAKA,UAAU,aAAaE,IAAKd,KAAKf,MAAME,KAAK6E,OAAQhD,IAAI,UAKjE,yBAAKJ,UAAU,OACX,0BAAMA,UAAU,qBAAqBuE,SAAUnF,KAAKqE,mBAChD,yBAAKzD,UAAU,wBACX,2BAAOwE,QAAQ,SAASxE,UAAU,QAAlC,UACA,2BAAOD,GAAG,SAASC,UAAU,eAAeK,KAAK,OAAOmD,MAAOpE,KAAKf,MAAME,KAAKsC,OAAQkC,KAAK,SAAS0B,IAAKrF,KAAK0F,UAAWJ,SAAUtF,KAAKmE,YAAaa,UAAQ,IAC7JhF,KAAKwE,UAAUzE,QAAQ,SAAUC,KAAKf,MAAME,KAAKsC,OAAQ,4BAE9D,yBAAKb,UAAU,wBACX,2BAAOwE,QAAQ,YAAYxE,UAAU,QAArC,aACA,2BAAOA,UAAU,eAAeK,KAAK,OAAO0C,KAAK,YAAYS,MAAOpE,KAAKf,MAAME,KAAKuC,UAAW2D,IAAKrF,KAAK2F,aAAcL,SAAUtF,KAAKmE,YAAaa,UAAQ,IAC1JhF,KAAKwE,UAAUzE,QAAQ,YAAaC,KAAKf,MAAME,KAAKuC,UAAW,4BAEpE,yBAAKd,UAAU,wBACX,2BAAOwE,QAAQ,WAAWxE,UAAU,QAApC,YACA,2BAAOA,UAAU,eAAeK,KAAK,OAAO0C,KAAK,WAAWS,MAAOpE,KAAKf,MAAME,KAAK2E,SAAUuB,IAAKrF,KAAK8F,YAAaR,SAAUtF,KAAKmE,YAAamD,UAAU,IAAItC,UAAQ,IACrKhF,KAAKwE,UAAUzE,QAAQ,WAAYC,KAAKf,MAAME,KAAK2E,SAAU,sBAElE,yBAAKlD,UAAU,wBACX,2BAAOwE,QAAQ,MAAMxE,UAAU,QAA/B,OACA,2BAAOA,UAAU,eAAeK,KAAK,OAAO0C,KAAK,MAAMS,MAAOpE,KAAKf,MAAME,KAAK4E,IAAKsB,IAAKrF,KAAK6F,OAAQP,SAAUtF,KAAKmE,YAAaa,UAAQ,IACxIhF,KAAKwE,UAAUzE,QAAQ,MAAOC,KAAKf,MAAME,KAAK4E,IAAK,iBAExD,yBAAKnD,UAAU,wBACX,2BAAOwE,QAAQ,QAAQxE,UAAU,QAAjC,UACA,2BAAOA,UAAU,8BAA8BK,KAAK,OAAO0C,KAAK,SAAS2B,SAAU,SAACzF,GAAD,OAAO,EAAKuG,YAAYvG,OAC9E,IAA5BG,KAAKf,MAAMiM,cACR,sDAIR,yBAAKtK,UAAU,aACf,2BAAOK,KAAK,SAASmD,MAAM,mBAAmBxD,UAAU,sBAI5C,IAAfZ,KAAK4B,OACF,kBAAC,IAAMnB,SAAP,KACI,yBAAKG,UAAU,iBACX,yBAAKA,UAAU,OACX,yBAAKA,UAAU,UACX,2BAAOwE,QAAQ,kBAAf,wBACA,2BAAOxE,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,iBAAiB0B,IAAKrF,KAAKgL,kBAAmBhG,UAAQ,IACjH,2BAAOpE,UAAU,yBAAyBK,KAAK,OAAO0C,KAAK,iBAAiB0B,IAAKrF,KAAKiL,kBAAmBjG,UAAQ,IACjH,2BAAOpE,UAAU,4BAA4BK,KAAK,SAASmD,MAAM,YAASrC,QAAS/B,KAAKqL,gBAI5F,yBAAKzK,UAAU,yBACX,wBAAIA,UAAU,mBACgBkJ,IAAzB9J,KAAKf,MAAMmM,WAA2D,OAAhCpL,KAAKf,MAAMmM,UAAU/B,QAAmBrJ,KAAKf,MAAMmM,UAAU/B,QAAU,EAExGrJ,KAAK+K,cAAgB/K,KAAKf,MAAMmM,UAAU9B,KAAI,SAAC/I,EAAMgJ,GACnD,OACI,wBAAI3I,UAAU,kBAAkB4I,IAAKD,GACjC,2BAAIhJ,EAAKiL,MAAQ,MAAQjL,EAAKkL,WAIxC,wBAAI7K,UAAU,mBAAkB,0DAM9C,4BAAQA,UAAU,iBAAiBiB,MAAO,CAACiK,OAAQ,aAAc/J,QAAS/B,KAAK4L,iBAA/E,yBAStB,kBAAC,IAAMnL,SAAP,MACkB,IAAfT,KAAK4B,MACA,yBAAKjB,GAAG,QACN,wBAAIC,UAAU,QAAd,kCAEF,kBAAC,IAAD,CAAUF,GAAG,aAU/B,yBAAKC,GAAG,QACJ,wBAAIC,UAAU,QAAd,oB,GA/XQoB,aCqEb+J,E,4MAvEXhN,IAAMD,EAAOC,I,EACbE,MAAQ,CACJ+M,MAAM,GACNjM,QAAS,KACTS,OAAQ,M,mEAGU,IAAD,OAEjBd,IAAMW,IAAIL,KAAKjB,IAAM,SAASS,MAAK,SAACc,GACH,YAAzBA,EAASC,KAAKC,OACd,EAAKf,SAAS,CACVuM,MAAO1L,EAASC,KAAKyL,MACrBxL,OAAQ,YAMZ,EAAKf,SAAS,CACVe,OAAQ,QACRT,QAASO,EAASC,KAAKR,e,+BAWnC,GAAIC,KAAKf,MAAM+M,MAAM3C,QAAU,EAAG,CAC9B,IAAI4C,EAAYjM,KAAKf,MAAM+M,MAAM1C,KAAI,SAAC/I,EAAMgJ,GAExC,OAEI,yBAAKC,IAAKD,EAAG5I,GAAIJ,EAAKnB,OAAQwB,UAAU,QACpC,yBAAKA,UAAU,eAAeE,IAAKP,EAAKpB,KAAK6E,OAAQhD,IAAI,YACzD,yBAAKJ,UAAU,aACX,wBAAIA,UAAU,eAAeL,EAAKpB,KAAKsC,OAAS,IAAMlB,EAAKpB,KAAKuC,WAChE,2BAAOd,UAAU,aAAaL,EAAKpB,KAAKiB,OAAc,8BAE1D,yBAAKoF,MAAM,eACP,kBAAC,IAAD,CAAM9E,GAAI,4BAA8BH,EAAKnB,OAAQwB,UAAU,mBAA/D,mBAMhB,OACI,yBAAKD,GAAG,WAAWC,UAAU,OACxBqL,GAGN,YAAgCnC,IAA5B9J,KAAKf,MAAM+M,MAAM3C,QAA8C,UAAtBrJ,KAAKf,MAAMuB,OAEvD,yBAAKG,GAAG,WAAWC,UAAU,eACzB,wBAAIA,UAAU,QAAd,iCAKJ,yBAAKD,GAAG,WAAWC,UAAU,eACzB,wBAAIA,UAAU,QAAd,oB,GAjEQoB,aCsHbkK,G,4MArHXnN,IAAMD,EAAOC,I,EAEbE,MAAQ,CACJkN,MAAO,GACPpM,QAAS,KACTS,OAAQ,M,mEAGU,IAAD,OACjBd,IAAMW,IAAIL,KAAKjB,IAAM,gBAAgBS,MAAK,SAACc,GACV,YAAzBA,EAASC,KAAKC,OACd,EAAKf,SAAS,CACV0M,MAAO7L,EAASC,KAAK4L,MACrB3L,OAAQ,YAKZ,EAAKf,SAAS,CACVe,OAAQ,QACRT,QAASO,EAASC,KAAKR,e,iCAU7BuE,EAAO3D,EAAI4I,GAAG,IAAD,OACnBjF,EAAMC,iBAEN,IAAIkH,EAAMC,IAAOpH,EAAM+B,OAAO,GAAGjC,OAAOuH,OAAO,cAC3CS,EAAK9H,EAAM+B,OAAO,GAAGjC,MACrBsG,EAAM1K,KAAKf,MAAMkN,MAAM5C,GAAGmB,KAC9BA,EAAK0B,KAAKA,EACV1B,EAAKe,MAAMA,EACXf,EAAK2B,OAAO,cAEZ3M,IAAM6G,IAAIvG,KAAKjB,IAAM,OAAQ,CAAC2L,OAAM/J,OAAKnB,MAAK,SAACc,GAC3C,GAA6B,YAAzBA,EAASC,KAAKC,OAAsB,CACpC,IAAI8L,EAAS,EAAKrN,MAAMkN,MACxBG,EAASC,OAAOhD,EAAE,GAClB,EAAK9J,SAAS,CACV0M,MAAOG,EACP9L,OAAQ,YAEZkG,IACI,8BACA,qDACA,WAEJ,EAAK7B,cAELnF,IAAMC,KAAK,EAAKZ,IAAI,qBAAsB,CAAC2L,cAG3ClC,QAAQC,IAAInI,EAASC,KAAKiM,OAC1B9F,IACI,uCACA,0CACA,c,+BAMN,IAAD,OACL,GAAI1G,KAAKf,MAAMkN,MAAM9C,QAAU,EAAG,CAC9B,IAAIoD,EAAYzM,KAAKf,MAAMkN,MAAM7C,KAAI,SAAC/I,EAAMgJ,GACxC,OACI,wBAAI3I,UAAU,kBAAkB4I,IAAKD,GACjC,yBAAK3I,UAAU,OACX,yBAAKA,UAAU,SACX,4BAAKL,EAAKmK,KAAKvL,KAAKsC,OAAS,IAAMlB,EAAKmK,KAAKvL,KAAKuC,WAClD,2BAAInB,EAAKmK,KAAKvL,KAAKiB,QAE3B,0BAAMQ,UAAU,QAAQuE,SAAU,SAACtF,GAAD,OAAK,EAAK6M,WAAW7M,EAAGU,EAAKoM,OAAQpD,KACnE,yBAAK3I,UAAU,OACX,yBAAKA,UAAU,OACnB,2BAAOA,UAAU,mBAAmBK,KAAK,OAAO0C,KAAK,YAAaqB,UAAQ,KAE1E,yBAAKpE,UAAU,OACf,2BAAOA,UAAU,oBAAoBK,KAAK,OAAO0C,KAAK,WAAYiJ,IAAI,QAAQC,IAAI,QAAQ7H,UAAQ,KAElG,2BAAOpE,UAAU,4BAA4BK,KAAK,SAAUmD,MAAM,mBASlF,OACI,wBAAIxD,UAAU,cACT6L,GAGN,YAAgC3C,IAA5B9J,KAAKf,MAAMkN,MAAM9C,QAA8C,UAAtBrJ,KAAKf,MAAMuB,OAEvD,yBAAKG,GAAG,WAAWC,UAAU,eACzB,wBAAIA,UAAU,QAAd,8BAKJ,yBAAKD,GAAG,WAAWC,UAAU,eACzB,wBAAIA,UAAU,QAAd,oB,GA9GKoB,a,SCGnB8K,I,OAAYC,aAAgBrB,MAuMnBsB,G,4MApMXC,WAAa,G,EACblO,IAAMD,EAAOC,I,EACbmO,QAAU,G,EACVjO,MAAQ,CACJkN,MAAO,GACPpM,QAAS,KACTS,OAAQ,KACR2M,WAAW,EACXlF,MAAM,G,EA0BVmF,kBAAoB,WAChB,EAAKH,WAAa,GAClB,EAAKhO,MAAMkN,MAAMvD,SAAQ,SAACC,EAASU,GAC/B,IAAI8D,EAAexE,EAAQ6B,KAAKe,MAAM5H,MAAM,KACxCyJ,EAAczE,EAAQ6B,KAAK0B,KAAKvI,MAAM,KAC1C,EAAKoJ,WAAWlE,KACZ,CACIwE,MAAO1E,EAAQ6B,KAAKvL,KAAKsC,OAAS,IAAMoH,EAAQ6B,KAAKvL,KAAKuC,UAC1D8L,MAAO,IAAIC,KAAKC,SAASL,EAAa,IAAKK,SAASL,EAAa,IAAM,EAAGK,SAASL,EAAa,IAAKK,SAASJ,EAAY,IAAKI,SAASJ,EAAY,IAAK,GACzJK,IAAK,IAAIF,KAAKC,SAASL,EAAa,IAAKK,SAASL,EAAa,IAAM,EAAGK,SAASL,EAAa,IAAKK,SAASJ,EAAY,IAAM,EAAGI,SAASJ,EAAY,IAAK,GAC3J3M,GAAIkI,EAAQ8D,SAGpB,EAAK9H,kB,EAKb6D,cAAgB,SAACpE,GACb,EAAKrF,MAAMkN,MAAMvD,SAAQ,SAACC,EAASU,GAC3BjF,EAAM3D,KAAOkI,EAAQ8D,SACrB,EAAKO,QAAQnE,KAAKF,GAClB,EAAKpJ,SAAS,CACVwI,MAAM,S,EAMtBe,cAAgB,WACZ,EAAKvJ,SAAS,CACVwI,MAAM,IAEV,EAAKiF,QAAU,I,mEAxDG,IAAD,OACjBxN,IAAMW,IAAIL,KAAKjB,IAAM,gBAAgBS,MAAK,SAACc,GACV,YAAzBA,EAASC,KAAKC,QACd,EAAKf,SAAS,CACV0M,MAAO7L,EAASC,KAAK4L,MACrB3L,OAAQ,YAGZ,EAAK4M,oBAEL,EAAKvI,eAGL,EAAKpF,SAAS,CACVe,OAAQ,QACRT,QAASO,EAASC,KAAKR,e,iCA6C5BuE,EAAO3D,GAAK,IAAD,OAClB2D,EAAMC,iBAEN,IAAIkH,EAAQC,IAAOpH,EAAM+B,OAAO,GAAGjC,OAAOuH,OAAO,cAC7CS,EAAO9H,EAAM+B,OAAO,GAAGjC,MACvBsG,EAAO1K,KAAKkN,QAAQ,GAAGxC,KAC3BA,EAAK0B,KAAOA,EACZ1B,EAAKe,MAAQA,EACbf,EAAK2B,OAAS,cAEd3M,IAAM6G,IAAIvG,KAAKjB,IAAM,OAAQ,CAAE2L,OAAM/J,OAAMnB,MAAK,SAACc,GAChB,YAAzBA,EAASC,KAAKC,QACd,EAAK4M,oBACL,EAAKpE,gBACLtC,IACI,8BACA,qDACA,WAEJ,EAAK7B,cACLnF,IAAMC,KAAK,EAAKZ,IAAM,mBAAoB,CAAE2L,UAG5ChE,IACI,uCACA,0CACA,c,wCAMEwG,GACd,IAAIxC,EAAOwC,EACXxN,IAAMC,KAAKK,KAAKjB,IAAM,qBAAsB,CAAE2L,SAAQlL,MAAK,SAACc,GAC3B,YAAzBA,EAASC,KAAKC,QACdkG,IACI,+BACA,qDACA,gB,+BAQN,IAAD,OACL,OACI,kBAAC,IAAMjG,SAAP,KACI,yBAAKG,UAAU,yBACX,kBAAC,KAAD,CACIkM,UAAWA,GACXc,OAAQ5N,KAAKiN,WACbY,cAAc,QACdC,YAAY,MACZC,YAAY,OACZC,cAAe,SAACnO,GACZ,EAAK6I,cAAc7I,IAEvB+M,IAAK,IAAIa,KAAK,KAAM,EAAG,EAAG,EAAG,GAC7BZ,IAAK,IAAIY,KAAK,KAAM,EAAG,EAAG,GAAI,GAC9B5L,MAAO,CAAEoM,OAAQ,IAAKnC,OAAQ,WASb,IAAxB9L,KAAKkN,QAAQ7D,QACV,kBAACU,EAAA,EAAD,CAAO9B,KAAMjI,KAAKf,MAAMgJ,KAAM+B,OAAQhK,KAAKgJ,cAAeiB,KAAK,KAC3DtI,kBAAgB,gCAChBuI,UAAQ,GACR,kBAACH,EAAA,EAAM/K,OAAP,CAAcmL,aAAW,GACrB,kBAACJ,EAAA,EAAMK,MAAP,CAAaxJ,UAAU,eACnB,4BAAKZ,KAAKkN,QAAQ,GAAGxC,KAAKe,MAAQ,MAAQzL,KAAKkN,QAAQ,GAAGxC,KAAK0B,MAC/D,4BAAKpM,KAAKkN,QAAQ,GAAGxC,KAAKvL,KAAKsC,OAAS,IAAMzB,KAAKkN,QAAQ,GAAGxC,KAAKvL,KAAKuC,aAGhF,kBAACqI,EAAA,EAAMM,KAAP,KACI,yBAAKzJ,UAAU,yBACX,wBAAIA,UAAU,QAAd,aAAgCZ,KAAKkN,QAAQ,GAAGxC,KAAKvL,KAAK2E,UAC1D,wBAAIlD,UAAU,QAAd,UAA6BZ,KAAKkN,QAAQ,GAAGxC,KAAKvL,KAAKiB,QAE3D,yBAAKQ,UAAU,2BAEX,0BAAMA,UAAU,SAASuE,SAAU,SAACtF,GAAD,OAAO,EAAK6M,WAAW7M,EAAG,EAAKqN,QAAQ,GAAGP,UACzE,yBAAK/L,UAAU,OACX,yBAAKA,UAAU,OACX,2BAAOA,UAAU,mBAAmBK,KAAK,OAAO0C,KAAK,YAAYqB,UAAQ,KAE7E,yBAAKpE,UAAU,OACX,2BAAOA,UAAU,oBAAoBK,KAAK,OAAO0C,KAAK,WAAWiJ,IAAI,QAAQC,IAAI,QAAQ7H,UAAQ,KAErG,yBAAKpE,UAAU,OACX,2BAAOA,UAAU,sBAAsBK,KAAK,SAASmD,MAAM,uBAKnE,yBAAKxD,UAAU,OACX,yBAAKA,UAAU,iDACX,4BAAQA,UAAU,yBAAyBmB,QAAS,kBAAM,EAAKmM,kBAAkB,EAAKhB,QAAQ,GAAGxC,QAAjG,2BAMpB,kBAACX,EAAA,EAAMjH,OAAP,KACI,kBAACyH,EAAA,EAAD,CAAQC,QAAQ,YAAYzI,QAAS/B,KAAKgJ,eAA1C,iB,GAvLHhH,a,SCiIVmM,G,4MAjIXpP,IAAMD,EAAOC,I,EACbK,OAAS,K,EACTH,MAAQ,CACJC,UAAU,EACVC,KAAM,GACNqB,OAAQ,KACRyF,SAAQ,G,EAyBZqC,QAAU,SAAC3H,GACPjB,IAAMW,IAAI,EAAKtB,IAAM,WAAa4B,GAAInB,MAAK,SAACc,GACX,YAAzBA,EAASC,KAAKC,SACd,EAAKf,SAAS,CACVN,KAAMmB,EAASC,KAAKpB,KACpB8G,SAAQ,KAGkB,IAA1B,EAAKhH,MAAME,KAAKyC,OAChB,EAAKnC,SAAS,CACVP,UAAU,S,mEAhCR,IAAD,YACQ4K,IAArBnL,EAAKwB,YACLH,KAAKP,SAAS,CACVP,UAAU,KAIdc,KAAKZ,OAASY,KAAKC,MAAMkJ,MAAMnC,OAAOoH,QAEtC1O,IAAMW,IAAIL,KAAKjB,IAAM,YAAciB,KAAKZ,QAAQI,MAAK,SAACc,GACrB,YAAzBA,EAASC,KAAKC,QAAwBF,EAASC,KAAKH,QAAUzB,EAAKwB,YAAYC,MAC/E,EAAKkI,QAAQ,EAAKlJ,QAGlB,EAAKK,SAAS,CACVP,UAAU,U,+BAwB1B,OAAwB,IAArBc,KAAKf,MAAMgH,QAEV,yBAAKtF,GAAG,QAAQC,UAAU,mBACG,IAAxBZ,KAAKf,MAAMC,SACN,kBAAC,IAAMuB,SAAP,KACE,gDACsBT,KAAKf,MAAME,KAAKsC,OAAS,IAAMzB,KAAKf,MAAME,KAAKuC,WAErE,6BACA,kBAAC,IAAD,KACI,yBAAKf,GAAG,SACJ,kBAAC,IAAD,CAAU0N,OAAK,EAACC,KAAK,IAAI5N,GAAI,gBAAkBV,KAAKZ,OAAS,cAG7D,kBAAC,KAAD,CAAQwB,UAAU,iBACd,kBAAC,KAAD,KACI,kBAAC,KAAD,CAAYF,GAAI,gBAAkBV,KAAKZ,OAAS,aAAhD,aAEJ,kBAAC,KAAD,KACI,kBAAC,KAAD,CAAYsB,GAAI,gBAAkBV,KAAKZ,OAAS,UAAhD,UAEJ,kBAAC,KAAD,KACI,kBAAC,KAAD,CAAYsB,GAAI,gBAAkBV,KAAKZ,OAAS,eAAhD,gBAQR,kBAAC,IAAD,KAEI,kBAAC,IAAD,CAAOmP,KAAM,gBAAkBvO,KAAKZ,OAAS,aACzC,kBAAC,EAAD,OAEJ,kBAAC,IAAD,CAAOmP,KAAM,gBAAkBvO,KAAKZ,OAAS,UACzC,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOmP,KAAM,gBAAkBvO,KAAKZ,OAAS,eACzC,kBAAC,GAAD,OAKJ,kBAAC,IAAD,CAAOiP,OAAK,EAACE,KAAK,qBAAqBC,UAAW1D,IAClD,kBAAC,IAAD,CAAOyD,KAAM,+BACTE,OACI,SAACxO,GACG,IAAIb,EAASa,EAAMkJ,MAAMnC,OAAOrG,GAEhC,OACI,kBAAC,IAAD,CAAUD,GAAI,WAAatB,EAAS,KAF9B,WAepC,kBAAC,IAAMqB,SAAP,KACE,kBAAC,IAAD,CAAUC,GAAG,aASjB,gD,GA5HMsB,aCWX0M,G,4MAfXzP,MAAQ,G,kEAGOe,KAAKC,MAAM0O,SAAS1P,MAAMG,OACzBY,KAAKC,MAAM0O,SAAS1P,MAAM4I,U,+BAMtC,OAAU,+C,GAdI7F,aCsFP4M,G,4MAvEX3P,MAAQ,CACJ4P,UAAS,G,EAEb3O,OAAO,WACH,EAAKT,SAAS,CACVoP,UAAS,K,EAIjBC,QAAQ,WACJ,EAAKrP,SAAS,CACVoP,UAAS,K,uDAMP,IAAD,OACL,OACI,kBAAC,IAAD,MACuB,IAAtB7O,KAAKf,MAAM4P,SACN,kBAAC,EAAD,CAAQ3O,QAAQ,IAChB,kBAAC,EAAD,MAEE,kBAAC,IAAD,KAEI,kBAAC,IAAD,CAAOmO,OAAK,EAACE,KAAK,IAAIC,UAAWvM,IAEjC,kBAAC,IAAD,CAAOoM,OAAK,EAACE,KAAK,QAAQC,UAAWvM,IACrC,kBAAC,IAAD,CAAOoM,OAAK,EAACE,KAAK,SAASC,UAAWzL,IACtC,kBAAC,IAAD,CAAOsL,OAAK,EAACE,KAAK,YAAYC,UAAW/I,IACzC,kBAAC,IAAD,CAAO4I,OAAK,EAACE,KAAK,aAAaC,UAAW5D,IAC1C,kBAAC,IAAD,CAAOyD,OAAK,EAACE,KAAK,eAAeC,UAAW9G,IAC5C,kBAAC,IAAD,CAAO2G,OAAK,EAACE,KAAK,WAAWC,UAAWE,KACxC,kBAAC,IAAD,CAAOL,OAAK,EAACE,KAAK,gBAAgBC,UAAW1D,IAC7C,kBAAC,IAAD,CAAOuD,OAAK,EAACE,KAAK,wBAAwBC,UAAWL,KACrD,kBAAC,IAAD,CAAOE,OAAK,EAACE,KAAK,SAASC,UAAW/D,IACtC,kBAAC,IAAD,CAAO4D,OAAK,EAACE,KAAK,UAAUE,OACxB,WAEQ,OADA,EAAKvO,SAED,kBAAC,IAAD,CAAUQ,GAAG,SAK7B,kBAAC,IAAD,CAAO2N,OAAK,EAACE,KAAK,WAAWE,OACzB,WAEQ,OADA,EAAKK,UAED,kBAAC,IAAD,CAAUpO,GAAG,SAO7B,kBAAC,IAAD,CAAO8N,UAAW3D,KAM1B,kBAAC,EAAD,W,GAhEK7I,aCDN+M,OAXf,WAIE,OACE,yBAAKnO,UAAU,OACb,kBAAC,GAAD,QCCAoO,GAAcC,QACW,cAA7BC,OAAOP,SAASQ,UAEe,UAA7BD,OAAOP,SAASQ,UAEhBD,OAAOP,SAASQ,SAAShG,MACvB,2DAsCN,SAASiG,GAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACT7P,MAAK,SAAAkQ,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB3Q,QACfsQ,UAAUC,cAAcO,YAI1BvH,QAAQC,IACN,iHAKE6G,GAAUA,EAAOU,UACnBV,EAAOU,SAASN,KAMlBlH,QAAQC,IAAI,sCAGR6G,GAAUA,EAAOW,WACnBX,EAAOW,UAAUP,WAO5B9P,OAAM,SAAA4M,GACLhE,QAAQgE,MAAM,4CAA6CA,MCvFjE0D,IAASzB,OACL,kBAAC,GAAD,MACF0B,SAASC,eAAe,SDWnB,SAAkBd,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIc,IAAIC,IAAwBpB,OAAOP,SAAS4B,MACpDC,SAAWtB,OAAOP,SAAS6B,OAIvC,OAGFtB,OAAOuB,iBAAiB,QAAQ,WAC9B,IAAMpB,EAAK,UAAMiB,IAAN,sBAEPtB,KAgEV,SAAiCK,EAAOC,GAEtCoB,MAAMrB,EAAO,CACXsB,QAAS,CAAE,iBAAkB,YAE5BnR,MAAK,SAAAc,GAEJ,IAAMsQ,EAActQ,EAASqQ,QAAQtQ,IAAI,gBAEnB,MAApBC,EAASE,QACO,MAAfoQ,IAA8D,IAAvCA,EAAYzJ,QAAQ,cAG5CoI,UAAUC,cAAcqB,MAAMrR,MAAK,SAAAkQ,GACjCA,EAAaoB,aAAatR,MAAK,WAC7B0P,OAAOP,SAASoC,eAKpB3B,GAAgBC,EAAOC,MAG1B1P,OAAM,WACL4I,QAAQC,IACN,oEAvFAuI,CAAwB3B,EAAOC,GAI/BC,UAAUC,cAAcqB,MAAMrR,MAAK,WACjCgJ,QAAQC,IACN,iHAMJ2G,GAAgBC,EAAOC,OCjC/BE,I,mBCjBAyB,EAAOC,QAAU,IAA0B,kC,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,sC","file":"static/js/main.75ef800a.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig={\r\n    apiKey: \"AIzaSyCpodxaWgqwls4795dWt3ZbqGEm9Ltt6fY\",\r\n    authDomain: \"proyecto-consulta-firebase.firebaseapp.com\",\r\n    databaseURL: \"https://proyecto-consulta-firebase.firebaseio.com\",\r\n    projectId: \"proyecto-consulta-firebase\",\r\n    storageBucket: \"proyecto-consulta-firebase.appspot.com\",\r\n    messagingSenderId: \"1072801915077\",\r\n    appId: \"1:1072801915077:web:3ea752b2a8a7839bb150ac\"\r\n  };\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\nexport const db = firebase.firestore();\r\nexport const storage = firebase.storage();","var Global={\r\n      /* url: 'http://localhost:3000/' */    \r\n      url: 'https://react-optica.herokuapp.com/'   \r\n};\r\n\r\nexport default Global","import React, { Component } from 'react';\r\nimport logo from '../assets/images/logo.png';\r\nimport { NavLink , Link, Redirect} from 'react-router-dom';\r\nimport { auth } from '../db';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\n\r\nclass Header extends Component {\r\n\r\n    url = Global.url;\r\n\r\n    state = {\r\n        identity: false,\r\n        user: {},\r\n        userId: null,\r\n        redirect:false,\r\n\r\n    }\r\n\r\n    componentDidUpdate() {\r\n\r\n        if (this.props.logged===true && auth.currentUser!=null && this.state.identity === false) {\r\n            let email = auth.currentUser.email\r\n            axios.get(this.url + 'user/' + email).then((response) => {\r\n                if (response.data.status === 'success') {\r\n                    this.setState({\r\n                        identity: true,\r\n                        user: response.data.user,\r\n                        userId: response.data.userId,\r\n                        redirect:false\r\n                    });\r\n                } else {\r\n                    this.setState({\r\n                        identity: null\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    logout=()=>{\r\n        auth.signOut().then(()=>{\r\n            this.setState({\r\n                identity: false,\r\n                user: {},\r\n                userId: null,\r\n                redirect:true\r\n            })\r\n\r\n            axios.post(this.url + 'carrito/cerrar');\r\n\r\n        }).catch((e)=>{\r\n            alert(e.message)\r\n        });\r\n        \r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n\r\n            <React.Fragment>\r\n                \r\n            {this.state.redirect===true &&\r\n                            \r\n                <Redirect to=\"/signout\"/>\r\n            }\r\n            \r\n\r\n            <header id=\"header\" className=\"container-fluid\">\r\n                <nav className=\"navbar navbar-expand-lg navbar-light\" id=\"barra\" >\r\n                    <div className=\"navbar-brand\">\r\n                        <NavLink to=\"/\" activeClassName=\"active\"><img src={logo} className=\"app-logo\" id=\"logo\" alt=\"Logotipo\" /></NavLink>\r\n                    </div>\r\n                    <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <span className=\"navbar-toggler-icon\"></span>\r\n                    </button>\r\n                    <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n\r\n                        <ul className=\"navbar-nav mr-auto\">\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to=\"/\" activeClassName=\"active\">Inicio</NavLink>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to=\"/servicios\" activeClassName=\"active\">Servicios</NavLink>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to={\"/tienda/\"+this.state.userId }activeClassName=\"active\">Tienda</NavLink>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                                <NavLink to=\"/citas\" activeClassName=\"active\">Citas</NavLink>\r\n                            </li>\r\n                        </ul>\r\n                        <div className=\"dropdown-divider \"></div>\r\n                        <ul className=\"navbar-nav navbar-right\">\r\n\r\n                            {this.state.identity === false || this.state.identity === null\r\n                                ? <React.Fragment>\r\n                                    <li className=\"nav-item\">\r\n                                        <NavLink to=\"/register\" activeClassName=\"active\">Registro</NavLink>\r\n                                    </li>\r\n                                    <li className=\"nav-item\">\r\n                                        <NavLink to=\"/login\" activeClassName=\"active\">Iniciar sesion</NavLink>\r\n                                    </li>\r\n                                </React.Fragment>\r\n                                : <React.Fragment>\r\n                                    <li className=\"nav-item dropdown\" >\r\n                                        <p className=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                                            {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                                        </p>\r\n\r\n                                        <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n                                            {this.state.user.admin === false \r\n\r\n                                                ?<React.Fragment>\r\n                                                <Link className=\"dropdown-item\" to={\"/miperfil/\" + this.state.userId} >Mi perfil</Link>\r\n                                                 {/* <Link className=\"dropdown-item\" to={\"/mispedidos/\" + this.state.userId} activeClassName=\"active\">Mis pedidos</Link> */}\r\n                                                </React.Fragment>\r\n                                                : <React.Fragment>\r\n                                                <Link className=\"dropdown-item\" to={\"/adminperfil/\" + this.state.userId} >Administracion</Link>\r\n                                                \r\n                                                </React.Fragment>\r\n                                            }\r\n                                            <div className=\"dropdown-divider\"></div>\r\n                                            <Link className=\"dropdown-item pointer\" style={{cursor: \"pointer\"}} onClick={this.logout}>Cerrar sesion</Link>\r\n                                        </div> \r\n                                    </li>\r\n                                    </React.Fragment>\r\n                                }\r\n                                \r\n                            </ul>\r\n\r\n                            {/*AÃ‘ADIR PARTE DEL USUARIO Y BOTONES DE INICIAR SESION O REGISTRO*/ }\r\n                        \r\n\r\n            </div >\r\n                    </nav >\r\n                \r\n            </header >\r\n            </React.Fragment>\r\n         );\r\n    }\r\n}\r\n\r\nexport default Header;","import React, { Component } from 'react';\r\n import \"react-responsive-carousel/lib/styles/carousel.min.css\"; \r\n import { Carousel } from 'react-responsive-carousel'; \r\n\r\nimport a from '../assets/images/a.png'\r\nimport b from '../assets/images/b.png'\r\nimport c from '../assets/images/c.png'\r\n import d from '../assets/images/d.png' \r\n\r\nclass Home extends Component {\r\n    state = {}\r\n    render() {\r\n        return (\r\n            <div id=\"home\">\r\n                <div id=\"slider\" className=\" container-fluid p-0\">\r\n                   <Carousel\r\n                        showArrows={false}\r\n                        showThumbs={false}\r\n                        infiniteLoop={true}\r\n                        autoPlay={true}\r\n                        interval={6000}\r\n                        transitionTime={1000}\r\n                        showStatus={false}\r\n                        showIndicators={false}\r\n                    >\r\n                        <div>\r\n                            <img src={a} alt=\"carrousel1\"  />\r\n                        </div>\r\n                        <div>\r\n                            <img src={d} alt=\"carrousel4\"  />\r\n                        </div>\r\n                        <div>\r\n                            <img src={b} alt=\"carrousel2\"  />\r\n                        </div>\r\n                        <div>\r\n                            <img src={c} alt=\"carrousel3\"  />\r\n                        </div>\r\n                        \r\n\r\n                    </Carousel> \r\n                    </div>\r\n                    \r\n                \r\n                <div className=\"center\">\r\n                <h1 className=\"titulo\">Bienvenido a Tope Vision</h1>\r\n                    <div id=\"content\">\r\n\r\n\r\n                        <hr></hr>\r\n                        <div>\r\n                            <p>Contenido de prueba</p>\r\n                            <p>dvdsvdf</p>\r\n                        </div>\r\n                        <div>\r\n                            <p>Contenido de prueba</p>\r\n                            <p>dvdsvdf</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nconst Footer=()=>{\r\n        return ( \r\n        <footer id=\"footer\">\r\n        <div className=\"center\">\r\n            <p>\r\n                &copy; Alvaro Torrente Perez\r\n            </p>\r\n        </div>\r\n    </footer> );\r\n    \r\n}\r\n \r\nexport default Footer;\r\n","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport { auth } from '../db'\r\nimport firebase from 'firebase';\r\n\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    emailRef = React.createRef();\r\n    passwordRef = React.createRef();\r\n\r\n    url = Global.url;\r\n\r\n    state = {\r\n        email: null,\r\n        password: null,\r\n        status: null,\r\n        user: {},\r\n    };\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n\r\n            },\r\n        });\r\n    }\r\n\r\n    inicioGoogle = () => {\r\n        var provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n        auth.signInWithPopup(provider).then((result) => {\r\n            var current = result.user;\r\n            let name = current.displayName.split(\" \");\r\n            let user = {\r\n                nombre: name[0],\r\n                apellidos: name[1],\r\n                email: current.email,\r\n                telefono: \"\",\r\n                dni: \"\",\r\n                imagen:\"https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66\"\r\n            }\r\n            axios.post(this.url + 'user2', user).then((response)=>{\r\n                if(response.data){\r\n                    this.setState({\r\n                        status: 'success'\r\n                    })\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    inicioFacebook = () => {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n\r\n        auth.signInWithPopup(provider).then((result) => {\r\n            var current = result.user;\r\n            let name = current.displayName.split(\" \");\r\n            let user = {\r\n                nombre: name[0],\r\n                apellidos: name[1],\r\n                email: current.email,\r\n                telefono: \"\",\r\n                dni: \"\",\r\n                imagen: \"https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66\"\r\n            }\r\n            axios.post(this.url + 'user2', user).then((response)=>{\r\n                if(response.data){\r\n                    this.setState({\r\n                        status: 'success'\r\n                    })\r\n                }\r\n            });\r\n            \r\n        })\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            email: this.emailRef.current.value,\r\n            password: this.passwordRef.current.value\r\n        });\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState();\r\n\r\n        if (this.validator.allValid()) {\r\n            auth.signInWithEmailAndPassword(this.state.email, this.state.password).then(() => {\r\n                this.setState({\r\n                    password: null,\r\n                    status: 'success'\r\n                })\r\n            }).catch((err) => {\r\n                alert(err.message)\r\n            })\r\n        } else {\r\n            this.validator.showMessages();\r\n            this.forceUpdate();\r\n            this.setState({\r\n                status: 'failed'\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.status === 'success') {\r\n            return (\r\n                <Redirect to=\"/logged\" />\r\n            )\r\n        }\r\n\r\n        return (\r\n\r\n            <div id=\"login\" className=\" col-12\">\r\n\r\n                <h2 className=\"text-center p-3 text-md-left\">\r\n                    Iniciar sesion\r\n                </h2>\r\n                <hr />\r\n\r\n                <form className=\"col-md-5\" onSubmit={this.recibirFormulario} >\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"email\" className=\"ml-2\">Email</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"email\" ref={this.emailRef} onChange={this.changeState} required />\r\n                        {this.validator.message('email', this.state.email, 'required|email')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"password\" className=\"ml-2\">ContraseÃ±a</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"password\" name=\"password\" ref={this.passwordRef} onChange={this.changeState} required minlength=\"6\" />\r\n                        {this.validator.message('password', this.state.password, 'required')}\r\n\r\n                    </div>\r\n                    <div className=\"clearfix\"></div>\r\n                    <input type=\"submit\" value=\"Iniciar sesion\" class=\"btn btn-success\" />\r\n                </form>\r\n\r\n                <div className=\"botonessesion\">\r\n                    <button className=\"btngoogle row\" onClick={() => this.inicioGoogle()}><img src=\"https://www.gstatic.com/mobilesdk/160512_mobilesdk/auth_service_google.svg\" alt=\"google-boton\" /> <p>Inicia sesion con Google</p></button>\r\n                    <button className=\"btnfacebook row\" onClick={() => this.inicioFacebook()}><img src=\"https://www.gstatic.com/mobilesdk/160409_mobilesdk/images/auth_service_facebook.svg\" alt=\"facebook-boton\" /> <p>Inicia sesion con Facebook</p></button>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default Login;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport swal from 'sweetalert';\r\nimport { storage } from '../db';\r\n\r\n\r\nclass Register extends Component {\r\n\r\n    nombreRef = React.createRef();\r\n    apellidosRef = React.createRef();\r\n    emailRef = React.createRef();\r\n    passwordRef = React.createRef();\r\n    password2Ref = React.createRef();\r\n    dniRef = React.createRef();\r\n    telefonoRef = React.createRef();\r\n\r\n    url = Global.url;\r\n\r\n    state = {\r\n        user: {},\r\n        status: null,\r\n        password2: null,\r\n        archivo: 'default',\r\n        loading: false\r\n\r\n    };\r\n\r\n    confirmpassword = null;\r\n\r\n\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            locale: 'es',\r\n            validators: {\r\n                names_surnames: {\r\n                    message: 'El campo debe contener letras y espacios',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]+(\\s*[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]*)*[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]+$/) && params.indexOf(val) === -1\r\n                    },\r\n\r\n                },\r\n                email2: {\r\n                    message: 'El email no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^(?:[^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*|\"[^\\n\"]+\")@(?:[^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\]\\.,;:\\s@\"]{2,63}$/i) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                telefono: {\r\n                    message: 'El telefono no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^[896]\\d{8}$/) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                dni: {\r\n                    message: 'El DNI no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^\\d{8}[a-zA-Z]$/) && params.indexOf(val) === -1\r\n                    },\r\n                }\r\n            },\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n                alpha_space: 'Solo se permiten letras y espacios'\r\n\r\n            },\r\n        });\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            user: {\r\n                nombre: this.nombreRef.current.value,\r\n                apellidos: this.apellidosRef.current.value,\r\n                email: this.emailRef.current.value,\r\n                password: this.passwordRef.current.value,\r\n                telefono: this.telefonoRef.current.value,\r\n                dni: this.dniRef.current.value,\r\n            },\r\n            password2: this.password2Ref.current.value\r\n        });\r\n        if (this.state.password2 === this.state.user.password) {\r\n\r\n            this.confirmpassword = true\r\n\r\n\r\n        } else {\r\n\r\n            this.confirmpassword = false\r\n        }\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState()\r\n\r\n        this.ejecutarFormulario();\r\n\r\n    }\r\n\r\n    recogerFoto = (event) => {\r\n        this.setState({\r\n            archivo: event.target.files[0]\r\n        })\r\n    }\r\n\r\n    ejecutarFormulario = () => {\r\n        if (this.confirmpassword === true) {\r\n            if (this.validator.allValid()) {\r\n                if (this.state.archivo !== 'default') {\r\n                    this.setState({\r\n                        loading:true\r\n                    })\r\n                    storage.ref(this.state.archivo.name).put(this.state.archivo).then(() => {\r\n                        storage.ref().child(this.state.archivo.name).getDownloadURL().then(\r\n                            url => {\r\n                                this.setState({\r\n                                    loading:false\r\n                                })\r\n                                let user = this.state.user;\r\n                                axios.post(this.url + 'user', { user, url }).then((response) => {\r\n                                    if (response.data.status === 'success') {\r\n                                        this.setState({\r\n                                            status: 'success'\r\n                                        });\r\n                                        swal(\r\n                                            'Usuario registrado',\r\n                                            'Te has registrado correctamente',\r\n                                            'success'\r\n                                        );\r\n                                    } else {\r\n                                        this.setState({\r\n                                            status: 'failed'\r\n                                        });\r\n                                    }\r\n                                });\r\n                            });\r\n                    });\r\n                } else {\r\n                    let user = this.state.user;\r\n                    let url = 'https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66';\r\n                    axios.post(this.url + 'user', { user, url }).then((response) => {\r\n                        if (response.data.status === 'success') {\r\n                            this.setState({\r\n                                status: 'success'\r\n                            });\r\n                            swal(\r\n                                'Usuario registrado',\r\n                                'Te has registrado correctamente',\r\n                                'success'\r\n                            );\r\n                        } else {\r\n                            this.setState({\r\n                                status: 'failed'\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n            } else {\r\n                this.validator.showMessages();\r\n                this.forceUpdate();\r\n                this.setState({\r\n                    status: 'failed'\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.status === 'success') {\r\n            return (\r\n                <Redirect to=\"/login\" />\r\n            )\r\n        }\r\n        return (\r\n\r\n            <div id=\"registro\" className=\" col-12\">\r\n                <h2 className=\"text-center p-3 text-md-left\">\r\n                    Registro\r\n                </h2>\r\n                <hr />\r\n\r\n                <form className=\"col-md-5\" onSubmit={this.recibirFormulario} >\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"nombre\" className=\"ml-2\" >Nombre</label>\r\n                        <input id=\"nombre\" className=\"form-control mr-2 ml-2\" type=\"text\" name=\"nombre\" ref={this.nombreRef} onChange={this.changeState} required />\r\n                        {this.validator.message('nombre', this.state.user.nombre, 'required|names_surnames')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"apellidos\" className=\"ml-2\">Apellidos</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"apellidos\" ref={this.apellidosRef} onChange={this.changeState} required />\r\n                        {this.validator.message('apellidos', this.state.user.apellidos, 'required|names_surnames')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"telefono\" className=\"ml-2\">Telefono</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"telefono\" ref={this.telefonoRef} onChange={this.changeState} maxLength=\"9\" required />\r\n                        {this.validator.message('telefono', this.state.user.telefono, 'required|telefono')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"dni\" className=\"ml-2\">DNI</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"dni\" ref={this.dniRef} onChange={this.changeState} onBlur={this.changeState} required />\r\n                        {this.validator.message('dni', this.state.user.dni, 'required|dni')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"image\" className=\"ml-2\">Avatar</label>\r\n                        <input className=\"form-control-file mr-2 ml-2\" type=\"file\" name=\"imagen\" onChange={(e) => this.recogerFoto(e)} />\r\n                        {this.state.loading === true &&\r\n                            <small>Cargando imagen...</small>\r\n                        }\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"email\" className=\"ml-2\">Email</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"email\" ref={this.emailRef} onChange={this.changeState} onBlur={this.changeState} required />\r\n                        {this.validator.message('email', this.state.user.email, 'required|email2')}\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"password\" className=\"ml-2\">ContraseÃ±a</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"password\" name=\"password\" ref={this.passwordRef} onChange={this.changeState} onBlur={this.changeState} required minlength=\"6\" />\r\n                        {this.validator.message('password', this.state.user.password, 'required')}\r\n\r\n                    </div>\r\n                    <div className=\"form-group text-left\">\r\n                        <label htmlFor=\"password2\" className=\"ml-2\">Confirmar contraseÃ±a</label>\r\n                        <input className=\"form-control mr-2 ml-2\" type=\"password\" name=\"password2\" ref={this.password2Ref} onChange={this.changeState} onBlur={this.changeState} onKeyUp={this.changeState} required minlength=\"6\" />\r\n                        {this.confirmpassword === false &&\r\n                            <small>La contraseÃ±a no coincide</small>\r\n                        }\r\n\r\n                    </div>\r\n                    <div className=\"clearfix\"></div>\r\n                    <input type=\"submit\" onFocus={this.changeState} onClick={this.changeState} value=\"Registro\" class=\"btn btn-success\" />\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Register;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport swal from 'sweetalert';\r\nimport carrito from '../assets/images/carrito.svg'\r\nimport { Modal, Button } from 'react-bootstrap'\r\n\r\nclass Tienda extends Component {\r\n\r\n    url = Global.url\r\n    userId = null;\r\n    productaux = [];\r\n    state = {\r\n        identity: true,\r\n        user: {},\r\n        status: null,\r\n        productos: [],\r\n        carrito: [],\r\n        categoria: 'gafas',\r\n        edad: 'adulto',\r\n        genero: 'masculino',\r\n        show: false\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!auth.currentUser) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n            this.userId = this.props.match.params.id\r\n            if (this.userId === \"null\") {\r\n                this.setState({\r\n                    identity: false\r\n                });\r\n            }\r\n            axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                    this.getUser(this.userId);\r\n                } else {\r\n                    this.setState({\r\n                        identity: false\r\n                    });\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onCategoriaChange = (event) => {\r\n        this.setState({\r\n            categoria: event.target.value,\r\n        }, this.getProductos);\r\n\r\n    }\r\n\r\n    onEdadChange = (event) => {\r\n        this.setState({\r\n            edad: event.target.value\r\n        }, this.getProductos);\r\n    }\r\n\r\n    onGeneroChange = (event) => {\r\n        this.setState({\r\n            genero: event.target.value\r\n        }, this.getProductos);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getProductos();\r\n        this.getCarrito();\r\n\r\n    }\r\n\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    getCarrito = () => {\r\n        axios.get(this.url + 'carrito').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    carrito: response.data.carrito\r\n                })\r\n            }\r\n        })\r\n\r\n        console.log(this.state.carrito);\r\n    }\r\n\r\n    getProductos = () => {\r\n        let categoria = this.state.categoria;\r\n        let edad = this.state.edad;\r\n        let genero = this.state.genero;\r\n        axios.post(this.url + 'productos', { categoria: categoria, edad: edad, genero: genero }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    productos: response.data.productos,\r\n                    status: 'success'\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    productos: [],\r\n                    status: 'error'\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    pulsadoEvento = (item) => {\r\n        this.state.productos.forEach((element) => {\r\n            if (item === element.productId) {\r\n                this.productaux.push(element)\r\n                this.setState({\r\n                    show: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    cerradoEvento = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n        this.productaux = [];\r\n    }\r\n\r\n    agregarItem = (id) => {\r\n        axios.post(this.url + 'carrito/agregar', { item_id: id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    carrito: response.data.carrito\r\n                })\r\n                this.cerradoEvento();\r\n                swal(\r\n                    'Producto agregado correctamente',\r\n                    'El producto se ha aÃ±adido al carrito correctamente',\r\n                    'success'\r\n                );\r\n                console.log(this.state.carrito)\r\n\r\n            } else {\r\n                this.cerradoEvento();\r\n                swal(\r\n                    'El producto no se ha agregado correctamente',\r\n                    'Ha ocurrido un error al agregar el producto al carrito, intentelo mas tarde',\r\n                    'error'\r\n                );\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        var listProducts;\r\n        if (this.state.productos.length >= 1) {\r\n            listProducts = this.state.productos.map((data, i) => {\r\n\r\n                return (\r\n\r\n                    <div key={i} id={data.productId} className=\"card\" >\r\n                        <img className=\"card-img-top\" src={data.product.imagen} alt=\"Cardcap\" />\r\n                        <div className=\"card-body pt-0 pb-0\">\r\n                            <h4 className=\"card-title \">{data.product.nombre}</h4>\r\n                            <p className=\"card-text h5\">{data.product.precio} â‚¬</p><br />\r\n                        </div>\r\n                        <div class=\"card-footer pt-2 pb-2\">\r\n\r\n                            <button className=\"btn btn-primary\" onClick={() => this.pulsadoEvento(data.productId)}>Ver producto</button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            });\r\n        } else if (this.state.status === 'error') {\r\n            listProducts = <h1 className=\"mt-5 text-center\">No hay productos para mostrar</h1>\r\n\r\n\r\n\r\n        } else {\r\n            listProducts =\r\n                <h1 className=\"mt-5 text-center\">Cargando...</h1>\r\n\r\n\r\n\r\n        }\r\n\r\n        if (this.state.identity === false) {\r\n            return (\r\n                <Redirect to=\"/login\" />\r\n            )\r\n        } else {\r\n            return (\r\n                <div id=\"tienda\" className=\"container-fluid mt-3\">\r\n                    <div className=\"row\">\r\n                        <div id=\"filtros\" className=\"col-2 ml-4\">\r\n                            <div class=\"form-group text-left m-2\">\r\n                                <label htmlFor=\"categoria\">Categorias: </label>\r\n                                <select class=\"form-control\" name=\"categoria\" onChange={this.onCategoriaChange}>\r\n                                    <option selected value=\"gafas\">Gafas de sol</option>\r\n                                    <option value=\"lentillas\">Lentillas</option>\r\n                                    <option value=\"limpieza\">Limpieza y accesorios</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"genero text-left m-2\">\r\n                                <label htmlFor=\"genero\" >Genero: </label>\r\n                                <div class=\"form-check\">\r\n                                    <input type=\"radio\" checked={this.state.genero === 'masculino'} class=\"form-check-input\" name=\"masculino\" value=\"masculino\" onChange={this.onGeneroChange} />\r\n                                    <label class=\"form-check-label\" htmlFor=\"masculino\">Hombre</label>\r\n                                </div>\r\n                                <div className=\"form-check\">\r\n                                    <input type=\"radio\" class=\"form-check-input\" checked={this.state.genero === 'femenino'} name=\"femenino\" value=\"femenino\" onChange={this.onGeneroChange} />\r\n                                    <label class=\"form-check-label\" htmlFor=\"femenino\">Mujer</label>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"edad text-left m-2\">\r\n                                <label htmlFor=\"edad\" >Edad: </label>\r\n                                <div class=\"form-check\">\r\n                                    <input type=\"radio\" checked={this.state.edad === 'adulto'} class=\"form-check-input\" name=\"adulto\" value=\"adulto\" onChange={this.onEdadChange} />\r\n                                    <label class=\"form-check-label\" htmlFor=\"adulto\">Adulto</label>\r\n                                </div>\r\n                                <div className=\"form-check\">\r\n                                    <input type=\"radio\" checked={this.state.edad === 'infantil'} class=\"form-check-input\" name=\"infantil\" value=\"infantil\" onChange={this.onEdadChange} />\r\n                                    <label class=\"form-check-label\" htmlFor=\"infantil\">Infantil</label>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div id=\"productos\" className=\"col-7 m-2\">\r\n                            {listProducts}\r\n                        </div>\r\n\r\n\r\n                        <div id=\"carrito\" className=\"col-2 m-2\">\r\n                            <Link to={{ pathname: \"/carrito\", state: { userId: this.userId, carrito: this.state.carrito } }} className=\"ircarrito btn btn-primary\" >\r\n                                {this.state.carrito !== undefined &&\r\n                                    <span className=\"numeroitems\">{this.state.carrito.length} </span>\r\n\r\n                                }\r\n                                <img src={\"../\" + carrito} alt=\"icono-carrito\" />\r\n                            Ver Carrito\r\n                        </Link>\r\n\r\n                        </div>\r\n\r\n\r\n\r\n\r\n\r\n                        {this.productaux.length === 1 &&\r\n                            <Modal show={this.state.show} onHide={this.cerradoEvento} size=\"lg\"\r\n                                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                                centered>\r\n                                <Modal.Header closeButton>\r\n                                    <Modal.Title className=\"text-center\">\r\n                                        <img className=\"img-item\" src={this.productaux[0].product.imagen} alt=\"iamgen-item\" />\r\n                                        <h4>{this.productaux[0].product.nombre}</h4>\r\n                                        <p><small>Id referencia: {this.productaux[0].productId}</small></p>\r\n                                        <p className=\"card-text h5\">{this.productaux[0].product.precio} â‚¬</p><br />\r\n                                    </Modal.Title>\r\n                                </Modal.Header>\r\n                                <Modal.Body>\r\n                                    <div className=\"infocitacontacto pl-3\">\r\n                                        <p className=\"m-1 h5 \">Descripcion del producto:</p>\r\n                                        <p className=\"m-1 \">{this.productaux[0].product.descripcion}</p>\r\n\r\n                                    </div>\r\n                                    <div className=\"infoactualizarcita mt-3\">\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col d-flex justify-content-between  mt-2 mb-2\">\r\n                                                <button className=\"btn btn-primary m-auto\" onClick={() => this.agregarItem(this.productaux[0].productId)} >Agregar al carrito</button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </Modal.Body>\r\n                                <Modal.Footer>\r\n                                    <Button variant=\"secondary\" onClick={this.cerradoEvento}>\r\n                                        Cerrar\r\n            </Button>\r\n                                </Modal.Footer>\r\n                            </Modal>\r\n\r\n                        }\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default Tienda;","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport swal from 'sweetalert';\r\n\r\n\r\nclass Citas extends Component {\r\n    nombreRef = React.createRef();\r\n    apellidosRef = React.createRef();\r\n    emailRef = React.createRef();\r\n    telefonoRef = React.createRef();\r\n\r\n    url = Global.url;\r\n\r\n    state = {  \r\n        cita:{\r\n            nombre:null,\r\n            apellidos:null,\r\n            email:null,\r\n            telefono:null\r\n        },\r\n        status:null\r\n    }\r\n\r\n\r\n    componentWillMount() {\r\n        this.validator = new SimpleReactValidator({\r\n            locale: 'es',\r\n            validators: {\r\n                names_surnames: {\r\n                    message: 'El campo debe contener letras y espacios',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]+(\\s*[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]*)*[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]+$/) && params.indexOf(val) === -1\r\n                    },\r\n                    \r\n                },\r\n                email2:{\r\n                    message: 'El email no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^(?:[^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*|\"[^\\n\"]+\")@(?:[^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\]\\.,;:\\s@\"]{2,63}$/i) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                telefono:{\r\n                    message: 'El telefono no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^[896]\\d{8}$/) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                dni:{\r\n                    message: 'El DNI no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^\\d{8}[a-zA-Z]$/) && params.indexOf(val) === -1\r\n                    },\r\n                }\r\n            },\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n                alpha_space: 'Solo se permiten letras y espacios'\r\n\r\n            },\r\n        });\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            cita: {\r\n                nombre: this.nombreRef.current.value,\r\n                apellidos: this.apellidosRef.current.value,\r\n                email: this.emailRef.current.value,\r\n                telefono: this.telefonoRef.current.value,\r\n            }\r\n        });\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState();\r\n\r\n        if (this.validator.allValid()) {\r\n            let cita = this.state.cita;\r\n            axios.post(this.url + 'cita', cita).then((response) => {\r\n                if (response.data.status === 'success') {\r\n                    this.setState({\r\n                        status: 'success'\r\n                    });\r\n                    swal(\r\n                        'Cita enviada',\r\n                        'Contactaremos contigo por email',\r\n                        'success'\r\n                    );\r\n\r\n                    axios.post(this.url + 'email/cita');\r\n                } else {\r\n                    this.setState({\r\n                        status: 'failed'\r\n                    });\r\n                    swal(\r\n                        'Cita no enviada',\r\n                        'Se ha producido un error',\r\n                        'error'\r\n                    );\r\n                }\r\n            });\r\n        } else {\r\n            this.validator.showMessages();\r\n            this.forceUpdate();\r\n            this.setState({\r\n                status: 'failed'\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    render() { \r\n        return ( \r\n        <div id=\"citas\" className=\" col-12\">\r\n        <h2 className=\"text-center p-3 text-md-left\">\r\n            Pedir Cita\r\n        </h2>\r\n        <hr />\r\n\r\n        <form className=\"col-md-5\" onSubmit={this.recibirFormulario} >\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"nombre\" className=\"ml-2\">Nombre</label>\r\n                <input id=\"nombre\" className=\"form-control mr-2 ml-2\" type=\"text\" name=\"nombre\" ref={this.nombreRef} onChange={this.changeState} required />\r\n                {this.validator.message('nombre', this.state.cita.nombre, 'required|names_surnames')}\r\n            </div>\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"apellidos\" className=\"ml-2\">Apellidos</label>\r\n                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"apellidos\" ref={this.apellidosRef} onChange={this.changeState} required />\r\n                {this.validator.message('apellidos', this.state.cita.apellidos, 'required|names_surnames')}\r\n            </div>\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"telefono\" className=\"ml-2\">Telefono</label>\r\n                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"telefono\" ref={this.telefonoRef} onChange={this.changeState} maxLength=\"9\" required />\r\n                {this.validator.message('telefono', this.state.cita.telefono, 'required|telefono')}\r\n            </div>\r\n            <div className=\"form-group text-left\">\r\n                <label htmlFor=\"email\" className=\"ml-2\">Email</label>\r\n                <input className=\"form-control mr-2 ml-2\" type=\"text\" name=\"email\" ref={this.emailRef} onChange={this.changeState} required />\r\n                {this.validator.message('email', this.state.cita.email, 'required|email2')}\r\n            </div>\r\n            <div className=\"clearfix\"></div>\r\n            {this.state.status=== 'success'\r\n                ?<input type=\"submit\" value=\"Pedir cita\" class=\"btn btn-success\" disabled />\r\n                :<input type=\"submit\" value=\"Pedir cita\" class=\"btn btn-success\" />\r\n            \r\n            }\r\n            \r\n        </form>\r\n    </div> );\r\n    }\r\n}\r\n \r\nexport default Citas;","import React, { Component } from 'react';\r\n\r\nclass Servicios extends Component {\r\n    state = {  }\r\n    render() { \r\n        return (  <h1>Servicios</h1> );\r\n    }\r\n}\r\n \r\nexport default Servicios;","import React from 'react';\r\n\r\nconst Error= ()=>{\r\n    return(\r\n        <section id=\"content\"  className=\"mt-5\">\r\n          <h2 className=\"subheader\">Pagina no encontrada</h2>\r\n          <p>La pagina no existe en la web</p>\r\n          </section>\r\n    );\r\n}\r\n\r\nexport default Error;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport { Redirect } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport swal from 'sweetalert';\r\nimport SimpleReactValidator from 'simple-react-validator';\r\nimport moment from 'moment'\r\nimport {storage} from '../db';\r\n\r\nclass PerfilUsuario extends Component {\r\n    url = Global.url\r\n    userId = null;\r\n    admin = null;\r\n    listHistorial = null;\r\n    nombreRef = React.createRef();\r\n    apellidosRef = React.createRef();\r\n    dniRef = React.createRef();\r\n    telefonoRef = React.createRef();\r\n    textoHistorialRef = React.createRef();\r\n    fechaHistorialRef = React.createRef();\r\n\r\n    state = {\r\n        identity: true,\r\n        user: {},\r\n        status: null,\r\n        loading: true,\r\n        archivo: 'default',\r\n        loading_file: false,\r\n        eliminado:false,\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n        if (this.props.match.params.admin) {\r\n            this.admin = true\r\n\r\n        }\r\n        this.validator = new SimpleReactValidator({\r\n            locale: 'es',\r\n            validators: {\r\n                names_surnames: {\r\n                    message: 'El campo debe contener letras y espacios',\r\n                    rule: (val, params, validator) => {\r\n                        return validator.helpers.testRegex(val, /^[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]+(\\s*[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]*)*[a-zA-ZÃ€-Ã¿\\u00f1\\u00d1]+$/) && params.indexOf(val) === -1\r\n                    },\r\n\r\n                },\r\n                email2: {\r\n                    message: 'El email no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^(?:[^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*|\"[^\\n\"]+\")@(?:[^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\]\\.,;:\\s@\"]{2,63}$/i) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                telefono: {\r\n                    message: 'El telefono no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^[896]\\d{8}$/) && params.indexOf(val) === -1\r\n                    },\r\n                },\r\n                dni: {\r\n                    message: 'El DNI no es valido',\r\n                    rule: (val, params, validator) => {\r\n                        // eslint-disable-next-line\r\n                        return validator.helpers.testRegex(val, /^\\d{8}[a-zA-Z]$/) && params.indexOf(val) === -1\r\n                    },\r\n                }\r\n            },\r\n            messages: {\r\n                required: 'Este campo es obligatorio',\r\n                alpha_num_space: 'Solo se permiten caracteres alfanumericos',\r\n                numeric: 'Solo se permiten numeros',\r\n                email: 'Email no es correcto',\r\n                alpha_space: 'Solo se permiten letras y espacios'\r\n\r\n            },\r\n        });\r\n\r\n        if (!auth.currentUser) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n            if (this.admin === true) {\r\n                this.userId = this.props.match.params.id\r\n                let email = auth.currentUser.email;\r\n                axios.get(this.url + 'user/' + email).then((response) => {\r\n                    if (response.data.status === 'success' && response.data.user.email === auth.currentUser.email) {\r\n                        this.getUser(this.userId);\r\n\r\n                    } else {\r\n                        this.setState({\r\n                            identity: false\r\n                        });\r\n                    }\r\n                })\r\n\r\n\r\n            } else {\r\n                this.userId = this.props.match.params.id\r\n\r\n                axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                    if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                        this.getUser(this.userId);\r\n\r\n                    } else {\r\n                        this.setState({\r\n                            identity: false\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user,\r\n                    historial: response.data.user.historial,\r\n                    loading: false\r\n                })\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    changeState = () => {\r\n        this.setState({\r\n            user: {\r\n                nombre: this.nombreRef.current.value,\r\n                apellidos: this.apellidosRef.current.value,\r\n                telefono: this.telefonoRef.current.value,\r\n                dni: this.dniRef.current.value,\r\n                historial: this.state.historial,\r\n                imagen:this.state.user.imagen\r\n            }\r\n        });\r\n    }\r\n\r\n    addHistorial = () => {\r\n        let historialaux = this.state.historial;\r\n\r\n        let add = { texto: this.textoHistorialRef.current.value, fecha: moment(this.fechaHistorialRef.current.value).format(\"DD/MM/YYYY\") }\r\n        historialaux.push(add)\r\n\r\n        this.textoHistorialRef.current.value = \"\"\r\n        this.setState({\r\n            historial: historialaux\r\n        })\r\n\r\n\r\n    }\r\n\r\n    recogerFoto = (event) => {\r\n        this.setState({\r\n            archivo: event.target.files[0]\r\n        })\r\n    }\r\n\r\n    recibirFormulario = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.changeState();\r\n\r\n        if (this.validator.allValid()) {\r\n\r\n            if (this.state.archivo !== 'default') {\r\n                this.setState({\r\n                    loading_file: true\r\n                })\r\n                storage.ref(this.state.archivo.name).put(this.state.archivo).then(() => {\r\n                    storage.ref().child(this.state.archivo.name).getDownloadURL().then(\r\n                        url => {\r\n                            this.setState({\r\n                                loading_file: false\r\n                            })\r\n                            let user = this.state.user;\r\n                            axios.put(this.url + 'user', { user, userId: this.userId, url }).then((response) => {\r\n                                if (response.data.status === 'success') {\r\n                                    this.setState({\r\n                                        user: {\r\n                                            nombre: this.nombreRef.current.value,\r\n                                            apellidos: this.apellidosRef.current.value,\r\n                                            telefono: this.telefonoRef.current.value,\r\n                                            dni: this.dniRef.current.value,\r\n                                            historial: this.state.historial,\r\n                                            imagen:url\r\n                                        },\r\n                                        status: 'success'\r\n                                    });\r\n                                    swal(\r\n                                        'Usuario actualizado',\r\n                                        'Tu perfil se ha actualizado correctamente',\r\n                                        'success'\r\n                                    );\r\n                                } else {\r\n                                    this.setState({\r\n                                        status: 'failed'\r\n                                    });\r\n                                    swal(\r\n                                        'Usuario no actualizado',\r\n                                        'Tu perfil no se ha actualizado correctamente',\r\n                                        'error'\r\n                                    );\r\n                                }\r\n                            });\r\n                        });\r\n                });\r\n            } else {\r\n                let user = this.state.user;\r\n                axios.put(this.url + 'user', { user, userId: this.userId, url:this.state.user.imagen }).then((response) => {\r\n                    if (response.data.status === 'success') {\r\n                        this.setState({\r\n                            user: {\r\n                                nombre: this.nombreRef.current.value,\r\n                                apellidos: this.apellidosRef.current.value,\r\n                                telefono: this.telefonoRef.current.value,\r\n                                dni: this.dniRef.current.value,\r\n                                historial: this.state.historial,\r\n                                imagen:this.state.user.imagen\r\n                            },\r\n                            status: 'success'\r\n                        });\r\n                        swal(\r\n                            'Usuario actualizado',\r\n                            'Tu perfil se ha actualizado correctamente',\r\n                            'success'\r\n                        );\r\n                    } else {\r\n                        this.setState({\r\n                            status: 'failed'\r\n                        });\r\n                        swal(\r\n                            'Usuario no actualizado',\r\n                            'Tu perfil no se ha actualizado correctamente',\r\n                            'error'\r\n                        );\r\n                    }\r\n                });\r\n            }\r\n\r\n        } else {\r\n            this.validator.showMessages();\r\n            this.forceUpdate();\r\n            this.setState({\r\n                status: 'failed'\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    eliminarUsuario=()=>{\r\n        let id=this.userId\r\n        axios.delete(this.url +'user/'+id).then((response) => {\r\n            if(response.data.status === 'success') {\r\n                swal(\r\n                    'Usuario eliminado',\r\n                    'El usuario ha sido eliminado correctamente',\r\n                    'success'\r\n                );\r\n\r\n            }else{\r\n                swal(\r\n                    'Usuario no eliminado',\r\n                    'Se ha producido un error al eliminar usuario',\r\n                    'error'\r\n                );\r\n            }\r\n        }); \r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        if (this.state.loading === false) {\r\n            return (\r\n\r\n                <div id=\"info\" className=\"col-lg-12 mt-3\">\r\n                    {this.state.identity === true\r\n                        ? <React.Fragment>\r\n                            {this.admin === true\r\n                                ? <React.Fragment>\r\n                                    <h2>\r\n                                        Perfil de: {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                                    </h2><small>{this.state.user.email}</small>\r\n                                </React.Fragment>\r\n                                : <h2>\r\n                                    Mi perfil   -   {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                                </h2>\r\n                            }\r\n                            <hr />\r\n                            <div className=\"row\">\r\n\r\n                                <img className=\"user-image\" src={this.state.user.imagen} alt=\"user\" />\r\n\r\n\r\n\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <form className=\"col-md-5 ml-4 pl-0\" onSubmit={this.recibirFormulario} >\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"nombre\" className=\"ml-2\">Nombre</label>\r\n                                        <input id=\"nombre\" className=\"form-control\" type=\"text\" value={this.state.user.nombre} name=\"nombre\" ref={this.nombreRef} onChange={this.changeState} required />\r\n                                        {this.validator.message('nombre', this.state.user.nombre, 'required|names_surnames')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"apellidos\" className=\"ml-2\">Apellidos</label>\r\n                                        <input className=\"form-control\" type=\"text\" name=\"apellidos\" value={this.state.user.apellidos} ref={this.apellidosRef} onChange={this.changeState} required />\r\n                                        {this.validator.message('apellidos', this.state.user.apellidos, 'required|names_surnames')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"telefono\" className=\"ml-2\">Telefono</label>\r\n                                        <input className=\"form-control\" type=\"text\" name=\"telefono\" value={this.state.user.telefono} ref={this.telefonoRef} onChange={this.changeState} maxLength=\"9\" required />\r\n                                        {this.validator.message('telefono', this.state.user.telefono, 'required|telefono')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"dni\" className=\"ml-2\">DNI</label>\r\n                                        <input className=\"form-control\" type=\"text\" name=\"dni\" value={this.state.user.dni} ref={this.dniRef} onChange={this.changeState} required />\r\n                                        {this.validator.message('dni', this.state.user.dni, 'required|dni')}\r\n                                    </div>\r\n                                    <div className=\"form-group text-left\">\r\n                                        <label htmlFor=\"image\" className=\"ml-2\">Avatar</label>\r\n                                        <input className=\"form-control-file mr-2 ml-2\" type=\"file\" name=\"imagen\" onChange={(e) => this.recogerFoto(e)} />\r\n                                        {this.state.loading_file === true &&\r\n                                            <small>Cargando imagen...</small>\r\n                                        }\r\n                                    </div>\r\n\r\n                                    <div className=\"clearfix\"></div>\r\n                                    <input type=\"submit\" value=\"Actualizar datos\" className=\"btn btn-success\" />\r\n                                </form>\r\n\r\n\r\n                                {this.admin === true &&\r\n                                    <React.Fragment>\r\n                                        <div className=\"col-md-6 ml-5\">\r\n                                            <div className=\"row\">\r\n                                                <div className=\"col-12\">\r\n                                                    <label htmlFor=\"textoHistorial\">Agregar al historial</label>\r\n                                                    <input className=\"form-control mt-1 mb-1\" type=\"text\" name=\"textoHistorial\" ref={this.textoHistorialRef} required />\r\n                                                    <input className=\"form-control mt-1 mb-1\" type=\"date\" name=\"fechaHistorial\" ref={this.fechaHistorialRef} required />\r\n                                                    <input className=\"btn btn-success mt-1 mb-1\" type=\"button\" value=\"AÃ±adir\" onClick={this.addHistorial} />\r\n                                                </div>\r\n\r\n\r\n                                                <div className=\"historial col-12 mt-4\">\r\n                                                    <ul className=\"list-group\">\r\n                                                        {this.state.historial !== undefined && this.state.historial.length !== null && this.state.historial.length >= 1\r\n\r\n                                                            ? this.listHistorial = this.state.historial.map((data, i) => {\r\n                                                                return (\r\n                                                                    <li className=\"list-group-item\" key={i} >\r\n                                                                        <p>{data.texto + ' - ' + data.fecha}</p>\r\n                                                                    </li>\r\n                                                                );\r\n                                                            })\r\n                                                            : <li className=\"list-group-item\"><h3>No hay ningun historial</h3></li>\r\n\r\n                                                        }\r\n                                                    </ul>\r\n                                                </div>\r\n\r\n                                                <button className=\"btn btn-danger\" style={{margin: \"2rem auto\"}} onClick={this.eliminarUsuario} >Eliminar usuario</button>\r\n                                            </div>\r\n\r\n                                        </div>\r\n                                    </React.Fragment>\r\n                                }\r\n\r\n                            </div>\r\n                        </React.Fragment>\r\n                        : <React.Fragment>\r\n                            {this.admin === true\r\n                                ? <div id=\"info\">\r\n                                    <h1 className=\"mt-5\">Problema con carga de Usuario</h1>\r\n                                </div>\r\n                                : <Redirect to=\"/login\" />\r\n                            }\r\n                        </React.Fragment>\r\n                    }\r\n\r\n\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div id=\"info\">\r\n                    <h1 className=\"mt-5\">Cargando...</h1>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PerfilUsuario;","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport Global from \"../../Global\"\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nclass UsuariosAdmin extends Component {\r\n    url = Global.url\r\n    state = {\r\n        users:{},\r\n        message: null,\r\n        status: null\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n        axios.get(this.url + 'users').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    users: response.data.users,\r\n                    status: 'success'\r\n                });\r\n\r\n\r\n\r\n            } else {\r\n                this.setState({\r\n                    status: 'error',\r\n                    message: response.data.message\r\n                });\r\n                \r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.state.users.length >= 1) {\r\n            var listUsers = this.state.users.map((data, i) => {\r\n\r\n                return (\r\n\r\n                    <div key={i} id={data.userId} className=\"card\" >\r\n                        <img className=\"card-img-top\" src={data.user.imagen} alt=\"Cardcap\" />\r\n                        <div className=\"card-body\">\r\n                            <h5 className=\"card-title \">{data.user.nombre + ' ' + data.user.apellidos}</h5>\r\n                            <small className=\"card-text\">{data.user.email}</small><br />\r\n                        </div>\r\n                        <div class=\"card-footer\">\r\n                            <Link to={\"/adminperfil/requestuser/\" + data.userId} className=\"btn btn-primary\">Ver Perfil</Link>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })\r\n\r\n            return (\r\n                <div id=\"clientes\" className=\"row\">\r\n                    {listUsers}\r\n                </div>\r\n            );\r\n        } else if (this.state.users.length === undefined && this.state.status === 'error') {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5\">No hay clientes para mostrar</h1>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5\">Cargando...</h1>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default UsuariosAdmin;","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport Global from \"../../Global\"\r\nimport swal from 'sweetalert';\r\nimport moment from 'moment'\r\n\r\n\r\nclass CitasAdmin extends Component {\r\n    url = Global.url\r\n\r\n    state = {\r\n        citas: [],\r\n        message: null,\r\n        status: null,\r\n    }\r\n\r\n    componentWillMount() {\r\n        axios.get(this.url + 'pendingcitas').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    citas: response.data.citas,\r\n                    status: 'success'\r\n                });\r\n\r\n\r\n            } else {\r\n                this.setState({\r\n                    status: 'error',\r\n                    message: response.data.message\r\n                });\r\n\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n   updateCita(event, id, i){\r\n        event.preventDefault(); \r\n\r\n        let fecha=moment(event.target[0].value).format(\"DD/MM/YYYY\")\r\n        let hora=event.target[1].value \r\n        let cita= this.state.citas[i].cita;\r\n        cita.hora=hora;\r\n        cita.fecha=fecha;\r\n        cita.estado='actualizado';\r\n\r\n        axios.put(this.url + 'cita', {cita, id}).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                let citasaux=this.state.citas; \r\n                citasaux.splice(i,1);\r\n                this.setState({\r\n                    citas: citasaux, \r\n                    status: 'success'\r\n                });\r\n                swal(\r\n                    'Cita guardada correctamente',\r\n                    'Cita se ha guardado en tu calendario correctamente', \r\n                    'success'\r\n                );\r\n                this.forceUpdate();\r\n\r\n                axios.post(this.url+'email/confirmacita', {cita});\r\n\r\n            }else{\r\n                console.log(response.data.error)\r\n                swal(\r\n                    'Cita no se ha guardado correctamente',\r\n                    'Cita no se ha guardado en tu calendario',\r\n                    'error'\r\n                );\r\n            } \r\n        }); \r\n    }\r\n\r\n    render() {\r\n        if (this.state.citas.length >= 1) {\r\n            var listCitas = this.state.citas.map((data, i) => {\r\n                return (\r\n                    <li className=\"list-group-item\" key={i}>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-4\">\r\n                                <h5>{data.cita.user.nombre + ' ' + data.cita.user.apellidos}</h5>\r\n                                <p>{data.cita.user.email}</p>\r\n                            </div>\r\n                        <form className=\"col-8\" onSubmit={(e)=>this.updateCita(e, data.citaId, i)}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col\">\r\n                            <input className=\"form-control m-1\" type=\"date\" name=\"fechaCita\"  required/>\r\n                            </div>\r\n                            <div className=\"col\">\r\n                            <input className=\"form-control m-1 \" type=\"time\" name=\"horaCita\"  min=\"09:00\" max=\"20:00\" required  />\r\n                            </div>\r\n                            <input className=\"btn btn-success mr-4 ml-4\" type=\"submit\"  value=\"Aceptar\"/>\r\n                            </div>\r\n                        </form>\r\n                        </div>\r\n                    </li>\r\n\r\n                )\r\n            })\r\n\r\n            return (\r\n                <ul className=\"list-group\">\r\n                    {listCitas}\r\n                </ul>\r\n            );\r\n        } else if (this.state.citas.length === undefined || this.state.status === 'error') {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5\">No hay citas para mostrar</h1>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div id=\"clientes\" className=\"text-center\">\r\n                    <h1 className=\"mt-5\">Cargando...</h1>\r\n                </div>\r\n            );\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default CitasAdmin;","import React, { Component } from 'react';\r\nimport moment from 'moment';\r\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\nimport axios from \"axios\";\r\nimport Global from \"../../Global\"\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport swal from 'sweetalert';\r\n\r\n\r\nconst localizer = momentLocalizer(moment)\r\n\r\nclass Calendario extends Component {\r\n    eventsList = []\r\n    url = Global.url\r\n    citaaux = []\r\n    state = {\r\n        citas: [],\r\n        message: null,\r\n        status: null,\r\n        showmodal: false,\r\n        show: false,\r\n    }\r\n\r\n    componentWillMount() {\r\n        axios.get(this.url + 'updatedcitas').then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    citas: response.data.citas,\r\n                    status: 'success'\r\n                });\r\n\r\n                this.actualizadorCitas();\r\n\r\n                this.forceUpdate();\r\n\r\n            } else {\r\n                this.setState({\r\n                    status: 'error',\r\n                    message: response.data.message\r\n                });\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    actualizadorCitas = () => {\r\n        this.eventsList = [];\r\n        this.state.citas.forEach((element, i) => {\r\n            let fecha2_split = element.cita.fecha.split(\"/\");\r\n            let hora2_split = element.cita.hora.split(\":\");\r\n            this.eventsList.push(\r\n                {\r\n                    title: element.cita.user.nombre + \" \" + element.cita.user.apellidos,\r\n                    start: new Date(parseInt(fecha2_split[2]), parseInt(fecha2_split[1]) - 1, parseInt(fecha2_split[0]), parseInt(hora2_split[0]), parseInt(hora2_split[1]), 0),\r\n                    end: new Date(parseInt(fecha2_split[2]), parseInt(fecha2_split[1]) - 1, parseInt(fecha2_split[0]), parseInt(hora2_split[0]) + 1, parseInt(hora2_split[1]), 0),\r\n                    id: element.citaId\r\n                }\r\n            );\r\n            this.forceUpdate();\r\n        });\r\n    }\r\n\r\n\r\n    pulsadoEvento = (event) => {\r\n        this.state.citas.forEach((element, i) => {\r\n            if (event.id === element.citaId) {\r\n                this.citaaux.push(element)\r\n                this.setState({\r\n                    show: true\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    cerradoEvento = () => {\r\n        this.setState({\r\n            show: false\r\n        });\r\n        this.citaaux = [];\r\n    }\r\n\r\n    \r\n    updateCita(event, id) {\r\n        event.preventDefault();\r\n\r\n        let fecha = moment(event.target[0].value).format(\"DD/MM/YYYY\")\r\n        let hora = event.target[1].value\r\n        let cita = this.citaaux[0].cita;\r\n        cita.hora = hora;\r\n        cita.fecha = fecha;\r\n        cita.estado = 'actualizado';\r\n\r\n        axios.put(this.url + 'cita', { cita, id }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.actualizadorCitas();\r\n                this.cerradoEvento();\r\n                swal(\r\n                    'Cita guardada correctamente',\r\n                    'Cita se ha guardado en tu calendario correctamente',\r\n                    'success'\r\n                );\r\n                this.forceUpdate();\r\n                axios.post(this.url + 'email/cambiocita', { cita });\r\n\r\n            } else {\r\n                swal(\r\n                    'Cita no se ha guardado correctamente',\r\n                    'Cita no se ha guardado en tu calendario',\r\n                    'error'\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    envioRecordatorio(citaaux) {\r\n        let cita = citaaux;\r\n        axios.post(this.url + 'email/recordatorio', { cita }).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                swal(\r\n                    'Recordatorio de cita enviado',\r\n                    'Se ha enviado un correo de recordatorio al cliente',\r\n                    'success'\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"bigCalendar-container\">\r\n                    <Calendar\r\n                        localizer={localizer}\r\n                        events={this.eventsList}\r\n                        startAccessor=\"start\"\r\n                        endAccessor=\"end\"\r\n                        defaultView=\"week\"\r\n                        onSelectEvent={(e) => {\r\n                            this.pulsadoEvento(e)\r\n                        }}\r\n                        min={new Date(2008, 0, 1, 9, 0)}\r\n                        max={new Date(2008, 0, 1, 20, 0)}\r\n                        style={{ height: 500, margin: \"2rem\" }}\r\n                    />\r\n\r\n\r\n                </div>\r\n\r\n\r\n\r\n                        {/* MODAL DE DETALLE DE CITA */}\r\n                {this.citaaux.length === 1 &&\r\n                    <Modal show={this.state.show} onHide={this.cerradoEvento} size=\"lg\"\r\n                        aria-labelledby=\"contained-modal-title-vcenter\"\r\n                        centered>\r\n                        <Modal.Header closeButton>\r\n                            <Modal.Title className=\"text-center\">\r\n                                <h2>{this.citaaux[0].cita.fecha + \" - \" + this.citaaux[0].cita.hora}</h2>\r\n                                <h4>{this.citaaux[0].cita.user.nombre + \" \" + this.citaaux[0].cita.user.apellidos}</h4>\r\n                            </Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <div className=\"infocitacontacto pl-3\">\r\n                                <h6 className=\"m-1 \">Telefono: {this.citaaux[0].cita.user.telefono}</h6>\r\n                                <h6 className=\"m-1 \">Email: {this.citaaux[0].cita.user.email}</h6>\r\n                            </div>\r\n                            <div className=\"infoactualizarcita mt-3\">\r\n                                {/* INPUT DATE Y HORA Y BOTON PARA ACTUALIZAR  */}\r\n                                <form className=\"col-12\" onSubmit={(e) => this.updateCita(e, this.citaaux[0].citaId)}>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col\">\r\n                                            <input className=\"form-control m-1\" type=\"date\" name=\"fechaCita\" required />\r\n                                        </div>\r\n                                        <div className=\"col\">\r\n                                            <input className=\"form-control m-1 \" type=\"time\" name=\"horaCita\" min=\"09:00\" max=\"20:00\" required />\r\n                                        </div>\r\n                                        <div className=\"col\">\r\n                                            <input className=\"btn btn-success m-1\" type=\"submit\" value=\"Actualizar cita\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    </form>\r\n                                    {/* BOTON ENVIAR RECORDATORIO */}\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col d-flex justify-content-between  mt-2 mb-2\">\r\n                                            <button className=\"btn btn-primary m-auto\" onClick={() => this.envioRecordatorio(this.citaaux[0].cita)} >Enviar recordatorio</button>\r\n                                        </div>\r\n                                    </div>\r\n                                \r\n                            </div>\r\n                        </Modal.Body>\r\n                        <Modal.Footer>\r\n                            <Button variant=\"secondary\" onClick={this.cerradoEvento}>\r\n                                Cerrar\r\n                            </Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n\r\n                }\r\n\r\n\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Calendario;","import React, { Component } from 'react';\r\nimport { auth } from '../db';\r\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Global from \"../Global\";\r\nimport UsuariosAdmin from './panelAdmin/UsuariosAdmin'\r\nimport CitasAdmin from './panelAdmin/CitasAdmin'\r\nimport PerfilUsuario from './PerfilUsuario'\r\nimport Calendario from './panelAdmin/Calendario'\r\nimport { MDBNav, MDBNavItem, MDBNavLink } from \"mdbreact\";\r\n\r\nclass PerfilAdmin extends Component {\r\n    url = Global.url\r\n    userId = null;\r\n    state = {\r\n        identity: true,\r\n        user: {},\r\n        status: null,\r\n        loading:true\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (auth.currentUser === undefined) {\r\n            this.setState({\r\n                identity: false\r\n            });\r\n        } else {\r\n\r\n            this.userId = this.props.match.params.adminid\r\n\r\n            axios.get(this.url + 'getemail/' + this.userId).then((response) => {\r\n                if (response.data.status === 'success' && response.data.email === auth.currentUser.email) {\r\n                    this.getUser(this.userId);\r\n\r\n                } else {\r\n                    this.setState({\r\n                        identity: false\r\n                    });\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    getUser = (id) => {\r\n        axios.get(this.url + 'getuser/' + id).then((response) => {\r\n            if (response.data.status === 'success') {\r\n                this.setState({\r\n                    user: response.data.user,\r\n                    loading:false\r\n                })\r\n\r\n                if (this.state.user.admin === false) {\r\n                    this.setState({\r\n                        identity: false\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        if(this.state.loading===false){\r\n        return (\r\n            <div id=\"admin\" className=\"col-lg-12 mt-3\">\r\n                {this.state.identity === true\r\n                    ? <React.Fragment>\r\n                        <h2>\r\n                            Bienvenido   -   {this.state.user.nombre + ' ' + this.state.user.apellidos}\r\n                        </h2>\r\n                        <hr />\r\n                        <BrowserRouter>\r\n                            <div id=\"panel\">\r\n                                <Redirect exact from=\"/\" to={\"/adminperfil/\" + this.userId + \"/clientes\"} />\r\n\r\n\r\n                                <MDBNav className=\"nav-tabs mt-5\">\r\n                                    <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/clientes\"}>Clientes</MDBNavLink>\r\n                                    </MDBNavItem>\r\n                                    <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/citas\"}>Citas</MDBNavLink>\r\n                                    </MDBNavItem>\r\n                                    <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/calendario\"}>Calendario</MDBNavLink>\r\n                                    </MDBNavItem>\r\n                                    {/* <MDBNavItem>\r\n                                        <MDBNavLink to={\"/adminperfil/\" + this.userId + \"/pedidos\"}>Pedidos</MDBNavLink>\r\n                                    </MDBNavItem>  */}\r\n                                </MDBNav>\r\n\r\n\r\n                                <Switch>\r\n\r\n                                    <Route path={\"/adminperfil/\" + this.userId + \"/clientes\"} >\r\n                                        <UsuariosAdmin />\r\n                                    </Route>\r\n                                    <Route path={\"/adminperfil/\" + this.userId + \"/citas\"} >\r\n                                        <CitasAdmin />\r\n                                    </Route>\r\n\r\n                                    <Route path={\"/adminperfil/\" + this.userId + \"/calendario\"} >\r\n                                        <Calendario />\r\n                                    </Route>\r\n                                    {/* <Route path={\"/adminperfil/\" + this.userId + \"/pedidos\"} >\r\n                                        <PedidosAdmin />\r\n                                    </Route> */}\r\n                                    <Route exact path=\"/perfil/:id/:admin\" component={PerfilUsuario}/>\r\n                                    <Route path={\"/adminperfil/requestuser/:id\"}\r\n                                        render={\r\n                                            (props) => {\r\n                                                var userId = props.match.params.id;\r\n                                                var admin=true;\r\n                                                return (\r\n                                                    <Redirect to={'/perfil/' + userId + '/'+admin} />\r\n                                                )\r\n                                            }\r\n                                        }\r\n                                    />\r\n\r\n                                </Switch>\r\n\r\n                            </div>\r\n                        </BrowserRouter>\r\n\r\n\r\n                    </React.Fragment>\r\n                    : <React.Fragment>\r\n                        <Redirect to=\"/login\" />\r\n                    </React.Fragment>\r\n                }\r\n\r\n            </div>\r\n        );\r\n\r\n            }else{\r\n                return(\r\n                    <h1>Cargando....</h1>\r\n                );\r\n            }\r\n    }\r\n}\r\n\r\nexport default PerfilAdmin;","import React, { Component } from 'react';\r\n\r\n\r\nclass Carrito extends Component {\r\n\r\n    \r\n\r\n    state = {  }\r\n\r\n    componentDidMount () {\r\n        var userId=this.props.location.state.userId;\r\n        var carrito=this.props.location.state.carrito;\r\n\r\n        \r\n        \r\n    }\r\n    render() { \r\n        return (  <div>CArrito   </div>\r\n            );\r\n    }\r\n}\r\n\r\nexport default Carrito;","import React, { Component } from 'react';\r\nimport {BrowserRouter, Route, Switch, Redirect} from 'react-router-dom';\r\n\r\n\r\nimport Header from './components/Header';\r\nimport Home from './components/Home';\r\nimport Footer from './components/Footer';\r\nimport Login from './components/Login';\r\nimport Register from './components/Register';\r\nimport Tienda from './components/Tienda';\r\nimport Citas from './components/Citas';\r\nimport Servicios from './components/Servicios';\r\nimport Error from './components/Error'\r\nimport PerfilUsuario from './components/PerfilUsuario';\r\nimport PerfilAdmin from './components/PerfilAdmin';\r\nimport Carrito from './components/Carrito';\r\n\r\nclass Router extends Component {\r\n    state = {\r\n        isLogged:false,\r\n    };\r\n    logged=()=>{\r\n        this.setState({\r\n            isLogged:true,  \r\n        })\r\n    }\r\n\r\n    signout=()=>{\r\n        this.setState({\r\n            isLogged:false,\r\n        })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <BrowserRouter>\r\n            {this.state.isLogged===true\r\n                ? <Header logged={true} />\r\n                : <Header />\r\n            }\r\n                    <Switch>\r\n\r\n                        <Route exact path=\"/\" component={Home} />\r\n                        {/* <Route exact path=\"/tope-vision\" component={Home} /> */}\r\n                        <Route exact path=\"/home\" component={Home} />\r\n                        <Route exact path=\"/login\" component={Login} />\r\n                        <Route exact path=\"/register\" component={Register} />\r\n                        <Route exact path=\"/servicios\" component={Servicios} />\r\n                        <Route exact path=\"/tienda/:id?\" component={Tienda} />\r\n                        <Route exact path=\"/carrito\" component={Carrito} />\r\n                        <Route exact path=\"/miperfil/:id\" component={PerfilUsuario}/>\r\n                        <Route exact path=\"/adminperfil/:adminid\" component={PerfilAdmin}/>\r\n                        <Route exact path=\"/citas\" component={Citas} />\r\n                        <Route exact path=\"/logged\" render={\r\n                            ()=>{   \r\n                                    this.logged();\r\n                                    return(\r\n                                        <Redirect to=\"/\"/>\r\n                                    )\r\n\r\n                            }\r\n                        }/>\r\n                        <Route exact path=\"/signout\" render={\r\n                            ()=>{   \r\n                                    this.signout();\r\n                                    return(\r\n                                        <Redirect to=\"/\"/>\r\n                                    )\r\n\r\n                            }\r\n                        }/>\r\n                        \r\n\r\n                        <Route component={Error} />\r\n                    </Switch>\r\n\r\n                    \r\n                    \r\n            \r\n                <Footer />\r\n            </BrowserRouter>\r\n\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Router;","import React from 'react';\r\nimport './assets/css/App.css';\r\nimport Router from './Router';\r\n\r\n\r\nfunction App() {\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\r\nimport './assets/css/index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.dbc517cd.png\";","module.exports = __webpack_public_path__ + \"static/media/a.83bde698.png\";","module.exports = __webpack_public_path__ + \"static/media/b.8ba9f6ff.png\";","module.exports = __webpack_public_path__ + \"static/media/c.98aafa73.png\";","module.exports = __webpack_public_path__ + \"static/media/d.464a4d00.png\";","module.exports = __webpack_public_path__ + \"static/media/carrito.420ed8ab.svg\";"],"sourceRoot":""}